<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>132、内置工具类型</title><meta name="description" content="呦呦鹿鸣，食野之苹"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="

JavaScript 中的内置方法是用来操作值的，TypeScript 的内置方法是用来操作类型的。
Partial:可选属性
它接收一个对象类型，并将这个对象类型的所有属性都标记为可选，这样我们就不需要一个个将它们标记为可选属性了。

12345678910111213141516171819type User = &amp;#123;  name: string  age: number  email: string&amp;#125;type PartialUser = Partial&amp;lt;User&amp;gt;const user: User = &amp;#123;  name: 'John Doe',  age: 30,  email: 'john.doe@example.com'&amp;#125;// 可以不实现全部的属性.."><meta name="generator" content="Hexo 4.2.1"></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Jude's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">132、内置工具类型</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Partial-可选属性"><span class="toc-text">Partial:可选属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Required-必选属性"><span class="toc-text">Required:必选属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Readonly-只读属性"><span class="toc-text">Readonly:只读属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Record：基于索引签名类型"><span class="toc-text">Record：基于索引签名类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pick-类型"><span class="toc-text">Pick 类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Omit-类型"><span class="toc-text">Omit 类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#集合类型：Exclude、Extract"><span class="toc-text">集合类型：Exclude、Extract</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数类型"><span class="toc-text">函数类型</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/ts"><i class="tag post-item-tag">ts</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">132、内置工具类型</h1><time class="has-text-grey" datetime="2023-04-12T12:00:00.000Z">2023-04-12</time><article class="mt-2 post-content"><a id="more"></a>

<p>JavaScript 中的内置方法是用来操作值的，TypeScript 的内置方法是用来操作类型的。</p>
<h2 id="Partial-可选属性"><a href="#Partial-可选属性" class="headerlink" title="Partial:可选属性"></a>Partial:可选属性</h2><blockquote>
<p>它接收一个对象类型，并将这个对象类型的所有属性都标记为可选，这样我们就不需要一个个将它们标记为可选属性了。</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> User = &#123;<br>  name: <span class="hljs-built_in">string</span><br>  age: <span class="hljs-built_in">number</span><br>  email: <span class="hljs-built_in">string</span><br>&#125;<br><br><span class="hljs-keyword">type</span> PartialUser = Partial&lt;User&gt;<br><br><span class="hljs-keyword">const</span> user: User = &#123;<br>  name: <span class="hljs-string">'John Doe'</span>,<br>  age: <span class="hljs-number">30</span>,<br>  email: <span class="hljs-string">'john.doe@example.com'</span><br>&#125;<br><br><span class="hljs-comment">// 可以不实现全部的属性了！</span><br><span class="hljs-keyword">const</span> partialUser: PartialUser = &#123;<br>  name: <span class="hljs-string">'John Doe'</span>,<br>  age: <span class="hljs-number">30</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>从 Partial 的使用方式我们可以看到，工具类型使用起来就像一个函数——你给它入参，它还你出参，而出入参都是类型！而这些函数预留的参数，其实也正是我们此前介绍过的，类型世界中的变量——泛型。</p>
<h2 id="Required-必选属性"><a href="#Required-必选属性" class="headerlink" title="Required:必选属性"></a>Required:必选属性</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> User = &#123;<br>  name?: <span class="hljs-built_in">string</span><br>  age?: <span class="hljs-built_in">number</span><br>  email?: <span class="hljs-built_in">string</span><br>&#125;<br><br><span class="hljs-keyword">type</span> RequiredUser = Required&lt;User&gt;<br><br><span class="hljs-keyword">const</span> user: User = &#123;<br>  name: <span class="hljs-string">'John Doe'</span><br>&#125;<br><br><span class="hljs-comment">// 现在你必须全部实现这些属性了</span><br><span class="hljs-keyword">const</span> requiredUser: RequiredUser = &#123;<br>  name: <span class="hljs-string">'John Doe'</span>,<br>  age: <span class="hljs-number">30</span>,<br>  email: <span class="hljs-string">'john.doe@example.com'</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="Readonly-只读属性"><a href="#Readonly-只读属性" class="headerlink" title="Readonly:只读属性"></a>Readonly:只读属性</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> User = &#123;<br>  name: <span class="hljs-built_in">string</span><br>  age: <span class="hljs-built_in">number</span><br>  email: <span class="hljs-built_in">string</span><br>&#125;<br><br><span class="hljs-keyword">type</span> ReadonlyUser = Readonly&lt;User&gt;<br><br><span class="hljs-keyword">const</span> user: User = &#123;<br>  name: <span class="hljs-string">'John Doe'</span>,<br>  age: <span class="hljs-number">30</span>,<br>  email: <span class="hljs-string">'john.doe@example.com'</span><br>&#125;<br><br><span class="hljs-keyword">const</span> readonlyUser: ReadonlyUser = &#123;<br>  name: <span class="hljs-string">'John Doe'</span>,<br>  age: <span class="hljs-number">30</span>,<br>  email: <span class="hljs-string">'john.doe@example.com'</span><br>&#125;<br><br><span class="hljs-comment">// 修改 user 对象的属性</span><br>user.name = <span class="hljs-string">'Jane Doe'</span><br>user.age = <span class="hljs-number">25</span><br>user.email = <span class="hljs-string">'jane.doe@example.com'</span><br><br><span class="hljs-comment">// 修改 readonlyUser 对象的属性</span><br><span class="hljs-comment">// readonlyUser.name = 'Jane Doe';  // 报错</span><br><span class="hljs-comment">// readonlyUser.age = 25;  // 报错</span><br><span class="hljs-comment">// readonlyUser.email = 'jane.doe@example.com';  // 报错</span><br></code></pre></td></tr></table></figure>

<p>TypeScript 内置的工具类型中，并不包括与 Readonly 结对出现的版本，你可以认为，只读通常是一个不可逆的行为，如果能够随意将只读修饰移除，就可能破坏了只读带来的安全性。同时，不同于可选与必选，我们最开始获得的类型输入基本不会携带 readonly 修饰。</p>
<h2 id="Record：基于索引签名类型"><a href="#Record：基于索引签名类型" class="headerlink" title="Record：基于索引签名类型"></a>Record：基于索引签名类型</h2><p>索引签名类型，用于声明一个内部属性键与键值类型一致的对象类型，而 TypeScript 中基于索引签名类型提供了一个简化版本 Record，它能够用更简洁的语法实现同样的效果：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> UserProps = <span class="hljs-string">'name'</span> | <span class="hljs-string">'job'</span> | <span class="hljs-string">'email'</span><br><br><span class="hljs-comment">// 等价于你一个个实现这些属性了</span><br><span class="hljs-keyword">type</span> User = Record&lt;UserProps, <span class="hljs-built_in">string</span>&gt;<br><br><span class="hljs-keyword">const</span> user: User = &#123;<br>  name: <span class="hljs-string">'John Doe'</span>,<br>  job: <span class="hljs-string">'fe-developer'</span>,<br>  email: <span class="hljs-string">'john.doe@example.com'</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>可以使用 Record 类型来声明属性名还未确定的接口类型</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> User = Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;<br><br><span class="hljs-keyword">const</span> user: User = &#123;<br>  name: <span class="hljs-string">'John Doe'</span>,<br>  job: <span class="hljs-string">'fe-developer'</span>,<br>  email: <span class="hljs-string">'john.doe@example.com'</span>,<br>  bio: <span class="hljs-string">'Make more interesting things!'</span>,<br>  <span class="hljs-keyword">type</span>: <span class="hljs-string">'vip'</span><br>  <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="Pick-类型"><a href="#Pick-类型" class="headerlink" title="Pick 类型"></a>Pick 类型</h2><blockquote>
<p>Pick 类型接收一个对象类型，以及一个字面量类型组成的联合类型，这个联合类型只能是由对象类型的属性名组成的。它会对这个对象类型进行裁剪，只保留你传入的属性名组成的部分：</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> User = &#123;<br>  name: <span class="hljs-built_in">string</span><br>  age: <span class="hljs-built_in">number</span><br>  email: <span class="hljs-built_in">string</span><br>  phone: <span class="hljs-built_in">string</span><br>&#125;<br><br><span class="hljs-comment">// 只提取其中的 name 与 age 信息</span><br><span class="hljs-keyword">type</span> UserBasicInfo = Pick&lt;User, <span class="hljs-string">'name'</span> | <span class="hljs-string">'age'</span>&gt;<br><br><span class="hljs-keyword">const</span> user: User = &#123;<br>  name: <span class="hljs-string">'John Doe'</span>,<br>  age: <span class="hljs-number">30</span>,<br>  email: <span class="hljs-string">'john.doe@example.com'</span>,<br>  phone: <span class="hljs-string">'1234567890'</span><br>&#125;<br><br><span class="hljs-keyword">const</span> userBasicInfo: UserBasicInfo = &#123;<br>  name: <span class="hljs-string">'John Doe'</span>,<br>  age: <span class="hljs-number">30</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="Omit-类型"><a href="#Omit-类型" class="headerlink" title="Omit 类型"></a>Omit 类型</h2><blockquote>
<p>它的入参和 Pick 类型一致，但效果却是相反的——它会移除传入的属性名的部分，只保留剩下的部分作为新的对象类型.</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> User = &#123;<br>  name: <span class="hljs-built_in">string</span><br>  age: <span class="hljs-built_in">number</span><br>  email: <span class="hljs-built_in">string</span><br>  phone: <span class="hljs-built_in">string</span><br>&#125;<br><br><span class="hljs-comment">// 只移除 phone 属性</span><br><span class="hljs-keyword">type</span> UserWithoutPhone = Omit&lt;User, <span class="hljs-string">'phone'</span>&gt;<br><br><span class="hljs-keyword">const</span> user: User = &#123;<br>  name: <span class="hljs-string">'John Doe'</span>,<br>  age: <span class="hljs-number">30</span>,<br>  email: <span class="hljs-string">'john.doe@example.com'</span>,<br>  phone: <span class="hljs-string">'1234567890'</span><br>&#125;<br><br><span class="hljs-keyword">const</span> userWithoutPhone: UserWithoutPhone = &#123;<br>  name: <span class="hljs-string">'John Doe'</span>,<br>  age: <span class="hljs-number">30</span>,<br>  email: <span class="hljs-string">'john.doe@example.com'</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>Pick 与 Omit 类型是类型编程中相当重要的一个部分，举例来说，我们可以先声明一个代表全局所有状态的大型接口类型：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> User = &#123;<br>  name: <span class="hljs-built_in">string</span><br>  age: <span class="hljs-built_in">number</span><br>  email: <span class="hljs-built_in">string</span><br>  phone: <span class="hljs-built_in">string</span><br>  address: <span class="hljs-built_in">string</span><br>  gender: <span class="hljs-built_in">string</span><br>  occupation: <span class="hljs-built_in">string</span><br>  education: <span class="hljs-built_in">string</span><br>  hobby: <span class="hljs-built_in">string</span><br>  bio: <span class="hljs-built_in">string</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>然后在我们的子组件中，可能只用到了其中一部分的类型，此时就可以使用 Pick 类型将我们需要的部分择出来：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> UserBasicInfo = Pick&lt;User, <span class="hljs-string">'name'</span> | <span class="hljs-string">'age'</span> | <span class="hljs-string">'email'</span>&gt;<br><br><span class="hljs-keyword">const</span> userBasicInfo: UserBasicInfo = &#123;<br>  name: <span class="hljs-string">'John Doe'</span>,<br>  age: <span class="hljs-number">30</span>,<br>  email: <span class="hljs-string">'john.doe@example.com'</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>反之，如果我们用到了大部分类型，只有数个类型需要移除，就可以使用 Omit 类型来减少一些代码量：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> UserDetailedInfo = Omit&lt;User, <span class="hljs-string">'name'</span> | <span class="hljs-string">'age'</span> | <span class="hljs-string">'email'</span>&gt;<br><br><span class="hljs-keyword">const</span> userDetailedInfo: UserDetailedInfo = &#123;<br>  phone: <span class="hljs-string">'1234567890'</span>,<br>  address: <span class="hljs-string">'123 Main St'</span>,<br>  gender: <span class="hljs-string">'male'</span>,<br>  occupation: <span class="hljs-string">'developer'</span>,<br>  education: <span class="hljs-string">'Bachelor'</span>,<br>  hobby: <span class="hljs-string">'reading'</span>,<br>  bio: <span class="hljs-string">'A passionate developer'</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="集合类型：Exclude、Extract"><a href="#集合类型：Exclude、Extract" class="headerlink" title="集合类型：Exclude、Extract"></a>集合类型：Exclude、Extract</h2><blockquote>
<p>Exclude 类型,它能够从一个类型中移除另一个类型中也存在的部分，即：差集，Extract 类型用于提取另一个类型中也存在的部分，即交集。</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> UserProps = <span class="hljs-string">'name'</span> | <span class="hljs-string">'age'</span> | <span class="hljs-string">'email'</span> | <span class="hljs-string">'phone'</span> | <span class="hljs-string">'address'</span><br><span class="hljs-keyword">type</span> RequiredUserProps = <span class="hljs-string">'name'</span> | <span class="hljs-string">'email'</span><br><br><span class="hljs-comment">// OptionalUserProps = UserProps - RequiredUserProps</span><br><span class="hljs-keyword">type</span> OptionalUserProps = Exclude&lt;UserProps, RequiredUserProps&gt;<br><br><span class="hljs-keyword">const</span> optionalUserProps: OptionalUserProps = <span class="hljs-string">'age'</span> | <span class="hljs-string">'phone'</span> | <span class="hljs-string">'address'</span><br><br><span class="hljs-keyword">type</span> UserProps = <span class="hljs-string">'name'</span> | <span class="hljs-string">'age'</span> | <span class="hljs-string">'email'</span> | <span class="hljs-string">'phone'</span> | <span class="hljs-string">'address'</span><br><span class="hljs-keyword">type</span> RequiredUserProps = <span class="hljs-string">'name'</span> | <span class="hljs-string">'email'</span><br><br><span class="hljs-keyword">type</span> RequiredUserPropsOnly = Extract&lt;UserProps, RequiredUserProps&gt;<br><br><span class="hljs-keyword">const</span> requiredUserPropsOnly: RequiredUserPropsOnly = <span class="hljs-string">'name'</span> | <span class="hljs-string">'email'</span><br></code></pre></td></tr></table></figure>

<h2 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h2><p>对于函数类型，工具类型能起到什么作用？<br>函数类型&#x3D;参数类型+返回值类型，这个定律适用于所有的函数类型定义。而我们一般又不会去修改参数与返回值位置的类型，那就只剩下读取了。<br>内置工具类型中提供了 Parameters 和 ReturnType 这两个类型来提取函数的参数类型与返回值类型：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> Add = <span class="hljs-function">(<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span><br><br><span class="hljs-keyword">type</span> AddParams = Parameters&lt;Add&gt; <span class="hljs-comment">// [number, number] 类型</span><br><span class="hljs-keyword">type</span> AddResult = ReturnType&lt;Add&gt; <span class="hljs-comment">// number 类型</span><br><br><span class="hljs-keyword">const</span> addParams: AddParams = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]<br><span class="hljs-keyword">const</span> addResult: AddResult = <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure>

<p>如果我们只有一个函数，而并没有这个函数类型呢？此时可以使用 TypeScript 提供的类型查询操作符，即 typeof（和 JavaScript 的 typeof 区分一下），来获得一个函数的结构化类型，再配合工具类型即可即可：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> addHandler = <span class="hljs-function">(<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>) =&gt;</span> x + y<br><br><span class="hljs-keyword">type</span> Add = <span class="hljs-keyword">typeof</span> addHandler <span class="hljs-comment">// (x: number, y: number) =&gt; number;</span><br><br><span class="hljs-keyword">type</span> AddParams = Parameters&lt;Add&gt; <span class="hljs-comment">// [number, number] 类型</span><br><span class="hljs-keyword">type</span> AddResult = ReturnType&lt;Add&gt; <span class="hljs-comment">// number 类型</span><br><br><span class="hljs-keyword">const</span> addParams: AddParams = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]<br><span class="hljs-keyword">const</span> addResult: AddResult = <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure>

<p>对于异步函数类型，提取出的返回值类型是一个 Promise<string> 这样的类型，如果我想提取 Promise 内部的 string 类型呢？TypeScript 准备了 Awaited 类型用于解决这样的问题：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;<span class="hljs-function">(<span class="hljs-params">(<span class="hljs-params">resolve</span>) =&gt; &#123;</span></span><br><span class="hljs-function"><span class="hljs-params">  setTimeout(<span class="hljs-params">(<span class="hljs-params"></span>) =&gt; &#123;</span></span></span><br><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">    resolve(<span class="hljs-params">'Hello, World!'</span>)</span></span></span><br><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">  &#125;, 1000</span>)</span></span><br><span class="hljs-function"><span class="hljs-params">&#125;</span>)</span><br><span class="hljs-function"></span><br><span class="hljs-function"><span class="hljs-params">type</span> <span class="hljs-params">PromiseInput</span> = <span class="hljs-params">Promise</span>&lt;<span class="hljs-params">string</span>&gt;</span><br><span class="hljs-function"><span class="hljs-params">type</span> <span class="hljs-params">AwaitedPromiseInput</span> = <span class="hljs-params">Awaited</span>&lt;<span class="hljs-params">PromiseInput</span>&gt; // <span class="hljs-params">string</span></span><br></code></pre></td></tr></table></figure>

<p>可以直接嵌套在 ReturnType 内部使用：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// 定义一个函数，该函数返回一个 Promise 对象</span><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPromise</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;<span class="hljs-function">(<span class="hljs-params">(<span class="hljs-params">resolve</span>) =&gt; &#123;</span></span><br><span class="hljs-function"><span class="hljs-params">    setTimeout(<span class="hljs-params">(<span class="hljs-params"></span>) =&gt; &#123;</span></span></span><br><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">      resolve(<span class="hljs-params">'Hello, World!'</span>)</span></span></span><br><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">    &#125;, 1000</span>)</span></span><br><span class="hljs-function"><span class="hljs-params">  &#125;</span>)</span><br><span class="hljs-function">&#125;</span><br><span class="hljs-function"></span><br><span class="hljs-function"><span class="hljs-params">type</span> <span class="hljs-params">Result</span> = <span class="hljs-params">Awaited</span>&lt;<span class="hljs-params">ReturnType</span>&lt;<span class="hljs-params">typeof</span> <span class="hljs-params">getPromise</span>&gt;&gt; // <span class="hljs-params">string</span> 类型</span><br></code></pre></td></tr></table></figure>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><em></em><a class="button is-default" href="/2023/04/02/131-ts/" title="131、泛型"><span class="has-text-weight-semibold">下一页: 131、泛型</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/Jude"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><a title="zhihu" target="_blank" rel="noopener nofollow" href="//zhihu.com/https://www.zhihu.com/hot"><i class="iconfont icon-zhihu"></i></a><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> Jude 2024</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" href="//github.com/haojen" target="_blank" rel="noopener">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" href="https://github.com/haojen/hexo-theme-Claudia" target="_blank" rel="noopener" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span>记住昨日的美好，过好今日的生活，憧憬明天的到来</span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>