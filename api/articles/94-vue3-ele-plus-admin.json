{"title":"94、使用vue3+element-plus写后台管理系统：（四）","uid":"1813ccd46442cde5aca0aaf935690ed9","slug":"94-vue3-ele-plus-admin","date":"2022-11-19T12:00:00.000Z","updated":"2022-11-26T08:33:52.000Z","comments":true,"path":"api/articles/94-vue3-ele-plus-admin.json","keywords":null,"cover":null,"content":"<p>包括后台项目 layout 基础架构、用户主动和被动退出、动态 menu 菜单、结构路由表、侧边菜单栏的收缩、组件状态驱动的动态 CSS 值</p>\n<span id=\"more\"></span>\n\n<p>layout 基础架构布局</p>\n<p>layout 基本布局结构包括：Menu 菜单栏、NavBar 顶部导航栏（包含个人信息）、Main（页面主要展示区域）</p>\n<h4 id=\"1、登录成功进入首页之后，整个首页也就是上面说的分为三个部分\"><a href=\"#1、登录成功进入首页之后，整个首页也就是上面说的分为三个部分\" class=\"headerlink\" title=\"1、登录成功进入首页之后，整个首页也就是上面说的分为三个部分\"></a>1、登录成功进入首页之后，整个首页也就是上面说的分为三个部分</h4><p>创建三个对应的组件</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>layout&#x2F;components&#x2F;Sidebar&#x2F;index.vue<br>layout&#x2F;components&#x2F;Navbar.vue<br>layout&#x2F;components&#x2F;AppMain.vue</p></blockquote>\n<h4 id=\"2、在layout-index引入创建的三个组件\"><a href=\"#2、在layout-index引入创建的三个组件\" class=\"headerlink\" title=\"2、在layout/index引入创建的三个组件\"></a>2、在<code>layout/index</code>引入创建的三个组件</h4><div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">import Navbar from &quot;./components/Navbar.vue&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">import Sidebar from &quot;./components/Sidebar/index.vue&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">import AppMain from &quot;./components/AppMain&quot;;</span></span></code></pre></div><h4 id=\"3、layout-index对应的布局\"><a href=\"#3、layout-index对应的布局\" class=\"headerlink\" title=\"3、layout/index对应的布局\"></a>3、<code>layout/index</code>对应的布局</h4><div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;div class=&quot;app-wrapper&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;!-- 左侧 menu --&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;sidebar class=&quot;sidebar-container&quot; /&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;div class=&quot;main-container&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;div class=&quot;fixed-header&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &lt;!-- 顶部的 navbar --&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &lt;navbar /&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;/div&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;!-- 内容区 --&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;app-main /&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;/div&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;/div&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/template&gt;</span></span></code></pre></div><h4 id=\"4、在-styles-文件夹下定义-3-个-scss-文件\"><a href=\"#4、在-styles-文件夹下定义-3-个-scss-文件\" class=\"headerlink\" title=\"4、在 styles 文件夹下定义 3 个 scss 文件\"></a>4、在 styles 文件夹下定义 3 个 scss 文件</h4><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>variables.scss 定义常量<br>mixin.scss 定义通用的 css<br>sidebar.scss 处理 menu 菜单的样式</p></blockquote>\n<div class=\"language-css\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">css</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// variables.scss</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// sidebar的样式  定义如下常量将其导出</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">$menuText: #bfcbd9;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">$menuActiveText: #ffffff;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">$subMenuActiveText: #f4f4f5;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">$menuBg: #304156;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">$menuHover: #263445;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">$subMenuBg: #1f2d3d;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">$subMenuHover: #001528;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">$sideBarWidth: 210px;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// JS 与 scss 共享变量，在 scss 中通过 :export 进行导出，在 js 中可通过 ESM 进行导入</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">:export &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  menuText: $menuText;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  menuActiveText: $menuActiveText;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  subMenuActiveText: $subMenuActiveText;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  menuBg: $menuBg;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  menuHover: $menuHover;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  subMenuBg: $subMenuBg;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  subMenuHover: $subMenuHover;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  sideBarWidth: $sideBarWidth;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><code>注意</code>:这里是使用 :export{ } 方法将 css 常量导出</p></blockquote>\n<p><code>mixin.scss</code></p>\n<div class=\"language-css\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">css</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// mixin.scss</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">@mixin clearfix &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &amp;:after &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    content: &quot;&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    display: table;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    clear: both;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">@mixin scrollBar &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &amp;::-webkit-scrollbar-track-piece &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    background: #d3dce6;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &amp;::-webkit-scrollbar &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    width: 6px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &amp;::-webkit-scrollbar-thumb &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    background: #99a9bf;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    border-radius: 20px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">@mixin relative &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  position: relative;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  width: 100%;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  height: 100%;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div><p><code>sidebar.scss</code></p>\n<details>\n<summary>点我展示代码</summary>\n\n<div class=\"language-css\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">css</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// sidebar.scss</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">#app &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  .main-container &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    min-height: 100%;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    transition: margin-left 0.28s;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    margin-left: $sideBarWidth;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    position: relative;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  .sidebar-container &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    transition: width 0.28s;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    width: $sideBarWidth !important;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    height: 100%;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    position: fixed;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    top: 0;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    bottom: 0;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    left: 0;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    z-index: 1001;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    overflow: hidden;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    // 重置 element-plus 的css</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .horizontal-collapse-transition &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      transition: 0s width ease-in-out, 0s padding-left ease-in-out,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        0s padding-right ease-in-out;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .scrollbar-wrapper &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      overflow-x: hidden !important;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .el-scrollbar__bar.is-vertical &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      right: 0px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .el-scrollbar &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      height: 100%;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &amp;.has-logo &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      .el-scrollbar &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        height: calc(100% - 50px);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .is-horizontal &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      display: none;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      display: inline-block;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      width: 100%;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      overflow: hidden;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .svg-icon &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      margin-right: 16px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .sub-el-icon &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      margin-right: 12px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      margin-left: -2px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .el-menu &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      border: none;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      height: 100%;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      width: 100% !important;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .is-active &gt; .el-submenu__title &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      color: $subMenuActiveText !important;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &amp; .nest-menu .el-submenu &gt; .el-submenu__title,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &amp; .el-submenu .el-menu-item &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      min-width: $sideBarWidth !important;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  .hideSidebar &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .sidebar-container &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      width: 54px !important;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .main-container &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      margin-left: 54px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .submenu-title-noDropdown &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      padding: 0 !important;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      position: relative;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      .el-tooltip &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        padding: 0 !important;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        .svg-icon &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          margin-left: 20px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        .sub-el-icon &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          margin-left: 19px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .el-submenu &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      overflow: hidden;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &amp; &gt; .el-submenu__title &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        padding: 0 !important;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        .svg-icon &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          margin-left: 20px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        .sub-el-icon &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          margin-left: 19px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        .el-submenu__icon-arrow &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          display: none;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .el-menu--collapse &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      .el-submenu &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &amp; &gt; .el-submenu__title &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          &amp; &gt; span &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            height: 0;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            width: 0;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            overflow: hidden;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            visibility: hidden;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            display: inline-block;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  .el-menu--collapse .el-menu .el-submenu &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    min-width: $sideBarWidth !important;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  .withoutAnimation &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .main-container,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .sidebar-container &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      transition: none;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">.el-menu--vertical &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &amp; &gt; .el-menu &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .svg-icon &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      margin-right: 16px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .sub-el-icon &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      margin-right: 12px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      margin-left: -2px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 菜单项过长时</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &gt; .el-menu--popup &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    max-height: 100vh;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    overflow-y: auto;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &amp;::-webkit-scrollbar-track-piece &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      background: #d3dce6;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &amp;::-webkit-scrollbar &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      width: 6px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &amp;::-webkit-scrollbar-thumb &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      background: #99a9bf;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      border-radius: 20px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div></details>\n\n<h4 id=\"5、创建的三个-scss-文件导入到-styles-index-scss\"><a href=\"#5、创建的三个-scss-文件导入到-styles-index-scss\" class=\"headerlink\" title=\"5、创建的三个 scss 文件导入到 styles&#x2F;index.scss\"></a>5、创建的三个 scss 文件导入到 styles&#x2F;index.scss</h4><div class=\"language-css\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">css</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// index.scss</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">@import &quot;./variables.scss&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">@import &quot;./mixin.scss&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">@import &quot;./sidebar.scss&quot;;</span></span></code></pre></div><p><code>layout/index.vue</code>写入样式</p>\n<div class=\"language-css\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">css</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;style lang=&quot;scss&quot; scoped&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">@import &#39;@/styles/mixin.scss&#39;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">@import &#39;@/styles/variables.scss&#39;;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">.app-wrapper &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  @include clearfix;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  position: relative;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  height: 100%;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  width: 100%;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">.fixed-header &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  position: fixed;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  top: 0;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  right: 0;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  z-index: 9;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  width: calc(100% - #&#123;$sideBarWidth&#125;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/style&gt;</span></span></code></pre></div><h4 id=\"6、侧边栏要实现主题更换功能，sidebar-赋值动态背景颜色\"><a href=\"#6、侧边栏要实现主题更换功能，sidebar-赋值动态背景颜色\" class=\"headerlink\" title=\"6、侧边栏要实现主题更换功能，sidebar 赋值动态背景颜色\"></a>6、<code>侧边栏</code>要实现<code>主题更换</code>功能，sidebar 赋值动态背景颜色</h4><div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;!-- 左侧 menu --&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;sidebar</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    class=&quot;sidebar-container&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    :style=&quot;&#123; backgroundColor: variables.menuBg &#125;&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  /&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/template&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;script setup&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  import variables from &quot;@/styles/variables.scss&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/script&gt;</span></span></code></pre></div><h4 id=\"7、Navbar、Sidebar、AppMain-组件初始化代码占位及样式修改\"><a href=\"#7、Navbar、Sidebar、AppMain-组件初始化代码占位及样式修改\" class=\"headerlink\" title=\"7、Navbar、Sidebar、AppMain 组件初始化代码占位及样式修改\"></a>7、Navbar、Sidebar、AppMain 组件初始化代码占位及样式修改</h4><p>需要处理 AppMain 组件和 Navbar 组件重叠问题</p>\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;div class=&quot;app-main&quot;&gt;AppMain&lt;/div&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;style lang=&quot;scss&quot; scoped&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  .app-main &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    min-height: calc(100vh - 50px);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    width: 100%;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    position: relative;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    overflow: hidden;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    padding: 61px 20px 20px 20px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    box-sizing: border-box;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/style&gt;</span></span></code></pre></div><h4 id=\"8、用户个人信息\"><a href=\"#8、用户个人信息\" class=\"headerlink\" title=\"8、用户个人信息\"></a>8、用户个人信息</h4><p>这里需要处理一下用户个人信息展示</p>\n<p><code>api/sys.js</code>文件定义方法、axios 请求拦截器对 token 进行 header 注入</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">/**</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> * 获取用户信息</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">export const getUserInfo = () =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  return request(&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    url: &quot;/sys/profile&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// utils/request.js</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">import store from &quot;@/store&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// 请求拦截器</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">service.interceptors.request.use(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  (config) =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    // 在这个位置需要统一的去注入token</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    if (store.getters.token) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      // 如果token存在 注入token</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      config.headers.Authorization = `Bearer $&#123;store.getters.token&#125;`;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    return config; // 必须返回配置</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  (error) =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    return Promise.reject(error);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">);</span></span></code></pre></div><p>定义调用接口的动作<code>store/modules/user.js</code></p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">import &#123; login, getUserInfo &#125; from &#39;@/api/sys&#39;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">export default &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  namespaced: true,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  state: () =&gt; (&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    userInfo: &#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;),</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  mutations: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    setUserInfo(state, userInfo) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      state.userInfo = userInfo</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  actions: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    async getUserInfo(context) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      const res = await getUserInfo()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      this.commit(&#39;user/setUserInfo&#39;, res)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      return res</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div><p>在权限拦截时触发的动作<code>permission.js</code></p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    if (to.path === &#39;/login&#39;) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125; else &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      // 判断用户资料是否获取</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      // 若不存在用户信息，则需要获取用户信息</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      if (!store.getters.hasUserInfo) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        // 触发获取用户信息的 action</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        await store.dispatch(&#39;user/getUserInfo&#39;)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      next()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span></code></pre></div><p>写入判断用户信息<code>store/getters.js</code></p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">const getters = &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  userInfo: state =&gt; state.user.userInfo,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  /**</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">   * @returns true 表示已存在用户信息</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">   */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  hasUserInfo: state =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    return JSON.stringify(state.user.userInfo) !== &#39;&#123;&#125;&#39;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div><h4 id=\"9、element-plus-的-dropdown-avatar-组件实现用户头像信息及用户主动退出功能\"><a href=\"#9、element-plus-的-dropdown-avatar-组件实现用户头像信息及用户主动退出功能\" class=\"headerlink\" title=\"9、element-plus 的 dropdown avatar 组件实现用户头像信息及用户主动退出功能\"></a>9、element-plus 的 dropdown avatar 组件实现用户头像信息及用户主动退出功能</h4><p><code>用户头像功能及下拉菜单栏</code></p>\n<details>\n<summary>点我展示代码</summary>\n\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// layout/components/navbar.vue</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;div class=&quot;navbar&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;div class=&quot;right-menu&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;!-- 头像 --&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;el-dropdown class=&quot;avatar-container&quot; trigger=&quot;click&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &lt;div class=&quot;avatar-wrapper&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          &lt;el-avatar</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            shape=&quot;square&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            :size=&quot;40&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            :src=&quot;$store.getters.userInfo.avatar&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          &gt;&lt;/el-avatar&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &lt;/div&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &lt;template #dropdown&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          &lt;el-dropdown-menu class=&quot;user-dropdown&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            &lt;router-link to=&quot;/&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">              &lt;el-dropdown-item&gt; 首页 &lt;/el-dropdown-item&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            &lt;/router-link&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            &lt;el-dropdown-item divided&gt; 退出登录 &lt;/el-dropdown-item&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          &lt;/el-dropdown-menu&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &lt;/template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;/el-dropdown&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;/div&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;/div&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/template&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;script setup&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  import &#123;&#125; from &quot;vue&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/script&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;style lang=&quot;scss&quot; scoped&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  .navbar &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    height: 50px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    overflow: hidden;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    position: relative;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    background: #fff;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    box-shadow: 0 1px 4px rgba(0, 21, 41, 0.08);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .right-menu &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      display: flex;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      align-items: center;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      float: right;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      padding-right: 16px;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      ::v-deep .avatar-container &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        cursor: pointer;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        .avatar-wrapper &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          margin-top: 5px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          position: relative;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          n .el-avatar &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            --el-avatar-background-color: none;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            margin-right: 12px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/style&gt;</span></span></code></pre></div></details>\n\n<h4 id=\"10、主动退出功能-在-store-moduels-user-js-中，清除当前用户缓存数据、清除用户权限相关配置、返回到登录页\"><a href=\"#10、主动退出功能-在-store-moduels-user-js-中，清除当前用户缓存数据、清除用户权限相关配置、返回到登录页\" class=\"headerlink\" title=\"10、主动退出功能:在 store&#x2F;moduels&#x2F;user.js 中，清除当前用户缓存数据、清除用户权限相关配置、返回到登录页\"></a>10、<code>主动退出功能</code>:在 store&#x2F;moduels&#x2F;user.js 中，清除当前用户缓存数据、清除用户权限相关配置、返回到登录页</h4><div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">import router from &#39;@/router&#39;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">logout() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    this.commit(&#39;user/setToken&#39;, &#39;&#39;)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    this.commit(&#39;user/setUserInfo&#39;, &#123;&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    removeAllItem()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    router.push(&#39;/login&#39;)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div><p>退出按钮点击事件，触发 logout 的 action</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">import &#123; useStore &#125; from &quot;vuex&quot;;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">const store = useStore();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">const logout = () =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  store.dispatch(&quot;user/logout&quot;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;;</span></span></code></pre></div><h4 id=\"11、被动退出功能：token-过期、单一账户同时登录\"><a href=\"#11、被动退出功能：token-过期、单一账户同时登录\" class=\"headerlink\" title=\"11、被动退出功能：token 过期、单一账户同时登录\"></a>11、<code>被动退出功能</code>：token 过期、单一账户同时登录</h4><p>token 表示一个用户的身份令牌，对服务端而言，只认令牌不认人，所以说一旦其他人获取了你的 token，那么可以伪装成你，来获取对应的敏感数据。</p>\n<p>为了保证用户的信息安全，那么对于 token 而言就被制定了很多安全策略。<br>token 的安全策略：动态 token、刷新 token、失效 token</p>\n<p>选择时效 token：服务端处理 token 时效的同时，在前端主动介入 token 时效的处理中，从而保证用户信息的安全性。</p>\n<p>实现方案：</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>1、在用户登录时，记录当前登录时间<br>2、制定失效时长<br>3、接口调用时，根据当前时间对比登录时间，看是否超过了时效时长。如果未超过，则正常进行后续操作；如果超过，则进行退出登录操作</p></blockquote>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// utils/auth.js</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">import &#123; TIME_STAMP, TOKEN_TIMEOUT_VALUE &#125; from &quot;@/constant&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">import &#123; setItem, getItem &#125; from &quot;@/utils/storage&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">/**</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> * 获取时间戳</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">export function getTimeStamp() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  return getItem(TIME_STAMP);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">/**</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> * 设置时间戳</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">export function setTimeStamp() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  setItem(TIME_STAMP, Date.now());</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">/**</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> * 是否超时</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">export function isCheckTimeout() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 当前时间戳</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  var currentTime = Date.now();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 缓存时间戳</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  var timeStamp = getTimeStamp();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  return currentTime - timeStamp &gt; TOKEN_TIMEOUT_VALUE;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// token时间戳</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">export const TIME_STAMP = &quot;timeStamp&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// 超时时长(毫秒) 两小时</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">export const TOKEN_TIMEOUT_VALUE = 2 * 3600 * 1000;</span></span></code></pre></div><p>用户登录成功之后设置时间，到 store&#x2F;user.js 的 login 中：</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">import &#123; setTimeStamp &#125; from &#39;@/utils/auth&#39;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">login(context, userInfo) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      return new Promise((resolve, reject) =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          .then(data =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            // 保存登录时间</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            setTimeStamp()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            resolve()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          &#125;)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;,</span></span></code></pre></div><p>在<code>utils/request</code>对应的请求拦截器中进行主动介入</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">import &#123; isCheckTimeout &#125; from &#39;@/utils/auth&#39;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">if (store.getters.token) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      if (isCheckTimeout()) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        // 登出操作</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        store.dispatch(&#39;user/logout&#39;)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        return Promise.reject(new Error(&#39;token 失效&#39;))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// 响应拦截器</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">service.interceptors.response.use(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  response =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  error =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    // 处理 token 超时问题</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    if (</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      error.response &amp;&amp;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      error.response.data &amp;&amp;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      error.response.data.code === 401</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      // token超时</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      store.dispatch(&#39;user/logout&#39;)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ElMessage.error(error.message) // 提示错误信息</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    return Promise.reject(error)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">)</span></span></code></pre></div><h4 id=\"12、临时menu菜单\"><a href=\"#12、临时menu菜单\" class=\"headerlink\" title=\"12、临时menu菜单\"></a>12、<code>临时menu菜单</code></h4><p>layout&#x2F;Sidebar&#x2F;SidebarMenu.vue</p>\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;!-- 一级 menu 菜单 --&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;el-menu</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    :uniqueOpened=&quot;true&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    default-active=&quot;2&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    background-color=&quot;#545c64&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    text-color=&quot;#fff&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    active-text-color=&quot;#ffd04b&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;!-- 子集 menu 菜单 --&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;el-submenu index=&quot;1&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;template #title&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &lt;i class=&quot;el-icon-location&quot;&gt;&lt;/i&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &lt;span&gt;导航一&lt;/span&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;/template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;el-menu-item index=&quot;1-1&quot;&gt;选项1&lt;/el-menu-item&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;el-menu-item index=&quot;1-2&quot;&gt;选项2&lt;/el-menu-item&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;/el-submenu&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;!-- 具体菜单项 --&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;el-menu-item index=&quot;4&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;i class=&quot;el-icon-setting&quot;&gt;&lt;/i&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;template #title&gt;导航四&lt;/template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;/el-menu-item&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;/el-menu&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/template&gt;</span></span></code></pre></div><p>layout&#x2F;Sidebar&#x2F;index 导入该组件</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;div class=&quot;&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;h1&gt;Admin&lt;/h1&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;el-scrollbar&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;sidebar-menu&gt;&lt;/sidebar-menu&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;/el-scrollbar&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;/div&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/template&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;script setup&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">import SidebarMenu from &#39;./SidebarMenu&#39;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">import &#123;&#125; from &#39;vue&#39;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/script&gt;</span></span></code></pre></div><p>生成一个临时的 menu 菜单，从这个临时的 menu 菜单可以看出，el-menu 分为三部分：</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><code>el-menu</code>：整个 menu 菜单<br><code>el-sub-menu</code>:子集 menu 菜单<br><code>el-menu-item</code>:具体菜单项</p></blockquote>\n<h4 id=\"13、动态-menu-菜单处理\"><a href=\"#13、动态-menu-菜单处理\" class=\"headerlink\" title=\"13、动态 menu 菜单处理\"></a>13、动态 menu 菜单处理</h4><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>动态 menu 菜单主要和动态路由表配合来实现用户权限的（后续需要完成用户权限）。动态 menu 菜单指的是：根据路由表的配置，自动生成对应的 menu 菜单，当路由表发生变化时，menu 菜单自动发生变化。</p></blockquote>\n<p>实现步骤：</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>1、定义路由表对应的 menu 菜单规则（核心步骤）<br>2、根据规则制定路由表<br>3、根据规则，一路路由表生成 menu 菜单</p></blockquote>\n<p>上面步骤 1 的菜单规则制定：</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>1、如果<code>meta &amp;&amp; meta.title &amp;&amp; meta.icon</code> ：则显示在 <code>menu</code> 菜单中，其中 <code>title</code> 为显示的内容，<code>icon</code> 为显示的图标。如果存在 children：则展示子菜单 el-sub-menu；否则展示 el-menu-item。<br>2、不显示在 menu 中</p></blockquote>\n<h4 id=\"14、创建页面组件\"><a href=\"#14、创建页面组件\" class=\"headerlink\" title=\"14、创建页面组件\"></a>14、<code>创建页面组件</code></h4><p>views 文件夹下创建页面：<br>（1）、创建文章:article-create<br>（2）、文章详情:article-detail<br>（3）、文章列表:article-ranking<br>（4）、401 和 404 页面:error-page&#x2F;401.vue 404.vue<br>（5）、导入:import<br>（6）、权限列表:permission-list<br>（7）、个人中心:profile<br>（8）、角色列表:role-list<br>（9）、用户信息:user-info<br>（10）、用户管理:user-manage</p>\n<h4 id=\"15、用户权限处理\"><a href=\"#15、用户权限处理\" class=\"headerlink\" title=\"15、用户权限处理\"></a>15、用户权限处理</h4><p>需要先对路由表进行划分：私有路由表 privateRoutes(权限路由)、公有路由表 publicRoutes(非权限路由)</p>\n<p><code>router/index.js</code></p>\n<details>\n<summary>显示详细代码</summary>\n\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// 私有路由表</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">const privateRoutes = [</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    path: &quot;/user&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    component: layout,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    redirect: &quot;/user/manage&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    meta: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      title: &quot;user&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      icon: &quot;personnel&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    children: [</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        path: &quot;/user/manage&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        component: () =&gt; import(&quot;@/views/user-manage/index&quot;),</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        meta: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          title: &quot;userManage&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          icon: &quot;personnel-manage&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        path: &quot;/user/role&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        component: () =&gt; import(&quot;@/views/role-list/index&quot;),</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        meta: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          title: &quot;roleList&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          icon: &quot;role&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        path: &quot;/user/permission&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        component: () =&gt; import(&quot;@/views/permission-list/index&quot;),</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        meta: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          title: &quot;permissionList&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          icon: &quot;permission&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        path: &quot;/user/info/:id&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        name: &quot;userInfo&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        component: () =&gt; import(&quot;@/views/user-info/index&quot;),</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        meta: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          title: &quot;userInfo&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        path: &quot;/user/import&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        name: &quot;import&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        component: () =&gt; import(&quot;@/views/import/index&quot;),</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        meta: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          title: &quot;excelImport&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ],</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    path: &quot;/article&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    component: layout,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    redirect: &quot;/article/ranking&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    meta: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      title: &quot;article&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      icon: &quot;article&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    children: [</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        path: &quot;/article/ranking&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        component: () =&gt; import(&quot;@/views/article-ranking/index&quot;),</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        meta: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          title: &quot;articleRanking&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          icon: &quot;article-ranking&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        path: &quot;/article/:id&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        component: () =&gt; import(&quot;@/views/article-detail/index&quot;),</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        meta: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          title: &quot;articleDetail&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        path: &quot;/article/create&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        component: () =&gt; import(&quot;@/views/article-create/index&quot;),</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        meta: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          title: &quot;articleCreate&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          icon: &quot;article-create&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        path: &quot;/article/editor/:id&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        component: () =&gt; import(&quot;@/views/article-create/index&quot;),</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        meta: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          title: &quot;articleEditor&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ],</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">];</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// 公开路由表</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">const publicRoutes = [</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    path: &quot;/login&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    component: () =&gt; import(&quot;@/views/login/index&quot;),</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    path: &quot;/&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    // 注意：带有路径“/”的记录中的组件“默认”是一个不返回 Promise 的函数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    component: layout,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    redirect: &quot;/profile&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    children: [</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        path: &quot;/profile&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        name: &quot;profile&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        component: () =&gt; import(&quot;@/views/profile/index&quot;),</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        meta: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          title: &quot;profile&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">          icon: &quot;el-icon-user&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        path: &quot;/404&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        name: &quot;404&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        component: () =&gt; import(&quot;@/views/error-page/404&quot;),</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        path: &quot;/401&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        name: &quot;401&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        component: () =&gt; import(&quot;@/views/error-page/401&quot;),</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ],</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">const router = createRouter(&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  history: createWebHashHistory(),</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  routes: [...publicRoutes, ...privateRoutes],</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;);</span></span></code></pre></div></details>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>注意：要在 <code>layout/AppMain.vue 中设置路由出口</code></p></blockquote>\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;div class=&quot;app-main&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;router-view&gt;&lt;/router-view&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;/div&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/template&gt;</span></span></code></pre></div><h4 id=\"16、解析路由表，获取结构化数据\"><a href=\"#16、解析路由表，获取结构化数据\" class=\"headerlink\" title=\"16、解析路由表，获取结构化数据\"></a>16、解析路由表，获取结构化数据</h4><p>数据结构为</p>\n<details>\n<summary>显示详细代码</summary>\n\n<div class=\"language-json\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">json</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">[</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &quot;title&quot;: &quot;个人中心&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &quot;path&quot;: &quot;&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &quot;title&quot;: &quot;用户&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &quot;children&quot;: [</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;title&quot;: &quot;员工管理&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;path&quot;: &quot;&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;title&quot;: &quot;角色列表&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;path&quot;: &quot;&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;title&quot;: &quot;权限列表&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;path&quot;: &quot;&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &quot;title&quot;: &quot;文章&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &quot;children&quot;: [</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;title&quot;: &quot;文章排名&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;path&quot;: &quot;&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;title&quot;: &quot;创建文章&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;path&quot;: &quot;&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">]</span></span></code></pre></div></details>\n\n<p>获取路由表数据的 2 中方式：</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>1、router.options.routes:初始路由列表<br>2、router.getRoutes()：获取所有路由记录的完整列表（选择此种方法）</p></blockquote>\n<p>在 layout&#x2F;components&#x2F;Sidebar&#x2F;SidebarMenu 中</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;script setup&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  import &#123;useRouter&#125; from &#39;vue-router&#39; const router = useRouter()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  console.log(router.getRoutes()) // 这里返回的是一个完整的路由表</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/script&gt;</span></span></code></pre></div><p>打印的结果是一个完整的路由表，里面存在一些问题：</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>存在重复的路由数据<br>不满足该条件 meta &amp;&amp; meta.title &amp;&amp; meta.icon 的数据不应该存在</p></blockquote>\n<h4 id=\"17、处理数据结构问题\"><a href=\"#17、处理数据结构问题\" class=\"headerlink\" title=\"17、处理数据结构问题\"></a>17、处理数据结构问题</h4><p>创建<code>utils/route.js</code>，里面 2 个函数方法：filterRouters()&#x2F;generateMenus()很重要</p>\n<details>\n<summary>显示完整代码</summary>\n\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">import path from &quot;path&quot;;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">/**</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> * 返回所有子路由</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">const getChildrenRoutes = (routes) =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const result = [];</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  routes.forEach((route) =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    if (route.children &amp;&amp; route.children.length &gt; 0) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      result.push(...route.children);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  return result;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">/**</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> * 处理脱离层级的路由：某个一级路由为其他子路由，则剔除该一级路由，保留路由层级</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> * @param &#123;*&#125; routes router.getRoutes()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">export const filterRouters = (routes) =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const childrenRoutes = getChildrenRoutes(routes);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  return routes.filter((route) =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    return !childrenRoutes.find((childrenRoute) =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      return childrenRoute.path === route.path;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">/**</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> * 判断数据是否为空值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">function isNull(data) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  if (!data) return true;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  if (JSON.stringify(data) === &quot;&#123;&#125;&quot;) return true;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  if (JSON.stringify(data) === &quot;[]&quot;) return true;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  return false;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">/**</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> * 根据 routes 数据，返回对应 menu 规则数组</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">export function generateMenus(routes, basePath = &quot;&quot;) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const result = [];</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 遍历路由表</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  routes.forEach((item) =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    // 不存在 children &amp;&amp; 不存在 meta 直接 return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    if (isNull(item.meta) &amp;&amp; isNull(item.children)) return;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    // 存在 children 不存在 meta，进入迭代</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    if (isNull(item.meta) &amp;&amp; !isNull(item.children)) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      result.push(...generateMenus(item.children));</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      return;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    // 合并 path 作为跳转路径</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    const routePath = path.resolve(basePath, item.path);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    // 路由分离之后，存在同名父路由的情况，需要单独处理</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    let route = result.find((item) =&gt; item.path === routePath);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    if (!route) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      route = &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        ...item,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        path: routePath,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        children: [],</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      // icon 与 title 必须全部存在</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      if (route.meta.icon &amp;&amp; route.meta.title) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        // meta 存在生成 route 对象，放入 arr</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        result.push(route);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    // 存在 children 进入迭代到children</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    if (item.children) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      route.children.push(...generateMenus(item.children, route.path));</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  return result;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div></details>\n\n<h4 id=\"18、SidebarMenu-调用-filterRouters、generateMenus-方法\"><a href=\"#18、SidebarMenu-调用-filterRouters、generateMenus-方法\" class=\"headerlink\" title=\"18、SidebarMenu 调用 filterRouters、generateMenus 方法\"></a>18、SidebarMenu 调用 filterRouters、generateMenus 方法</h4><div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;script setup&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">import &#123; computed &#125; from &#39;vue&#39;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">import &#123; useRouter &#125; from &#39;vue-router&#39;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">import &#123; filterRouters, generateMenus &#125; from &#39;@/utils/route&#39;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">const router = useRouter()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">const routes = computed(() =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const filterRoutes = filterRouters(router.getRoutes())</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  return generateMenus(filterRoutes)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">console.log(JSON.stringify(routes.value))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/script&gt;</span></span></code></pre></div><h4 id=\"19、生成动态-menu-菜单\"><a href=\"#19、生成动态-menu-菜单\" class=\"headerlink\" title=\"19、生成动态 menu 菜单\"></a>19、生成动态 menu 菜单</h4><p>整个 menu 菜单，分为 3 个组件来进行处理</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>1、SidebarMenu:处理数据，作为最顶层 menu 载体</p></blockquote>\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;!-- 一级 menu 菜单 --&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;el-menu ...&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;sidebar-item</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      v-for=&quot;item in routes&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      :key=&quot;item.path&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      :route=&quot;item&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &gt;&lt;/sidebar-item&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;/el-menu&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/template&gt;</span></span></code></pre></div><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>2、SidebarItem：根据数据处理当前项为 el-sub-menu || el-menu-item</p></blockquote>\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;!-- 支持渲染多级 menu 菜单 --&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;el-submenu v-if=&quot;route.children.length &gt; 0&quot; :index=&quot;route.path&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;template #title&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;menu-item :title=&quot;route.meta.title&quot; :icon=&quot;route.meta.icon&quot;&gt;&lt;/menu-item&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;/template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;!-- 循环渲染 --&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;sidebar-item</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      v-for=&quot;item in route.children&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      :key=&quot;item.path&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      :route=&quot;item&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &gt;&lt;/sidebar-item&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;/el-submenu&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;!-- 渲染 item 项 --&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;el-menu-item v-else :index=&quot;route.path&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;menu-item :title=&quot;route.meta.title&quot; :icon=&quot;route.meta.icon&quot;&gt;&lt;/menu-item&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;/el-menu-item&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/template&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;script setup&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  import MenuItem from &quot;./MenuItem&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  import &#123; defineProps &#125; from &quot;vue&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 定义 props</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  defineProps(&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    route: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      type: Object,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      required: true,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/script&gt;</span></span></code></pre></div><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>3、MenuItem:处理 el-menu-item 样式</p></blockquote>\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;i v-if=&quot;icon.includes(&#39;el-icon&#39;)&quot; class=&quot;sub-el-icon&quot; :class=&quot;icon&quot;&gt;&lt;/i&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;svg-icon v-else :icon=&quot;icon&quot;&gt;&lt;/svg-icon&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;span&gt;&#123;&#123; title &#125;&#125;&lt;/span&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/template&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;script setup&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  import &#123; defineProps &#125; from &quot;vue&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  defineProps(&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    title: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      type: String,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      required: true,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    icon: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      type: String,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      required: true,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/script&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;</span></span></code></pre></div><p>menu 菜单完成，还需解决样式问题、菜单路由跳转问题、默认激活项</p>\n<p><code>样式修改</code>：store&#x2F;getters 创建快捷访问（后续加入主题更换功能，样式不能写死）</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">import variables from &#39;@/styles/variables.scss&#39;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">const getters = &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  cssVar: state =&gt; variables</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">export default getters</span></span></code></pre></div><p><code>SidebarMenu</code>写入样式（el-menu 里的 router 是指定路由跳转， activeMenu 为默认激活项）</p>\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// template</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;el-menu</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  :background-color=&quot;$store.getters.cssVar.menuBg&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  :text-color=&quot;$store.getters.cssVar.menuText&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  :active-text-color=&quot;$store.getters.cssVar.menuActiveText&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  :default-active=&quot;activeMenu&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  :unique-opened=&quot;true&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  router</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&gt;&lt;/el-menu&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// js</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;script setup&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ...</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 计算高亮 menu 的方法</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const route = useRoute()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const activeMenu = computed(() =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    const &#123; path &#125; = route</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    return path</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/script&gt;</span></span></code></pre></div><h4 id=\"20、菜单的伸缩功能\"><a href=\"#20、菜单的伸缩功能\" class=\"headerlink\" title=\"20、菜单的伸缩功能\"></a>20、菜单的伸缩功能</h4><p>创建<code>store/modules/app.js</code></p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">export default &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  namespaced: true,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  state: () =&gt; (&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sidebarOpened: true,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;),</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  mutations: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    triggerSidebarOpened(state) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      state.sidebarOpened = !state.sidebarOpened;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  actions: &#123;&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;;</span></span></code></pre></div><p>在<code>store/index.js</code>中引入上面的 app.js</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">import app from &quot;./modules/app&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">export default createStore(&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  getters,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  modules: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    user,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    app,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;);</span></span></code></pre></div><p>在 <code>store/getters</code> 中创建快捷访问</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">sidebarOpened: (state) =&gt; state.app.sidebarOpened;</span></span></code></pre></div><h4 id=\"21、创建收缩-icon-组件-hamburger\"><a href=\"#21、创建收缩-icon-组件-hamburger\" class=\"headerlink\" title=\"21、创建收缩 icon 组件 hamburger\"></a>21、创建收缩 icon 组件 hamburger</h4><p>创建<code>src/components/Hamburger/index.vue</code></p>\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;div class=&quot;hamburger-container&quot; @click=&quot;toggleClick&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;svg-icon class=&quot;hamburger&quot; :icon=&quot;icon&quot;&gt;&lt;/svg-icon&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;/div&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/template&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;script setup&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  import &#123; computed &#125; from &quot;vue&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  import &#123; useStore &#125; from &quot;vuex&quot;;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const store = useStore();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const toggleClick = () =&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    store.commit(&quot;app/triggerSidebarOpened&quot;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const icon = computed(() =&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    store.getters.sidebarOpened ? &quot;hamburger-opened&quot; : &quot;hamburger-closed&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  );</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/script&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;style lang=&quot;scss&quot; scoped&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  .hamburger-container &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    padding: 0 16px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .hamburger &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      display: inline-block;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      vertical-align: middle;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      width: 20px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      height: 20px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/style&gt;</span></span></code></pre></div><p>在<code>layout/components/Navbar.vue</code>中使用 Hamburger 组件</p>\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;div class=&quot;navbar&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;hamburger class=&quot;hamburger-container&quot; /&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;/div&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/template&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;script setup&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  import Hamburger from &#39;@/components/Hamburger&#39;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/script&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;style lang=&quot;scss&quot; scoped&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  .navbar &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ...</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .hamburger-container &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      line-height: 46px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      height: 100%;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      float: left;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      cursor: pointer;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      // hover 动画</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      transition: background 0.5s;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &amp;:hover &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        background: rgba(0, 0, 0, 0.1);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">   ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/style&gt;</span></span></code></pre></div><p>在<code>layout/components/Sidebar/SidebarMenu.vue</code>中添加控制 el-menu 的<code>collapse</code>属性</p>\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;el-menu</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    :collapse=&quot;!$store.getters.sidebarOpened&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ...</span></span></code></pre></div><p>在<code>layout/index.vue</code>中指定侧边栏的宽度和缩放动画</p>\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;div</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  class=&quot;app-wrapper&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  :class=&quot;[$store.getters.sidebarOpened ? &#39;openSidebar&#39; : &#39;hideSidebar&#39;]&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/div&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;style lang=&quot;scss&quot; scoped&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ... .fixed-header &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    position: fixed;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    top: 0;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    right: 0;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    z-index: 9;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    width: calc(100% - #&#123;$sideBarWidth&#125;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    transition: width 0.28s;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  .hideSidebar .fixed-header &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    width: calc(100% - #&#123;$hideSideBarWidth&#125;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/style&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;style&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 在 `styles/variables.scss` 中指定 `hideSideBarWidth`</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  $hideSideBarWidth: 54px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/style&gt;</span></span></code></pre></div><h4 id=\"22、SidebarHeader-处理\"><a href=\"#22、SidebarHeader-处理\" class=\"headerlink\" title=\"22、SidebarHeader 处理\"></a>22、SidebarHeader 处理</h4><details>\n<summary>显示详细代码</summary>\n\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;div class=&quot;&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;div class=&quot;logo-container&quot;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;el-avatar size=&quot;44&quot; shape=&quot;square&quot; src=&quot;http://xxxxx.com&quot; /&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &lt;h1 class=&quot;logo-title&quot; v-if=&quot;$store.getters.sidebarOpened&quot;&gt;Admin&lt;/h1&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &lt;/div&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &lt;/div&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/template&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;style lang=&quot;scss&quot; scoped&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  .logo-container &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    height: 44px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    padding: 10px 0 22px 0;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    display: flex;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    align-items: center;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    justify-content: center;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    .logo-title &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      margin-left: 10px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      color: #fff;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      font-weight: 600;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      line-height: 50px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      font-size: 16px;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      white-space: nowrap;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/style&gt;</span></span></code></pre></div></details>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>处理 el-avatar 的图片背景问题</p></blockquote>\n<p>创建 <code>styles/element.scss</code>,然后将其导入到<code>style/index.scss</code></p>\n<div class=\"language-css\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">css</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">.el-avatar &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  --el-avatar-background-color: none;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>处理动画问题</p></blockquote>\n<p>在 <code>styles/variables.scss</code> 中，加入以下变量</p>\n<div class=\"language-css\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">css</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">$sideBarDuration: 0.28s;</span></span></code></pre></div><p><code>styles/sidebar.scss</code> 修改时长</p>\n<div class=\"language-css\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">css</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">  .main-container &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    transition: margin-left #&#123;$sideBarDuration&#125;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">   ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  .sidebar-container &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    transition: width #&#123;$sideBarDuration&#125;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span></code></pre></div><p><code>layout/index</code> 修改样式</p>\n<div class=\"language-css\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">css</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">.fixed-header &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  transition: width #&#123;$sideBarDuration&#125;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div><h4 id=\"23、组件状态驱动的动态-CSS-值\"><a href=\"#23、组件状态驱动的动态-CSS-值\" class=\"headerlink\" title=\"23、组件状态驱动的动态 CSS 值\"></a>23、组件状态驱动的动态 CSS 值</h4><div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&lt;template&gt; ... &lt;el-avatar :size=&quot;logoHeight&quot; ... &lt;/template&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;script setup&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const logoHeight = 44</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/script&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;style lang=&quot;scss&quot; scoped&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  .logo-container &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    height: v-bind(logoHeight) + &#39;px&#39;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&lt;/style&gt;</span></span></code></pre></div>","text":"包括后台项目 layout 基础架构、用户主动和被动退出、动态 menu 菜单、结构路由表、侧边菜单栏的收缩、组件状态驱动的动态 CSS 值 layout 基础...","permalink":"/post/94-vue3-ele-plus-admin","photos":[],"count_time":{"symbolsCount":"31k","symbolsTime":"28 mins."},"categories":[],"tags":[{"name":"vue3","slug":"vue3","count":24,"path":"api/tags/vue3.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1%E3%80%81%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F%E8%BF%9B%E5%85%A5%E9%A6%96%E9%A1%B5%E4%B9%8B%E5%90%8E%EF%BC%8C%E6%95%B4%E4%B8%AA%E9%A6%96%E9%A1%B5%E4%B9%9F%E5%B0%B1%E6%98%AF%E4%B8%8A%E9%9D%A2%E8%AF%B4%E7%9A%84%E5%88%86%E4%B8%BA%E4%B8%89%E4%B8%AA%E9%83%A8%E5%88%86\"><span class=\"toc-text\">1、登录成功进入首页之后，整个首页也就是上面说的分为三个部分</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2%E3%80%81%E5%9C%A8layout-index%E5%BC%95%E5%85%A5%E5%88%9B%E5%BB%BA%E7%9A%84%E4%B8%89%E4%B8%AA%E7%BB%84%E4%BB%B6\"><span class=\"toc-text\">2、在layout&#x2F;index引入创建的三个组件</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3%E3%80%81layout-index%E5%AF%B9%E5%BA%94%E7%9A%84%E5%B8%83%E5%B1%80\"><span class=\"toc-text\">3、layout&#x2F;index对应的布局</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4%E3%80%81%E5%9C%A8-styles-%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E5%AE%9A%E4%B9%89-3-%E4%B8%AA-scss-%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">4、在 styles 文件夹下定义 3 个 scss 文件</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#5%E3%80%81%E5%88%9B%E5%BB%BA%E7%9A%84%E4%B8%89%E4%B8%AA-scss-%E6%96%87%E4%BB%B6%E5%AF%BC%E5%85%A5%E5%88%B0-styles-index-scss\"><span class=\"toc-text\">5、创建的三个 scss 文件导入到 styles&#x2F;index.scss</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6%E3%80%81%E4%BE%A7%E8%BE%B9%E6%A0%8F%E8%A6%81%E5%AE%9E%E7%8E%B0%E4%B8%BB%E9%A2%98%E6%9B%B4%E6%8D%A2%E5%8A%9F%E8%83%BD%EF%BC%8Csidebar-%E8%B5%8B%E5%80%BC%E5%8A%A8%E6%80%81%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2\"><span class=\"toc-text\">6、侧边栏要实现主题更换功能，sidebar 赋值动态背景颜色</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7%E3%80%81Navbar%E3%80%81Sidebar%E3%80%81AppMain-%E7%BB%84%E4%BB%B6%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BB%A3%E7%A0%81%E5%8D%A0%E4%BD%8D%E5%8F%8A%E6%A0%B7%E5%BC%8F%E4%BF%AE%E6%94%B9\"><span class=\"toc-text\">7、Navbar、Sidebar、AppMain 组件初始化代码占位及样式修改</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#8%E3%80%81%E7%94%A8%E6%88%B7%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">8、用户个人信息</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#9%E3%80%81element-plus-%E7%9A%84-dropdown-avatar-%E7%BB%84%E4%BB%B6%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E5%A4%B4%E5%83%8F%E4%BF%A1%E6%81%AF%E5%8F%8A%E7%94%A8%E6%88%B7%E4%B8%BB%E5%8A%A8%E9%80%80%E5%87%BA%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">9、element-plus 的 dropdown avatar 组件实现用户头像信息及用户主动退出功能</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#10%E3%80%81%E4%B8%BB%E5%8A%A8%E9%80%80%E5%87%BA%E5%8A%9F%E8%83%BD-%E5%9C%A8-store-moduels-user-js-%E4%B8%AD%EF%BC%8C%E6%B8%85%E9%99%A4%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E3%80%81%E6%B8%85%E9%99%A4%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%E3%80%81%E8%BF%94%E5%9B%9E%E5%88%B0%E7%99%BB%E5%BD%95%E9%A1%B5\"><span class=\"toc-text\">10、主动退出功能:在 store&#x2F;moduels&#x2F;user.js 中，清除当前用户缓存数据、清除用户权限相关配置、返回到登录页</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#11%E3%80%81%E8%A2%AB%E5%8A%A8%E9%80%80%E5%87%BA%E5%8A%9F%E8%83%BD%EF%BC%9Atoken-%E8%BF%87%E6%9C%9F%E3%80%81%E5%8D%95%E4%B8%80%E8%B4%A6%E6%88%B7%E5%90%8C%E6%97%B6%E7%99%BB%E5%BD%95\"><span class=\"toc-text\">11、被动退出功能：token 过期、单一账户同时登录</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#12%E3%80%81%E4%B8%B4%E6%97%B6menu%E8%8F%9C%E5%8D%95\"><span class=\"toc-text\">12、临时menu菜单</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#13%E3%80%81%E5%8A%A8%E6%80%81-menu-%E8%8F%9C%E5%8D%95%E5%A4%84%E7%90%86\"><span class=\"toc-text\">13、动态 menu 菜单处理</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#14%E3%80%81%E5%88%9B%E5%BB%BA%E9%A1%B5%E9%9D%A2%E7%BB%84%E4%BB%B6\"><span class=\"toc-text\">14、创建页面组件</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#15%E3%80%81%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E5%A4%84%E7%90%86\"><span class=\"toc-text\">15、用户权限处理</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#16%E3%80%81%E8%A7%A3%E6%9E%90%E8%B7%AF%E7%94%B1%E8%A1%A8%EF%BC%8C%E8%8E%B7%E5%8F%96%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">16、解析路由表，获取结构化数据</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#17%E3%80%81%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">17、处理数据结构问题</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#18%E3%80%81SidebarMenu-%E8%B0%83%E7%94%A8-filterRouters%E3%80%81generateMenus-%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">18、SidebarMenu 调用 filterRouters、generateMenus 方法</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#19%E3%80%81%E7%94%9F%E6%88%90%E5%8A%A8%E6%80%81-menu-%E8%8F%9C%E5%8D%95\"><span class=\"toc-text\">19、生成动态 menu 菜单</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#20%E3%80%81%E8%8F%9C%E5%8D%95%E7%9A%84%E4%BC%B8%E7%BC%A9%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">20、菜单的伸缩功能</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#21%E3%80%81%E5%88%9B%E5%BB%BA%E6%94%B6%E7%BC%A9-icon-%E7%BB%84%E4%BB%B6-hamburger\"><span class=\"toc-text\">21、创建收缩 icon 组件 hamburger</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#22%E3%80%81SidebarHeader-%E5%A4%84%E7%90%86\"><span class=\"toc-text\">22、SidebarHeader 处理</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#23%E3%80%81%E7%BB%84%E4%BB%B6%E7%8A%B6%E6%80%81%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%8A%A8%E6%80%81-CSS-%E5%80%BC\"><span class=\"toc-text\">23、组件状态驱动的动态 CSS 值</span></a></li></ol>","author":{"name":"Jude","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"95、vue3.0使用sass预处理器使用::v-deep深度选择器抛出警告","uid":"4a802e600b102f789dcec2a9924c790b","slug":"95-v-deep","date":"2022-11-21T12:00:00.000Z","updated":"2022-11-26T14:56:49.000Z","comments":true,"path":"api/articles/95-v-deep.json","keywords":null,"cover":null,"text":"terminal 中的警告：::v-deep usage as a combinator has been deprecated. Use :deep(＜ in...","permalink":"/post/95-v-deep","photos":[],"count_time":{"symbolsCount":389,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"vue3","slug":"vue3","count":24,"path":"api/tags/vue3.json"}],"author":{"name":"Jude","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"93、使用vue3+element-plus写后台管理系统：（三）","uid":"6b8bfac8e09d7ad60db5fe489aa355a1","slug":"93-vue3-ele-plus-admin","date":"2022-11-10T12:00:00.000Z","updated":"2022-11-24T06:22:14.000Z","comments":true,"path":"api/articles/93-vue3-ele-plus-admin.json","keywords":null,"cover":null,"text":"包括配置环境变量封装 axios、接口请求模块、vuex 登录请求动作、保存服务端的 token、登录鉴权 一、配置环境变量及封装 axios 模块在跟目录下创...","permalink":"/post/93-vue3-ele-plus-admin","photos":[],"count_time":{"symbolsCount":"4.6k","symbolsTime":"4 mins."},"categories":[],"tags":[{"name":"vue3","slug":"vue3","count":24,"path":"api/tags/vue3.json"}],"author":{"name":"Jude","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}