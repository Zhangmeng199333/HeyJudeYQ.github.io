{"title":"91、使用vue3+element-plus写后台管理系统：（一）","uid":"51217e730619a24081f2a57960d90416","slug":"91-vue3-ele-plus-admin","date":"2022-10-16T12:00:00.000Z","updated":"2022-11-24T06:22:31.000Z","comments":true,"path":"api/articles/91-vue3-ele-plus-admin.json","keywords":null,"cover":[],"content":"<p>创建项目及代码格式提交规范（备注：遇见 2 个坑：yarn 问题、git cz 提交空格问题）</p>\n<span id=\"more\"></span>\n\n<h2 id=\"一、vue-cli-创建项目\"><a href=\"#一、vue-cli-创建项目\" class=\"headerlink\" title=\"一、vue-cli 创建项目\"></a>一、vue-cli 创建项目</h2><p>vue-cli 版本应当大于 4.5.13</p>\n<p>升级 vue-cli</p>\n<div class=\"language-shell\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">shell</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">npm update -g @vue/cli</span></span></code></pre></div><p>创建项目</p>\n<div class=\"language-shell\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">shell</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">vue create vue3-admin</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// 进入模板选择</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">Vue CLI v4.5.13</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">? Please pick a preset:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  Default ([Vue 2] babel, eslint)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  Default (Vue 3) ([Vue 3] babel, eslint)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&gt; Manually select features  // 选择手动配置</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// ----------------------------------------------------------</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">? Check the features needed for your project:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> (*) Choose Vue version // 选择 vue 版本</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> (*) Babel // 使用 babel</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> ( ) TypeScript // 不使用 ts</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> ( ) Progressive Web App (PWA) Support // 不使用 PWA</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> (*) Router // 添加 vue-router</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> (*) Vuex // 添加 vuex</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&gt;(*) CSS Pre-processors // 使用 css 预处理器</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> (*) Linter / Formatter // 代码格式化</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> ( ) Unit Testing // 不配置测试</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> ( ) E2E Testing  // // 不配置测试</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// ----------------------------------------------------------</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> Choose a version of Vue.js that you want to start the project with</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  2.x</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&gt; 3.x // 选择 vue 3.0 版本</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// ----------------------------------------------------------</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> Use history mode for router? (Requires proper server setup for index fallback in production) (Y/n) n // 不使用 history模式 的路由</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// ----------------------------------------------------------</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> ? Pick a CSS pre-processor (PostCSS, Autoprefixer and CSS Modules are supported by default):</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&gt; Sass/SCSS (with dart-sass) // 使用基于 dart-sass 的 scss 预处理器</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  Sass/SCSS (with node-sass)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  Less</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  Stylus</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// ----------------------------------------------------------</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">? Pick a linter / formatter config:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ESLint with error prevention only</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ESLint + Airbnb config</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&gt; ESLint + Standard config // 使用 ESLint 标准代码格式化方案</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ESLint + Prettier</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// ----------------------------------------------------------</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">? Pick additional lint features:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> (*) Lint on save //</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&gt;(*) Lint and fix on commit  // 保存时 &amp;&amp; 提交时，都进行 lint</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// ----------------------------------------------------------</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">? Where do you prefer placing config for Babel, ESLint, etc.? (Use arrow keys)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&gt; In dedicated config files // 单独的配置文件</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  In package.json</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// ----------------------------------------------------------</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> Save this as a preset for future projects? (y/N) n // 不存储预设</span></span></code></pre></div><p>进入项目，然后启动项目</p>\n<p><code>创建项目这里的坑</code>:<a href=\"mailto:&#106;&#x65;&#x73;&#x74;&#45;&#x77;&#x6f;&#x72;&#107;&#101;&#x72;&#x40;&#x32;&#56;&#46;&#x31;&#46;&#x33;\">&#106;&#x65;&#x73;&#x74;&#45;&#x77;&#x6f;&#x72;&#107;&#101;&#x72;&#x40;&#x32;&#56;&#46;&#x31;&#46;&#x33;</a>: The engine “node” is incompatible with this module. Expe</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>解决方法： yarn config set ignore-engines true</p></blockquote>\n<h2 id=\"二、ESLint-和-Prettier-解决代码格式问题\"><a href=\"#二、ESLint-和-Prettier-解决代码格式问题\" class=\"headerlink\" title=\"二、ESLint 和 Prettier 解决代码格式问题\"></a>二、ESLint 和 Prettier 解决代码格式问题</h2><p>创建项目时，已经选择了 eslint，配置文件为.eslintrc.js</p>\n<p>vscode 下载<code>prettier</code>插件，创建.prettierrc 文件，配置如下：</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 不尾随分号</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &quot;semi&quot;: false,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 使用单引号</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &quot;singleQuote&quot;: true,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 多行逗号分割的语法中，最后一行不加逗号</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &quot;trailingComma&quot;: &quot;none&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div><p>vscode 设置中，搜索<code>Format On Save</code>,然后勾选<code>在保存时格式化文件。</code></p>\n<p>还要解决一个问题就是 eslint 和 prettier 的冲突问题，例如 created 钩子函数后面会有一个空格，prettier 会将空格去掉</p>\n<p>解决方法：</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// .eslintrc.js  rules规则下添加</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#39;space-before-function-paren&#39;: &#39;off&#39;</span></span></code></pre></div><h2 id=\"三、git-提交规范\"><a href=\"#三、git-提交规范\" class=\"headerlink\" title=\"三、git 提交规范\"></a>三、git 提交规范</h2><p>1、全局安装 commitizen</p>\n<div class=\"language-shell\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">shell</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">npm install -g commitizen@4.2.4</span></span></code></pre></div><p>2、安装并配置 cz-customizable</p>\n<div class=\"language-shell\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">shell</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">npm i cz-customizable@6.3.0 --save-dev</span></span>\n<span class=\"line\"></span></code></pre></div><p>配置：</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// package.json</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&quot;config&quot;:&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &quot;commitizen&quot;: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &quot;path&quot;: &quot;node_modules/cz-customizable&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>3、根目录下创建.cz-config.js 自定义提示文件</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">module.exports = &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 可选类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  types: [</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#123; value: &quot;feat&quot;, name: &quot;feat:     新功能&quot; &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#123; value: &quot;fix&quot;, name: &quot;fix:      修复&quot; &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#123; value: &quot;docs&quot;, name: &quot;docs:     文档变更&quot; &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#123; value: &quot;style&quot;, name: &quot;style:    代码格式(不影响代码运行的变动)&quot; &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      value: &quot;refactor&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      name: &quot;refactor: 重构(既不是增加feature，也不是修复bug)&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#123; value: &quot;perf&quot;, name: &quot;perf:     性能优化&quot; &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#123; value: &quot;test&quot;, name: &quot;test:     增加测试&quot; &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#123; value: &quot;chore&quot;, name: &quot;chore:    构建过程或辅助工具的变动&quot; &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#123; value: &quot;revert&quot;, name: &quot;revert:   回退&quot; &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#123; value: &quot;build&quot;, name: &quot;build:    打包&quot; &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ],</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 消息步骤</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  messages: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    type: &quot;请选择提交类型:&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    customScope: &quot;请输入修改范围(可选):&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    subject: &quot;请简要描述提交(必填):&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    body: &quot;请输入详细描述(可选):&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    footer: &quot;请输入要关闭的issue(可选):&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    confirmCommit: &quot;确认使用以上信息提交？(y/n/e/h)&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 跳过问题</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  skipQuestions: [&quot;body&quot;, &quot;footer&quot;],</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // subject文字长度默认是72</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  subjectLimit: 72,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;;</span></span></code></pre></div><p>4、使用 git cz 代替 git commit</p>\n<p>5、git hooks 校验提交信息</p>\n<p>2 个工具的的使用：</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><ol>\n<li><a href=\"https://github.com/conventional-changelog/commitlint\">commitlint</a>：用于检查提交信息</li>\n</ol></blockquote>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><ol start=\"2\">\n<li><a href=\"https://github.com/typicode/husky\">husky</a>：是<code>git hooks</code>工具</li>\n</ol></blockquote>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><blockquote>\n<p>npm 版本大于 7.x</p></blockquote>\n</blockquote>\n<p>5.1 安装 commitlint</p>\n<div class=\"language-shell\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">shell</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">npm install --save-dev @commitlint/config-conventional@12.1.4 @commitlint/cli@12.1.4</span></span></code></pre></div><p>5.2 创建 commitlint.config.js(编码格式为 UTF-8)</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">module.exports = &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 继承的规则</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  extends: [&quot;@commitlint/config-conventional&quot;],</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 定义规则类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  rules: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    // type 类型定义，表示 git 提交的 type 必须在以下类型范围内</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &quot;type-enum&quot;: [</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      2,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &quot;always&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      [</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;feat&quot;, // 新功能 feature</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;fix&quot;, // 修复 bug</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;docs&quot;, // 文档注释</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;style&quot;, // 代码格式(不影响代码运行的变动)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;refactor&quot;, // 重构(既不增加新功能，也不是修复bug)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;perf&quot;, // 性能优化</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;test&quot;, // 增加测试</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;chore&quot;, // 构建过程或辅助工具的变动</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;revert&quot;, // 回退</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        &quot;build&quot;, // 打包</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      ],</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ],</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    // subject 大小写不做校验</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &quot;subject-case&quot;: [0],</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;;</span></span></code></pre></div><p>5.3 安装 husky</p>\n<div class=\"language-shell\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">shell</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">npm install husky@7.0.1 --save-dev</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// 启动hooks，生成.husky</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">npx husky install</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// 在 `package.json` 中生成 `prepare` 指令（ **需要 npm &gt; 7.0 版本** ）</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">npm set-script prepare &quot;husky install&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// 执行 `prepare` 指令</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">npm run prepare</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// 添加 `commitlint` 的 `hook` 到 `husky`中，并指令在 `commit-msg` 的 `hooks` 下执行 `npx --no-install commitlint --edit &quot;$1&quot;` 指令</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">npx husky add .husky/commit-msg &#39;npx --no-install commitlint --edit &quot;$1&quot;&#39;</span></span></code></pre></div><p>不符合规范的将不能提交</p>\n<p>5.4 通过 pre-commit 检测提交时代码规范</p>\n<div class=\"language-shell\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">shell</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// 执行</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">npx husky add .husky/pre-commit &quot;npx eslint --ext .js,.vue src&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> // 添加 `commit` 时的 `hook` （`npx eslint --ext .js,.vue src` 会在执行到该 hook 时运行</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">// 上面操作会在.husky文件下生成pre-commit</span></span></code></pre></div><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>vscode 提交<br>源代码管理 -&gt; stage all changes -&gt; git cz -&gt; 选择提交类型 -&gt; git push</p></blockquote>\n<p><img src=\"https://cdn.staticaly.com/gh/HeyJudeYQ/Image-Host@master/20221116/githook.6nw71q0vos40.png\" alt=\"git cz\"></p>\n<p><code>这里有个坑：</code></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>在<code>请简要描述提交（必填）</code> 这一步填写信息时，需要加一个空格</p></blockquote>\n<p>5.5 lint-staged 自动修复格式错误(无需安装，创建项目时自带)</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// package.json</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&quot;lint-staged&quot;: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &quot;src/**/*.&#123;js,vue&#125;&quot;: [</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &quot;eslint --fix&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &quot;git add&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>修改 <code>.husky/pre-commit</code> 文件</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">#!/bin/sh</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">. &quot;$(dirname &quot;$0&quot;)/_/husky.sh&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">npx lint-staged</span></span></code></pre></div>","text":"创建项目及代码格式提交规范（备注：遇见 2 个坑：yarn 问题、git cz 提交空格问题） 一、vue-cli 创建项目vue-cli 版本应当大于 4.5...","permalink":"/post/91-vue3-ele-plus-admin","photos":[],"count_time":{"symbolsCount":"6.6k","symbolsTime":"6 mins."},"categories":[],"tags":[{"name":"vue3","slug":"vue3","count":24,"path":"api/tags/vue3.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81vue-cli-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE\"><span class=\"toc-text\">一、vue-cli 创建项目</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81ESLint-%E5%92%8C-Prettier-%E8%A7%A3%E5%86%B3%E4%BB%A3%E7%A0%81%E6%A0%BC%E5%BC%8F%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">二、ESLint 和 Prettier 解决代码格式问题</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81git-%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83\"><span class=\"toc-text\">三、git 提交规范</span></a></li></ol>","author":{"name":"Jude","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"92、使用vue3+element-plus写后台管理系统：（二）","uid":"c23526b6d95d909419929499f0fd438e","slug":"92-vue3-ele-plus-admin","date":"2022-11-07T12:00:00.000Z","updated":"2022-11-24T06:22:20.000Z","comments":true,"path":"api/articles/92-vue3-ele-plus-admin.json","keywords":null,"cover":null,"text":"包括 element-plus 的安装、登录、svg icons 的处理（坑：svg 不显示的问题） 一、安装 element-plusshellnpm ins...","permalink":"/post/92-vue3-ele-plus-admin","photos":[],"count_time":{"symbolsCount":"9.8k","symbolsTime":"9 mins."},"categories":[],"tags":[{"name":"vue3","slug":"vue3","count":24,"path":"api/tags/vue3.json"}],"author":{"name":"Jude","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"90、相对时间及时间国际化的处理","uid":"43c695a4c770e67321863ebb0ea62b5e","slug":"90-relativeTime","date":"2022-08-15T12:00:00.000Z","updated":"2022-11-16T01:17:58.000Z","comments":true,"path":"api/articles/90-relativeTime.json","keywords":null,"cover":null,"text":"相对时间可以理解为最后一次“打招呼”的时间和当前时间的差值。例如：2 小时前，1 天前，1 年前等 一、relativeTime 函数使用 day.js 将后端...","permalink":"/post/90-relativeTime","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"vue3","slug":"vue3","count":24,"path":"api/tags/vue3.json"}],"author":{"name":"Jude","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}