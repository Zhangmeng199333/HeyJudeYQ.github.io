{"title":"40、初识egg.js","uid":"57be698d01233b1f38467e1fa2fb6466","slug":"40-egg","date":"2021-06-20T12:00:00.000Z","updated":"2022-09-05T07:49:04.000Z","comments":true,"path":"api/articles/40-egg.json","keywords":null,"cover":null,"content":"<p>egg.js的使用,包括项目的创建、内置ctx对象、路由、controller控制层、post请求。</p>\n<span id=\"more\"></span>\n\n<h3 id=\"1、创建-启动项目\"><a href=\"#1、创建-启动项目\" class=\"headerlink\" title=\"1、创建&#x2F;启动项目\"></a>1、创建&#x2F;启动项目</h3><p>直接使用下面的方式，无法创建项目</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 无法创建项目</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">npm init egg </span><span style=\"color: #89DDFF\">--</span><span style=\"color: #BABED8\">type</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\">simple</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 需要在后面指定淘宝源</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">npm init egg </span><span style=\"color: #89DDFF\">--</span><span style=\"color: #BABED8\">type</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\">simple </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">r</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #FFCB6B\">https</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #676E95; font-style: italic\">//registry.npm.taobao.org</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">npm run dev</span></span></code></pre></div><h3 id=\"2、内置的ctx对象\"><a href=\"#2、内置的ctx对象\" class=\"headerlink\" title=\"2、内置的ctx对象\"></a>2、内置的ctx对象</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>ctx这个对象非常重要，请求来的参数，返回去的消息都需要通过ctx这个对象获取或者设置</p></blockquote>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>ctx是继承koa的context对象通过设置ctx.body， 可以改变返回信息</p></blockquote>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">ctx </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\"> </span><span style=\"color: #FFCB6B\">request</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span></span>\n<span class=\"line\"><span style=\"color: #F07178\">   </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\"> </span><span style=\"color: #FFCB6B\">method</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">GET</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">     </span><span style=\"color: #FFCB6B\">url</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">/</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">     </span><span style=\"color: #FFCB6B\">header</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\"> </span><span style=\"color: #FFCB6B\">host</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">127.0.0.1:7001</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #FFCB6B\">connection</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">keep-alive</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #FFCB6B\">pragma</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">no-cache</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">cache-control</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">no-cache</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">sec-ch-ua</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">&quot; Not;A Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;97&quot;, &quot;Chromium&quot;;v=&quot;97&quot;</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">sec-ch-ua-mobile</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">?0</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">sec-ch-ua-platform</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">&quot;macOS&quot;</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">upgrade-insecure-requests</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">1</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">user-agent</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #FFCB6B\">accept</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">sec-fetch-site</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">none</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">sec-fetch-mode</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">navigate</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">sec-fetch-user</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">?1</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">sec-fetch-dest</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">document</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">accept-encoding</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">gzip, deflate, br</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">accept-language</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">zh-CN,zh;q=0.9,en;q=0.8</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #FFCB6B\">cookie</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">csrfToken=DpyybUjAh9JRzrCgx3itQifi</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #FFCB6B\">response</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\"> </span><span style=\"color: #FFCB6B\">status</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">404</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #F07178\"> </span><span style=\"color: #FFCB6B\">message</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">Not Found</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #F07178\"> </span><span style=\"color: #FFCB6B\">header</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#123;&#125;</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #FFCB6B\">app</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span></span>\n<span class=\"line\"><span style=\"color: #F07178\">   </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\"> </span><span style=\"color: #FFCB6B\">env</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">local</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">     </span><span style=\"color: #FFCB6B\">name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">eggjs</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">     </span><span style=\"color: #FFCB6B\">baseDir</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">/Users/yq/Desktop/express</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">     </span><span style=\"color: #FFCB6B\">subdomainOffset</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">     </span><span style=\"color: #FFCB6B\">config</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">&lt;egg config&gt;</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">     </span><span style=\"color: #FFCB6B\">controller</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">&lt;egg controller&gt;</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">     </span><span style=\"color: #FFCB6B\">httpclient</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">&lt;egg httpclient&gt;</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">     </span><span style=\"color: #FFCB6B\">loggers</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">&lt;egg loggers&gt;</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">     </span><span style=\"color: #FFCB6B\">middlewares</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">&lt;egg middlewares&gt;</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">     </span><span style=\"color: #FFCB6B\">router</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">&lt;egg router&gt;</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">     </span><span style=\"color: #FFCB6B\">serviceClasses</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">&lt;egg serviceClasses&gt;</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #FFCB6B\">originalUrl</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">/</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #FFCB6B\">req</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">&lt;original node req&gt;</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #FFCB6B\">res</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">&lt;original node res&gt;</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #FFCB6B\">socket</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">&lt;original node socket&gt;</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h3 id=\"3、路由\"><a href=\"#3、路由\" class=\"headerlink\" title=\"3、路由\"></a>3、路由</h3><p>在controller的home.js中写一个新的路由,</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    async </span><span style=\"color: #82AAFF\">list</span><span style=\"color: #BABED8\">()</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #C792EA\">const</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\"> </span><span style=\"color: #BABED8\">ctx</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">this</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #BABED8\">ctx</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">body</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            code</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">200</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            data</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\">[</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                    id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">1</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                    name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">jude</span><span style=\"color: #89DDFF\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                    id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">2</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                    name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">summer</span><span style=\"color: #89DDFF\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            ]</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            msg</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">success</span><span style=\"color: #89DDFF\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>在router.js中匹配新写的路由</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    router</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">get</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">/list</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">controller</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">home</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">list)</span></span></code></pre></div><p>打开127.0.0.1:7001&#x2F;list即可看到效果</p>\n<h3 id=\"4、Controller控制层\"><a href=\"#4、Controller控制层\" class=\"headerlink\" title=\"4、Controller控制层\"></a>4、Controller控制层</h3><p>在controller新建一个user.js</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">use strict</span><span style=\"color: #89DDFF\">&#39;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #BABED8\"> Controller </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">require</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">egg</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">)</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Controller</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">UserController</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">extends</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Controller</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">async</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F07178\">info</span><span style=\"color: #89DDFF\">()&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #C792EA\">const</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">ctx</span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">this</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #BABED8\">ctx</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">body</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            code</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">200</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            data</span><span style=\"color: #89DDFF\">:&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">1</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">jude</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                </span><span style=\"color: #BABED8\">age</span><span style=\"color: #F07178\">:</span><span style=\"color: #F78C6C\">29</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                gender</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">man</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            </span><span style=\"color: #BABED8\">msg</span><span style=\"color: #F07178\">::</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">success</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">module.exports</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> UserController</span></span></code></pre></div><p>配置新的路由</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">router</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">get</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">/user/info</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">controller</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">user</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">info)</span></span></code></pre></div><p>打开127.0.0.1:7001&#x2F;user&#x2F;info 即可看到效果</p>\n<h3 id=\"5、post请求及配置CSRF跨域\"><a href=\"#5、post请求及配置CSRF跨域\" class=\"headerlink\" title=\"5、post请求及配置CSRF跨域\"></a>5、post请求及配置CSRF跨域</h3><p>安装跨域插件</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">npm install egg</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">cors </span><span style=\"color: #89DDFF\">--</span><span style=\"color: #BABED8\">save</span></span></code></pre></div><p>配置config下的plugin.js和config.default.js</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">// plugin.js</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">moduel.exports = &#123;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">    cors:&#123;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">        enable:true,</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">        package:&#39;egg-cors&#39;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">// config.default.js</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">config.security = &#123;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">    csrf:&#123;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">        enable:true</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">    &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">    domainWhiteList:[]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">config.cors = &#123;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">    origin:&quot;*&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">    allowMethods:&#39;GET,PUT,POST,DELETE.PATCH&#39;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">&#125;</span></span></code></pre></div><h3 id=\"6、创建post请求\"><a href=\"#6、创建post请求\" class=\"headerlink\" title=\"6、创建post请求\"></a>6、创建post请求</h3><div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// user.js</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">async </span><span style=\"color: #82AAFF\">createUser</span><span style=\"color: #BABED8\">()</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #C792EA\">const</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">ctx</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">this</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #C792EA\">const</span><span style=\"color: #F07178\"> </span><span style=\"color: #BABED8\">result</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        username</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">ctx</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">request</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">body</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">username</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        age</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">ctx</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">request</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">body</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">age</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #BABED8\">ctx</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">body</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        code</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">200</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        data</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">result</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        msg</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">success</span><span style=\"color: #89DDFF\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>此时，打开ApiPost工具，选择post请求，输入请求地址+参数信息，即可看到响应信息。</p>\n","text":"egg.js的使用,包括项目的创建、内置ctx对象、路由、controller控制层、post请求。 1、创建&#x2F;启动项目直接使用下面的方式，无法创建项...","permalink":"/post/40-egg","photos":[],"count_time":{"symbolsCount":"4.5k","symbolsTime":"4 mins."},"categories":[],"tags":[{"name":"egg","slug":"egg","count":4,"path":"api/tags/egg.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1%E3%80%81%E5%88%9B%E5%BB%BA-%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE\"><span class=\"toc-text\">1、创建&#x2F;启动项目</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2%E3%80%81%E5%86%85%E7%BD%AE%E7%9A%84ctx%E5%AF%B9%E8%B1%A1\"><span class=\"toc-text\">2、内置的ctx对象</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3%E3%80%81%E8%B7%AF%E7%94%B1\"><span class=\"toc-text\">3、路由</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4%E3%80%81Controller%E6%8E%A7%E5%88%B6%E5%B1%82\"><span class=\"toc-text\">4、Controller控制层</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5%E3%80%81post%E8%AF%B7%E6%B1%82%E5%8F%8A%E9%85%8D%E7%BD%AECSRF%E8%B7%A8%E5%9F%9F\"><span class=\"toc-text\">5、post请求及配置CSRF跨域</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#6%E3%80%81%E5%88%9B%E5%BB%BApost%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">6、创建post请求</span></a></li></ol>","author":{"name":"Jude","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"41、vue3-起始和新特性","uid":"eec7e41cb68a9bfe7d9a6a63e5e0d538","slug":"41-vue3-1-start","date":"2021-09-25T02:00:00.000Z","updated":"2022-09-05T07:49:22.000Z","comments":true,"path":"api/articles/41-vue3-1-start.json","keywords":null,"cover":null,"text":"使用 vite 创建项目，以及 vue3 的 composition API 的使用 一、创建项目（vue-cli + vite）使用 vite 可以更加快速的...","permalink":"/post/41-vue3-1-start","photos":[],"count_time":{"symbolsCount":"3.2k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"vue3","slug":"vue3","count":24,"path":"api/tags/vue3.json"}],"author":{"name":"Jude","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"39、堆和栈、变量复制、深拷贝与浅拷贝","uid":"d021f38954ea30651c1dafa01b873dde","slug":"39-stack-heap","date":"2021-05-24T16:00:00.000Z","updated":"2022-09-05T07:48:47.000Z","comments":true,"path":"api/articles/39-stack-heap.json","keywords":null,"cover":null,"text":"栈（stack）：主要存放的是基本类型的变量和对象的应用，其优势是存储速度比堆快，缺点是存在栈中的数据大小与生存期必须是确定的，缺乏灵活性。 堆（heap）：用...","permalink":"/post/39-stack-heap","photos":[],"count_time":{"symbolsCount":"3.9k","symbolsTime":"4 mins."},"categories":[],"tags":[{"name":"js","slug":"js","count":11,"path":"api/tags/js.json"}],"author":{"name":"Jude","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}