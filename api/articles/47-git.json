{"title":"47、git提交规范","uid":"9abbc13986764d2e4a75f0464cdeed8d","slug":"47-git","date":"2021-12-22T02:05:56.000Z","updated":"2022-09-05T07:53:11.000Z","comments":true,"path":"api/articles/47-git.json","keywords":null,"cover":null,"content":"<p>使用commitizen和cz-customizable规范代码提交</p>\n<span id=\"more\"></span>\n\n\n<h3 id=\"1-安装commitizen和cz-customizable\"><a href=\"#1-安装commitizen和cz-customizable\" class=\"headerlink\" title=\"1.安装commitizen和cz-customizable\"></a>1.安装commitizen和cz-customizable</h3><div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">npm install </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">g commitizen@</span><span style=\"color: #F78C6C\">4.2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F78C6C\">4</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">npm i cz</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">customizable@</span><span style=\"color: #F78C6C\">6.3</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">--</span><span style=\"color: #BABED8\">save</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">dev</span></span>\n<span class=\"line\"></span></code></pre></div><h3 id=\"2-在package-json中进行新增\"><a href=\"#2-在package-json中进行新增\" class=\"headerlink\" title=\"2.在package.json中进行新增\"></a>2.在package.json中进行新增</h3><div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">config</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">: </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">commitizen</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">path</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">node_modules/cz-customizable</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h3 id=\"3-在根目录下新建-cz-config-js文件并写入配置-之后就可以用-git-cz-来代替-git-commit\"><a href=\"#3-在根目录下新建-cz-config-js文件并写入配置-之后就可以用-git-cz-来代替-git-commit\" class=\"headerlink\" title=\"3.在根目录下新建.cz-config.js文件并写入配置 之后就可以用 git cz 来代替 git commit\"></a>3.在根目录下新建.cz-config.js文件并写入配置 之后就可以用 git cz 来代替 git commit</h3><h3 id=\"4-使用husky进行强制git代码提交规范\"><a href=\"#4-使用husky进行强制git代码提交规范\" class=\"headerlink\" title=\"4.使用husky进行强制git代码提交规范\"></a>4.使用husky进行强制git代码提交规范</h3><div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">npm install </span><span style=\"color: #89DDFF\">--</span><span style=\"color: #BABED8\">save</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">dev </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #BABED8\">commitlint</span><span style=\"color: #89DDFF\">/</span><span style=\"color: #BABED8\">config</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">conventional@</span><span style=\"color: #F78C6C\">12.1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F78C6C\">4</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #BABED8\">commitlint</span><span style=\"color: #89DDFF\">/</span><span style=\"color: #BABED8\">cli@</span><span style=\"color: #F78C6C\">12.1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F78C6C\">4</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">npm install husky@</span><span style=\"color: #F78C6C\">7.0</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">--</span><span style=\"color: #BABED8\">save</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">dev</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">npx husky install</span></span></code></pre></div><h3 id=\"5-在package-json中新增指令\"><a href=\"#5-在package-json中新增指令\" class=\"headerlink\" title=\"5.在package.json中新增指令\"></a>5.在package.json中新增指令</h3><div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">prepare</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">: </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">husky install</span><span style=\"color: #89DDFF\">&quot;</span></span></code></pre></div><h3 id=\"6-并执行\"><a href=\"#6-并执行\" class=\"headerlink\" title=\"6.并执行\"></a>6.并执行</h3><div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">npm run prepare</span></span></code></pre></div><h3 id=\"7-新增husky配置文件-并往里面写入\"><a href=\"#7-新增husky配置文件-并往里面写入\" class=\"headerlink\" title=\"7.新增husky配置文件 并往里面写入\"></a>7.新增husky配置文件 并往里面写入</h3><div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">npx husky add </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">husky</span><span style=\"color: #89DDFF\">/</span><span style=\"color: #BABED8\">commit</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">msg</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">npx </span><span style=\"color: #89DDFF\">--</span><span style=\"color: #BABED8\">no</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">install commitlint </span><span style=\"color: #89DDFF\">--</span><span style=\"color: #BABED8\">edit</span></span></code></pre></div><h3 id=\"8、husky规范\"><a href=\"#8、husky规范\" class=\"headerlink\" title=\"8、husky规范\"></a>8、husky规范</h3><div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// commitlint.config.js</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">module.exports</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  </span><span style=\"color: #676E95; font-style: italic\">// 继承的规则</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #F07178\">extends</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> [</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">@commitlint/config-conventional</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">]</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  </span><span style=\"color: #676E95; font-style: italic\">// 定义规则类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #F07178\">rules</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// type 类型定义，表示 git 提交的 type 必须在以下类型范围内</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">type-enum</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> [</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">always</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      [</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">feat</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 新功能 feature</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">fix</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 修复 bug</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">docs</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 文档注释</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">style</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 代码格式(不影响代码运行的变动)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">refactor</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 重构(既不增加新功能，也不是修复bug)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">perf</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 性能优化</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">test</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 增加测试</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">chore</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 构建过程或辅助工具的变动</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">revert</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 回退</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">build</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 打包</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      ]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ]</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// subject 大小写不做校验</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">subject-case</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> [</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\">]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span></code></pre></div>","text":"使用commitizen和cz-customizable规范代码提交 1.安装commitizen和cz-customizablejsnpm install -...","permalink":"/post/47-git","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E5%AE%89%E8%A3%85commitizen%E5%92%8Ccz-customizable\"><span class=\"toc-text\">1.安装commitizen和cz-customizable</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E5%9C%A8package-json%E4%B8%AD%E8%BF%9B%E8%A1%8C%E6%96%B0%E5%A2%9E\"><span class=\"toc-text\">2.在package.json中进行新增</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E5%9C%A8%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%B0%E5%BB%BA-cz-config-js%E6%96%87%E4%BB%B6%E5%B9%B6%E5%86%99%E5%85%A5%E9%85%8D%E7%BD%AE-%E4%B9%8B%E5%90%8E%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%94%A8-git-cz-%E6%9D%A5%E4%BB%A3%E6%9B%BF-git-commit\"><span class=\"toc-text\">3.在根目录下新建.cz-config.js文件并写入配置 之后就可以用 git cz 来代替 git commit</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-%E4%BD%BF%E7%94%A8husky%E8%BF%9B%E8%A1%8C%E5%BC%BA%E5%88%B6git%E4%BB%A3%E7%A0%81%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83\"><span class=\"toc-text\">4.使用husky进行强制git代码提交规范</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5-%E5%9C%A8package-json%E4%B8%AD%E6%96%B0%E5%A2%9E%E6%8C%87%E4%BB%A4\"><span class=\"toc-text\">5.在package.json中新增指令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#6-%E5%B9%B6%E6%89%A7%E8%A1%8C\"><span class=\"toc-text\">6.并执行</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#7-%E6%96%B0%E5%A2%9Ehusky%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-%E5%B9%B6%E5%BE%80%E9%87%8C%E9%9D%A2%E5%86%99%E5%85%A5\"><span class=\"toc-text\">7.新增husky配置文件 并往里面写入</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#8%E3%80%81husky%E8%A7%84%E8%8C%83\"><span class=\"toc-text\">8、husky规范</span></a></li></ol>","author":{"name":"Jude","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"48、用hook处理组件内定时器","uid":"0d6957d2727610cbc2b8e511c4386db6","slug":"48-hook","date":"2022-01-01T12:00:00.000Z","updated":"2022-09-05T07:53:27.000Z","comments":true,"path":"api/articles/48-hook.json","keywords":null,"cover":null,"text":"vue 项目使用 hook 处理组件内定时器的方式。一般是使用生命周期钩子函数beforeDestory来销毁定时器。从Vue源码的lifecycle.js中发...","permalink":"/post/48-hook","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"vue","slug":"vue","count":17,"path":"api/tags/vue.json"}],"author":{"name":"Jude","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"46、解决GitHub Pages绑定阿里域名CNAME消失","uid":"5f01e00714441c850ac8767634e11763","slug":"46-url","date":"2021-10-28T12:00:00.000Z","updated":"2022-09-05T07:52:58.000Z","comments":true,"path":"api/articles/46-url.json","keywords":null,"cover":null,"text":"hexo主题使用的是Claudia,部署到GitHub Pages时，CNAME会消失。 解决方式： txt// 1 cd source touch CNAME...","permalink":"/post/46-url","photos":[],"count_time":{"symbolsCount":142,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"hexo","slug":"hexo","count":1,"path":"api/tags/hexo.json"}],"author":{"name":"Jude","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}