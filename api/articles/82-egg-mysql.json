{"title":"82、egg-mysql的增删改查","uid":"ca10d3e7f1a13d6503bb04ce7c675542","slug":"82-egg-mysql","date":"2022-08-03T12:00:00.000Z","updated":"2022-10-11T08:12:51.000Z","comments":true,"path":"api/articles/82-egg-mysql.json","keywords":null,"cover":null,"content":"<p>MySQL安装成功后，在egg项目中安装egg-mysql插件，配置完成后，编写查询、新增、删除、编辑接口。</p>\n<span id=\"more\"></span>\n\n<h2 id=\"一、安装MySQL\"><a href=\"#一、安装MySQL\" class=\"headerlink\" title=\"一、安装MySQL\"></a>一、安装MySQL</h2><p>版本选择MySQL 8.0.20  Mac Intel 版本</p>\n<p>安装过程设置密码：0987654321</p>\n<p>此时在terminal输入命令：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">mysql -u root -p</span></span></code></pre></div><p>Commod not found</p>\n<p>1、termina进入 路径：&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin  查看目录是否有mysql</p>\n<p>如果存在，在此路径下执行：vim ~&#x2F;.bash_profile</p>\n<p>打开后，输入 i 键，进入编辑，在.bash_profile中添加mysql&#x2F;bin的目录，完成后，ESC退出编辑，输入：wq回车保存</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">PATH=$PATH:/usr/local/mysql/bin</span></span></code></pre></div><p>2、输入source  ~&#x2F;.bash_profile      使配置生效</p>\n<p>3、指令登录数据库：mysql -u root -p   输入密码：0987654321</p>\n<p>4、开启服务：mysql.server start</p>\n<h2 id=\"二、egg-js安装egg-mysql插件\"><a href=\"#二、egg-js安装egg-mysql插件\" class=\"headerlink\" title=\"二、egg.js安装egg-mysql插件\"></a>二、egg.js安装egg-mysql插件</h2><h4 id=\"1、安装egg-mysql及插件配置\"><a href=\"#1、安装egg-mysql及插件配置\" class=\"headerlink\" title=\"1、安装egg-mysql及插件配置\"></a>1、安装egg-mysql及插件配置</h4><div class=\"language-shell\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">shell</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">npm install egg-mysql</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span></code></pre></div><p>config&#x2F;plugin.js</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&#39;use strict&#39;;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">/** @type Egg.EggPlugin */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">module.exports = &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ejs: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    enable: true,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    package: &#39;egg-view-ejs&#39;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  mysql: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    enable: true,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    package: &#39;egg-mysql&#39;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;;</span></span></code></pre></div><p>config&#x2F;plugin-default.js</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">exports.mysql = &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 单数据库信息配置</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  client: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    // host</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    host: &#39;localhost&#39;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    // 端口号</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    port: &#39;3306&#39;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    // 用户名</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    user: &#39;root&#39;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    // 密码</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    password: &#39;数据库密码&#39;, // 初始化密码，没设置的可以不写</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    // 数据库名</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    database: &#39;test&#39;, // 我们新建的数据库名称</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 是否加载到 app 上，默认开启</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  app: true,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  // 是否加载到 agent 上，默认关闭</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  agent: false,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;;</span></span></code></pre></div><h4 id=\"2、修改-service-home-js\"><a href=\"#2、修改-service-home-js\" class=\"headerlink\" title=\"2、修改 service/home.js\"></a>2、修改 <code>service/home.js</code></h4><div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">&#39;use strict&#39;;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">const Service = require(&#39;egg&#39;).Service;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">class HomeService extends Service &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  async user() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    const &#123; ctx, app &#125; = this;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    const QUERY_STR = &#39;id, name&#39;;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    let sql = `select $&#123;QUERY_STR&#125; from list`; // 获取 id 的 sql 语句</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    try &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      const result = await app.mysql.query(sql); // mysql 实例已经挂载到 app 对象下，可以通过 app.mysql 获取到。</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      return result;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125; catch (error) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      console.log(error);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      return null;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">module.exports = HomeService;</span></span></code></pre></div><h4 id=\"3、修改controller-home-js中的user方法\"><a href=\"#3、修改controller-home-js中的user方法\" class=\"headerlink\" title=\"3、修改controller&#x2F;home.js中的user方法\"></a>3、修改controller&#x2F;home.js中的user方法</h4><div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">async user() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const &#123; ctx &#125; = this;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const result = await ctx.service.home.user();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ctx.body = result</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div><h4 id=\"4、路由配置\"><a href=\"#4、路由配置\" class=\"headerlink\" title=\"4、路由配置\"></a>4、路由配置</h4><div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">router.get(&#39;/user&#39;, controller.home.user);</span></span></code></pre></div><h2 id=\"三、新增接口\"><a href=\"#三、新增接口\" class=\"headerlink\" title=\"三、新增接口\"></a>三、新增接口</h2><p>在 <code>service/home.js</code> 下新建一个函数 <code>addUser</code></p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// 新增</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">async addUser(name) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const &#123; ctx, app &#125; = this;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  try &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    const result = await app.mysql.insert(&#39;list&#39;, &#123; name &#125;); // 给 list 表，新增一条数据</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    return result;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125; catch (error) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    console.log(error);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    return null;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div><p>再为 <code>controller/home.js</code> 添加一个 <code>addUser</code> 方法</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">async addUser() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const &#123; ctx &#125; = this;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const &#123; name &#125; = ctx.request.body;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  try &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    const result = await ctx.service.home.addUser(name);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ctx.body = &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      code: 200,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      msg: &#39;添加成功&#39;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      data: null</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125; catch (error) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ctx.body = &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      code: 500,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      msg: &#39;添加失败&#39;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      data: null</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div><p>配置路由</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">router.post(&#39;/add_user&#39;, controller.home.addUser);</span></span></code></pre></div><p>这个post请求需要使用postman测试接口是否成功。</p>\n<h2 id=\"四、编辑接口\"><a href=\"#四、编辑接口\" class=\"headerlink\" title=\"四、编辑接口\"></a>四、编辑接口</h2><p>通过 <code>/user</code> 拿到了列表数据，我们可以通过 <code>id</code> 定位某条数据，去修改它的 <code>name</code> 属性。</p>\n<p><code>/service/home.js</code>，添加编辑操作</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// 编辑</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">async editUser(id, name) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const &#123; ctx, app &#125; = this;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  try &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    let result = await app.mysql.update(&#39;list&#39;, &#123; name &#125;, &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      where: &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        id</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    return result;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125; catch (error) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    console.log(error);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    return null;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div><p><code>/controller/home.js</code> 添加如下代码：</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// 编辑</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">async editUser() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const &#123; ctx &#125; = this;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const &#123; id, name &#125; = ctx.request.body;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  try &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    const result = await ctx.service.home.editUser(id, name);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ctx.body = &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      code: 200,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      msg: &#39;添加成功&#39;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      data: null</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125; catch (error) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ctx.body = &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      code: 500,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      msg: &#39;添加失败&#39;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      data: null</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div><p>配置路由：</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">router.post(&#39;/edit_user&#39;, controller.home.editUser);</span></span></code></pre></div><p>post请求需要使用postman工具测试接口</p>\n<h2 id=\"五、删除接口\"><a href=\"#五、删除接口\" class=\"headerlink\" title=\"五、删除接口\"></a>五、删除接口</h2><p>在 <code>/service/home.js</code> 添加删除接口</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// 删除</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">async deleteUser(id) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const &#123; ctx, app &#125; = this;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  try &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    let result = await app.mysql.delete(&#39;list&#39;, &#123; id &#125;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    return result;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125; catch (error) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    console.log(error);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    return null;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div><p><code>/controller/home.js</code> 添加相应的控制器方法</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// 删除</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">async deleteUser() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const &#123; ctx &#125; = this;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  const &#123; id &#125; = ctx.request.body;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  try &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    const result = await ctx.service.home.deleteUser(id);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ctx.body = &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      code: 200,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      msg: &#39;删除成功&#39;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      data: null</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125; catch (error) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ctx.body = &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      code: 500,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      msg: &#39;删除失败&#39;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      data: null</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div><p>添加相应路由：</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">// router.js</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">router.post(&#39;/delete_user&#39;, controller.home.deleteUser);</span></span></code></pre></div>","text":"MySQL安装成功后，在egg项目中安装egg-mysql插件，配置完成后，编写查询、新增、删除、编辑接口。 一、安装MySQL版本选择MySQL 8.0.20...","permalink":"/post/82-egg-mysql","photos":[],"count_time":{"symbolsCount":"4.7k","symbolsTime":"4 mins."},"categories":[],"tags":[{"name":"egg","slug":"egg","count":4,"path":"api/tags/egg.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81%E5%AE%89%E8%A3%85MySQL\"><span class=\"toc-text\">一、安装MySQL</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81egg-js%E5%AE%89%E8%A3%85egg-mysql%E6%8F%92%E4%BB%B6\"><span class=\"toc-text\">二、egg.js安装egg-mysql插件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1%E3%80%81%E5%AE%89%E8%A3%85egg-mysql%E5%8F%8A%E6%8F%92%E4%BB%B6%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">1、安装egg-mysql及插件配置</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2%E3%80%81%E4%BF%AE%E6%94%B9-service-home-js\"><span class=\"toc-text\">2、修改 service&#x2F;home.js</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3%E3%80%81%E4%BF%AE%E6%94%B9controller-home-js%E4%B8%AD%E7%9A%84user%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">3、修改controller&#x2F;home.js中的user方法</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4%E3%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">4、路由配置</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">三、新增接口</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E3%80%81%E7%BC%96%E8%BE%91%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">四、编辑接口</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%94%E3%80%81%E5%88%A0%E9%99%A4%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">五、删除接口</span></a></li></ol>","author":{"name":"Jude","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"83、egg-jwt用户鉴权、注册、登录及中间件","uid":"8b5c323045fddf5db82f04ce0344c7e7","slug":"83-egg-jwt","date":"2022-08-03T14:00:00.000Z","updated":"2022-10-11T08:57:11.000Z","comments":true,"path":"api/articles/83-egg-jwt.json","keywords":null,"cover":null,"text":" 一、egg-jwt实现用户鉴权 用户鉴权，一种用于在通信网络中对试图访问来自服务提供商的服务的用户进行鉴权的方法。用于用户登陆到DSMP或使用数据业务时，业务...","permalink":"/post/83-egg-jwt","photos":[],"count_time":{"symbolsCount":"7.7k","symbolsTime":"7 mins."},"categories":[],"tags":[{"name":"egg","slug":"egg","count":4,"path":"api/tags/egg.json"}],"author":{"name":"Jude","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"81、egg.js(二)","uid":"5f8f097a21466c69e2c88aab3ae33526","slug":"81-egg.js","date":"2022-08-02T12:00:00.000Z","updated":"2022-10-11T06:08:16.000Z","comments":true,"path":"api/articles/81-egg.js.json","keywords":null,"cover":null,"text":"Egg.js：https://issummer.cn/2021/06/20/egg/ 一、项目环境egg.js对node版本是有要求的，node&gt; 8.x...","permalink":"/post/81-egg.js","photos":[],"count_time":{"symbolsCount":"6.1k","symbolsTime":"6 mins."},"categories":[],"tags":[{"name":"egg","slug":"egg","count":4,"path":"api/tags/egg.json"}],"author":{"name":"Jude","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}