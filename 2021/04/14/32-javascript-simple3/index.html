<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<meta name="hexo-config" content="{&quot;hostname&quot;:&quot;issummer.cn&quot;,&quot;root&quot;:&quot;/&quot;,&quot;images&quot;:&quot;/images&quot;,&quot;scheme&quot;:&quot;Muse&quot;,&quot;version&quot;:&quot;8.3.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:false,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;搜索...&quot;,&quot;empty&quot;:&quot;没有找到任何搜索结果：${query}&quot;,&quot;hits_time&quot;:&quot;找到 ${hits} 个搜索结果（用时 ${time} 毫秒）&quot;,&quot;hits&quot;:&quot;找到 ${hits} 个搜索结果&quot;}}">
<meta name="description" content="对象类型和原始类型的不同之处？函数参数是对象会发生什么问题？">
<meta property="og:type" content="article">
<meta property="og:title" content="32、javascript -- 对象">
<meta property="og:url" content="http://issummer.cn/2021/04/14/32-javascript-simple3/index.html">
<meta property="og:site_name" content="Jude">
<meta property="og:description" content="对象类型和原始类型的不同之处？函数参数是对象会发生什么问题？">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-04-13T16:00:00.000Z">
<meta property="article:modified_time" content="2022-11-08T07:47:19.779Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="js">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://issummer.cn/2021/04/14/32-javascript-simple3/">



<meta name="hexo-config-page" content="{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:false,&quot;isPost&quot;:true,&quot;lang&quot;:&quot;zh-CN&quot;}">
<meta name="hexo-config-calendar" content="">
<title>32、javascript -- 对象 | Jude</title><script data-pjax src="/js/load-config.js"></script>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Jude</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95"><span class="nav-number">1.</span> <span class="nav-text">一、字符串方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#js-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.</span> <span class="nav-text">js 数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Set%E3%80%81Map%E3%80%81WeakSet-%E5%92%8C-WeakMap-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">2.0.1.</span> <span class="nav-text">Set、Map、WeakSet 和 WeakMap 的区别</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">126</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://issummer.cn/2021/04/14/32-javascript-simple3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jude">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          32、javascript -- 对象
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-14 00:00:00" itemprop="dateCreated datePublished" datetime="2021-04-14T00:00:00+08:00">2021-04-14</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-11-08 15:47:19" itemprop="dateModified" datetime="2022-11-08T15:47:19+08:00">2022-11-08</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>对象类型和原始类型的不同之处？函数参数是对象会发生什么问题？</p>
<span id="more"></span>

<p>在 JS 中，除了原始类型那么其他的都是对象类型了。<br>对象类型和原始类型不同的是：<br>原始类型存储的是值，对象类型存储的是地址（指针）。<br>当你创建了一个对象类型的时候，计算机会在内存中帮我们开辟一个空间来存放值，<br>但是我们需要找到这个空间，这个空间会拥有一个地址（指针）。</p>
<h2 id="一、字符串方法"><a href="#一、字符串方法" class="headerlink" title="一、字符串方法"></a>一、字符串方法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 将字符串的字母转换成小写</span><br><span class="hljs-keyword">const</span> str = <span class="hljs-string">&quot;Hello world&quot;</span>;<br>arr = str.split(<span class="hljs-string">&quot;&quot;</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> (item + <span class="hljs-string">&quot;&quot;</span>).toLowerCase();<br>&#125;);<br>lowerStr = arr.join(<span class="hljs-string">&quot;&quot;</span>);<br><span class="hljs-built_in">console</span>.log(lowerStr);<br><br><span class="hljs-comment">// 挑出大写字母</span><br><span class="hljs-keyword">const</span> str = <span class="hljs-string">&quot;Permission is &quot;</span>;<br>reg = <span class="hljs-regexp">/[A-Z]/g</span>;<br><span class="hljs-built_in">console</span>.log(str.match(reg).join(<span class="hljs-string">&quot;&quot;</span>));<br></code></pre></td></tr></table></figure>

<h2 id="js-数据类型"><a href="#js-数据类型" class="headerlink" title="js 数据类型"></a>js 数据类型</h2><p>基本数据类型：</p>
<blockquote>
<p>Number，String，Boolean，null，undefined，symbol，bigint</p>
</blockquote>
<p>引用数据类型:</p>
<blockquote>
<p>object function</p>
</blockquote>
<blockquote>
<p>基本数据类型是直接存储在栈中的简单数据段，占据空间小、大小固定，属于被频繁使用的数据。栈是存储基 本类型值和执行代码的空间。</p>
<p>引用数据类型是存储在堆内存中，占据空间大、大小不固定。引用数据类型在栈中存储了指针，该指针指向堆 中该实体的起始地址，当解释器寻找引用值时，会检索其在栈中的地址，取得地址后从堆中获得实体。</p>
</blockquote>
<p>基本数据类型和引用数据类型的区别：</p>
<blockquote>
<ol>
<li>堆比栈空间大，栈比堆运行速度快。</li>
<li>堆内存是无序存储，可以根据引用直接获取。</li>
<li>基础数据类型比较稳定，而且相对来说占用的内存小。</li>
<li>引用数据类型大小是动态的，而且是无限的。</li>
</ol>
</blockquote>
<p>Object.assign()：合并对象 Object.assign(target, …sources)</p>
<blockquote>
<ol>
<li>Object.assign 会将 source 里面的可枚举属性复制到 target，如果和 target 的已有属性重名，则会覆盖。</li>
<li>后续的 source 会覆盖前面的 source 的同名属性。</li>
<li>Object.assign 复制的是属性值，如果属性值是一个引用类型，那么复制的其实是引用地址，就会存在引用共享的问题。</li>
</ol>
</blockquote>
<p>Constructor:</p>
<blockquote>
<p>创建的每个函数都有一个 prototype（原型）对象，这个属性是一个指针，指向一个对象。在默认情况下，所有原型对象都会自动获得一个 constructor（构造函数）属性，这个属性是一个指向 prototype 属性所在函数的指针。当调用构造函数创建一个新实例后，该实例的内部将包含一个指针（继承自构造函数的 prototype），指向构造函数的原型对象。注意当将构造函数的 prototype 设置为等于一个以对象字面量形式创建的新对象时，constructor 属性不再指向该构造函数。</p>
</blockquote>
<p>map 和 forEach 区别</p>
<p>相同点：</p>
<blockquote>
<ol>
<li>都是循环遍历数组中的每一项</li>
<li>每次执行匿名函数都支持三个参数，参数分别为 item（当前每一项），index（索引值），arr（原数组）</li>
<li>匿名函数中的 this 都是指向 window</li>
<li>只能遍历数组</li>
</ol>
</blockquote>
<p>不同点：</p>
<blockquote>
<ol>
<li>map()会分配内存空间存储新数组并返回，forEach()不会返回数据。</li>
<li>forEach()允许 callback 更改原始数组的元素。map()返回新的数组。</li>
</ol>
</blockquote>
<p>for…of:</p>
<blockquote>
<p>es6 新增的一个遍历方法，但<strong>只限于迭代器(iterator)</strong>, 所以普通的对象用 for..of 遍历<br>是会报错的。</p>
<p>包括 Array, Map, Set, String, TypedArray, arguments 对象</p>
</blockquote>
<p>indexOf str.indexOf(searchValue [, fromIndex]) searchValue：要被查找的字符串值。</p>
<blockquote>
<p>查找的字符串 searchValue 的<strong>第一次</strong>出现的索引，如果没有找到，则返回-1。</p>
<p>若被查找的字符串 searchValue 是一个空字符串，则返回 fromIndex。如果 fromIndex 值为空，或者 fromIndex 值小于被查找的字符串的长度，返回值和以下的 fromIndex 值一样。</p>
<p>如果 fromIndex 值大于等于字符串的长度，将会直接返回字符串的长度（str.length）</p>
<p>严格区分大小写</p>
<p>在使用 indexOf 检索数组时，用‘===’去匹配，意味着会检查数据类型</p>
</blockquote>
<p>Iframe 的优缺点？</p>
<p>优点：</p>
<blockquote>
<ol>
<li>iframe 能够原封不动的把嵌入的网页展现出来。</li>
<li>如果有多个网页引用 iframe，那么你只需要修改 iframe 的内容，就可以实现调用的每一个页面内容的更改，方便快捷。</li>
<li>网页如果为了统一风格，头部和版本都是一样的，就可以写成一个页面，用 iframe 来嵌套，可以增加代码的可重用。</li>
<li>如果遇到加载缓慢的第三方内容如图标和广告，这些问题可以由 iframe 来解决。</li>
</ol>
</blockquote>
<p>缺点：</p>
<blockquote>
<ol>
<li>iframe 会阻塞主页面的 onload 事件；</li>
<li>iframe 和主页面共享连接池，而浏览器对相同域的连接有限制，所以会影响页面的并行加载。会产生很多页面，不容易管理。</li>
<li>iframe 框架结构有时会让人感到迷惑，如果框架个数多的话，可能会出现上下、左右滚动条，会分散访问者的注意力，用户体验度差。</li>
<li>代码复杂，无法被一些搜索引擎索引到，这一点很关键，现在的搜索引擎爬虫还不能很好的处理 iframe 中的内容，所以使用 iframe 会不利于搜索引擎优化（SEO）。</li>
<li>很多的移动设备无法完全显示框架，设备兼容性差。</li>
<li>iframe 框架页面会增加服务器的 http 请求，对于大型网站是不可取的。</li>
</ol>
</blockquote>
<p>作用域：</p>
<blockquote>
<p>作用域就是一个独立的地盘，让变量不会外泄、暴露出去。也就是说作用域最大的用处就是隔离变量，不同作用域下同名变量不会有冲突。</p>
<p><strong>ES6 之前 JavaScript 没有块级作用域,只有全局作用域和函数作用域</strong>。ES6 的到来，为我们提供了‘块级作用域’,可通过新增命令 let 和 const 来体现。</p>
</blockquote>
<p>js 的 arguments 相关问题</p>
<blockquote>
<p>在 js 中，我们在调用有参数的函数时，当往这个调用的有参函数传参时，js 会把所传的参数全部存到一个叫 arguments 的对象里面。它是一个<strong>类数组数据由来</strong></p>
<p>Javascrip 中每个函数都会有一个 Arguments 对象实例 arguments，引用着函数的实参。它是寄生在 js 函数当中的，不能显式创建，arguments 对象只有函数开始时才可用</p>
</blockquote>
<p>instanceof 原理：判断实例属于什么类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 实现方法</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">new_instance_of</span>(<span class="hljs-params">leftVaule, rightVaule</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> rightProto = rightVaule.prototype; <span class="hljs-comment">// 取右表达式的 prototype 值</span><br>  leftVaule = leftVaule.__proto__; <span class="hljs-comment">// 取左表达式的__proto__值</span><br>  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>    <span class="hljs-keyword">if</span> (leftVaule === <span class="hljs-literal">null</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (leftVaule === rightProto) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>    leftVaule = leftVaule.__proto__;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>数组去重：</p>
<p>1、es6 Set 方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unique</span>(<span class="hljs-params">arr</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.from(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(arr));<br>&#125;<br><span class="hljs-comment">// 无法去除 &#123;&#125; 空对象</span><br><br><span class="hljs-comment">// 简写</span><br>[...new <span class="hljs-built_in">Set</span>(arr)];<br></code></pre></td></tr></table></figure>

<p>2、es5 利用 for 循环嵌套，然后 splice 去重</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unique</span>(<span class="hljs-params">arr</span>) </span>&#123;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = i + <span class="hljs-number">1</span>; j &lt; arr.length; j++) &#123;<br>      <span class="hljs-keyword">if</span> (arr[i] == arr[j]) &#123;<br>        <span class="hljs-comment">//第一个等同于第二个，splice方法删除第二个</span><br>        arr.splice(j, <span class="hljs-number">1</span>);<br>        j--;<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> arr;<br>&#125;<br><span class="hljs-keyword">var</span> arr = [<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-string">&quot;NaN&quot;</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  &#123;&#125;,<br>  &#123;&#125;,<br>];<br><span class="hljs-built_in">console</span>.log(unique(arr)); <span class="hljs-comment">//[1, &quot;true&quot;, 15, false, undefined, NaN, NaN, &quot;NaN&quot;, &quot;a&quot;, &#123;…&#125;, &#123;…&#125;]     //NaN和&#123;&#125;没有去重，两个null直接消失了</span><br></code></pre></td></tr></table></figure>

<p>3、indexOf</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unique</span>(<span class="hljs-params">arr</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Array</span>.isArray(arr)) &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;type error!&quot;</span>);<br>    <span class="hljs-keyword">return</span>;<br>  &#125;<br>  <span class="hljs-keyword">var</span> array = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;<br>    <span class="hljs-keyword">if</span> (array.indexOf(arr[i]) === -<span class="hljs-number">1</span>) &#123;<br>      array.push(arr[i]);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> array;<br>&#125;<br><span class="hljs-keyword">var</span> arr = [<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-string">&quot;NaN&quot;</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  &#123;&#125;,<br>  &#123;&#125;,<br>];<br><span class="hljs-built_in">console</span>.log(unique(arr));<br><span class="hljs-comment">// [1, &quot;true&quot;, true, 15, false, undefined, null, NaN, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;…&#125;, &#123;…&#125;]  //NaN、&#123;&#125;没有去重</span><br></code></pre></td></tr></table></figure>

<p>4、sort</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unique</span>(<span class="hljs-params">arr</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Array</span>.isArray(arr)) &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;type error!&quot;</span>);<br>    <span class="hljs-keyword">return</span>;<br>  &#125;<br>  arr = arr.sort();<br>  <span class="hljs-keyword">var</span> arrry = [arr[<span class="hljs-number">0</span>]];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; arr.length; i++) &#123;<br>    <span class="hljs-keyword">if</span> (arr[i] !== arr[i - <span class="hljs-number">1</span>]) &#123;<br>      arrry.push(arr[i]);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> arrry;<br>&#125;<br><span class="hljs-keyword">var</span> arr = [<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-string">&quot;NaN&quot;</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  &#123;&#125;,<br>  &#123;&#125;,<br>];<br><span class="hljs-built_in">console</span>.log(unique(arr));<br><span class="hljs-comment">// [0, 1, 15, &quot;NaN&quot;, NaN, NaN, &#123;…&#125;, &#123;…&#125;, &quot;a&quot;, false, null, true, &quot;true&quot;, undefined]      //NaN、&#123;&#125;没有去重</span><br></code></pre></td></tr></table></figure>

<p>5、includes</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unique</span>(<span class="hljs-params">arr</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Array</span>.isArray(arr)) &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;type error!&quot;</span>);<br>    <span class="hljs-keyword">return</span>;<br>  &#125;<br>  <span class="hljs-keyword">var</span> array = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;<br>    <span class="hljs-keyword">if</span> (!array.includes(arr[i])) &#123;<br>      <span class="hljs-comment">//includes 检测数组是否有某个值</span><br>      array.push(arr[i]);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> array;<br>&#125;<br><span class="hljs-keyword">var</span> arr = [<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-string">&quot;NaN&quot;</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  &#123;&#125;,<br>  &#123;&#125;,<br>];<br><span class="hljs-built_in">console</span>.log(unique(arr));<br><span class="hljs-comment">//[1, &quot;true&quot;, true, 15, false, undefined, null, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;…&#125;, &#123;…&#125;]     //&#123;&#125;没有去重</span><br></code></pre></td></tr></table></figure>

<p>6、<strong>hasOwnProperty</strong>:利用 hasOwnProperty 判断是否存在对象属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unique</span>(<span class="hljs-params">arr</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> obj = &#123;&#125;;<br>  <span class="hljs-keyword">return</span> arr.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item, index, arr</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> obj.hasOwnProperty(<span class="hljs-keyword">typeof</span> item + item)<br>      ? <span class="hljs-literal">false</span><br>      : (obj[<span class="hljs-keyword">typeof</span> item + item] = <span class="hljs-literal">true</span>);<br>  &#125;);<br>&#125;<br><span class="hljs-keyword">var</span> arr = [<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-string">&quot;NaN&quot;</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  &#123;&#125;,<br>  &#123;&#125;,<br>];<br><span class="hljs-built_in">console</span>.log(unique(arr));<br><span class="hljs-comment">//[1, &quot;true&quot;, true, 15, false, undefined, null, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;…&#125;]   //所有的都去重了</span><br></code></pre></td></tr></table></figure>

<p>7、filter</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unique</span>(<span class="hljs-params">arr</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> arr.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item, index, arr</span>) </span>&#123;<br>    <span class="hljs-comment">//当前元素，在原始数组中的第一个索引==当前索引值，否则返回当前元素</span><br>    <span class="hljs-keyword">return</span> arr.indexOf(item, <span class="hljs-number">0</span>) === index;<br>  &#125;);<br>&#125;<br><span class="hljs-keyword">var</span> arr = [<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-string">&quot;NaN&quot;</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  &#123;&#125;,<br>  &#123;&#125;,<br>];<br><span class="hljs-built_in">console</span>.log(unique(arr));<br><span class="hljs-comment">//[1, &quot;true&quot;, true, 15, false, undefined, null, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;…&#125;, &#123;…&#125;]</span><br></code></pre></td></tr></table></figure>

<p>8、递归去重</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unique</span>(<span class="hljs-params">arr</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> array = arr;<br>  <span class="hljs-keyword">var</span> len = array.length;<br><br>  array.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>&#123;<br>    <span class="hljs-comment">//排序后更加方便去重</span><br>    <span class="hljs-keyword">return</span> a - b;<br>  &#125;);<br><br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loop</span>(<span class="hljs-params">index</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-number">1</span>) &#123;<br>      <span class="hljs-keyword">if</span> (array[index] === array[index - <span class="hljs-number">1</span>]) &#123;<br>        array.splice(index, <span class="hljs-number">1</span>);<br>      &#125;<br>      loop(index - <span class="hljs-number">1</span>); <span class="hljs-comment">//递归loop，然后数组去重</span><br>    &#125;<br>  &#125;<br>  loop(len - <span class="hljs-number">1</span>);<br>  <span class="hljs-keyword">return</span> array;<br>&#125;<br><span class="hljs-keyword">var</span> arr = [<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-string">&quot;NaN&quot;</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  &#123;&#125;,<br>  &#123;&#125;,<br>];<br><span class="hljs-built_in">console</span>.log(unique(arr));<br><span class="hljs-comment">//[1, &quot;a&quot;, &quot;true&quot;, true, 15, false, 1, &#123;…&#125;, null, NaN, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;…&#125;, undefined]</span><br></code></pre></td></tr></table></figure>

<p>9、Map 数据结构去重</p>
<blockquote>
<p>创建一个空 Map 数据结构，遍历需要去重的数组，把数组的每一个元素作为 key 存到 Map 中。由于 Map 中不会出现相同的 key 值，所以最终得到的就是去重后的结果。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">arrayNonRepeatfy</span>(<span class="hljs-params">arr</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();<br>  <span class="hljs-keyword">let</span> array = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(); <span class="hljs-comment">// 数组用于返回结果</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;<br>    <span class="hljs-keyword">if</span> (map.has(arr[i])) &#123;<br>      <span class="hljs-comment">// 如果有该key值</span><br>      map.set(arr[i], <span class="hljs-literal">true</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      map.set(arr[i], <span class="hljs-literal">false</span>); <span class="hljs-comment">// 如果没有该key值</span><br>      array.push(arr[i]);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> array;<br>&#125;<br><span class="hljs-keyword">var</span> arr = [<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-string">&quot;NaN&quot;</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  &#123;&#125;,<br>  &#123;&#125;,<br>];<br><span class="hljs-built_in">console</span>.log(unique(arr));<br><span class="hljs-comment">//[1, &quot;a&quot;, &quot;true&quot;, true, 15, false, 1, &#123;…&#125;, null, NaN, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;…&#125;, undefined]</span><br></code></pre></td></tr></table></figure>

<p>10、<strong>利用 reduce+includes</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unique</span>(<span class="hljs-params">arr</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> arr.reduce(<br>    <span class="hljs-function">(<span class="hljs-params">prev, cur</span>) =&gt;</span> (prev.includes(cur) ? prev : [...prev, cur]),<br>    []<br>  );<br>&#125;<br><span class="hljs-keyword">var</span> arr = [<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-number">1</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-string">&quot;true&quot;</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-literal">true</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-number">15</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">false</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">undefined</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">null</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-literal">NaN</span>,<br>  <span class="hljs-string">&quot;NaN&quot;</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-number">0</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  &#123;&#125;,<br>  &#123;&#125;,<br>];<br><span class="hljs-built_in">console</span>.log(unique(arr));<br><span class="hljs-comment">// [1, &quot;true&quot;, true, 15, false, undefined, null, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;…&#125;, &#123;…&#125;]</span><br></code></pre></td></tr></table></figure>

<p>null 和 undefined 的区别</p>
<blockquote>
<p>undefined 表示一个变量自然的、最原始的状态值，而 null 则表示一个变量被人为的设置为空对象，而不是原始状态。所以，在实际使用过程中，为了保证变量所代表的语义，不要对一个变量显式的赋值 undefined，当需要释放一个对象时，直接赋值为 null 即可。</p>
</blockquote>
<p>undefined:</p>
<ol>
<li>声明了一个变量，但没有赋值</li>
<li>访问对象上不存在的属性</li>
<li>函数定义了形参，但没有传递实参</li>
<li>使用 void 对表达式求值</li>
</ol>
<p>null:空值</p>
<blockquote>
<p><strong>表示 一个对象被人为的重置为空对象，而非一个变量最原始的状态 。</strong> 在内存里的表示就是，栈中的变量没有指向堆中的内存对象</p>
</blockquote>
<p>typeof null 为什么是 object？</p>
<blockquote>
<p>null 有属于自己的类型 Null，而不属于 Object 类型，typeof 之所以会判定为 Object 类型，是因为 JavaScript 数据类型在底层都是以二进制的形式表示的，<strong>二进制的前三位为 0 会被 typeof 判断为对象类型</strong>，而 null 的二进制位恰好都是 0 ，因此，null 被误判断为 Object 类型。</p>
</blockquote>
<p>类数组转换为数组的方法：</p>
<blockquote>
<ul>
<li>使用 Array.from()</li>
<li>使用 Array.prototype.slice.call()</li>
<li>使用 Array.prototype.forEach()进行属性遍历并组成新的数组</li>
</ul>
<p>// 转换后的数组长度由 length 属性决定。索引不连续时转换结果是连续的，会自动补位。</p>
</blockquote>
<p>数组转树</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">arrayToTree</span>(<span class="hljs-params">array</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> root = array[<span class="hljs-number">0</span>];<br>  array.shift();<br>  <span class="hljs-keyword">let</span> tree = &#123;<br>    <span class="hljs-attr">id</span>: root.id,<br>    <span class="hljs-attr">val</span>: root.val,<br>    <span class="hljs-attr">children</span>: array.length &gt; <span class="hljs-number">0</span> ? toTree(root.id, array) : [],<br>  &#125;;<br>  <span class="hljs-keyword">return</span> tree;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toTree</span>(<span class="hljs-params">parenId, array</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> children = [];<br>  <span class="hljs-keyword">let</span> len = array.length;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>    <span class="hljs-keyword">let</span> node = array[i];<br>    <span class="hljs-keyword">if</span> (node.parentId === parenId) &#123;<br>      children.push(&#123;<br>        <span class="hljs-attr">id</span>: node.id,<br>        <span class="hljs-attr">val</span>: node.val,<br>        <span class="hljs-attr">children</span>: toTree(node.id, array),<br>      &#125;);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> children;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="Set、Map、WeakSet-和-WeakMap-的区别"><a href="#Set、Map、WeakSet-和-WeakMap-的区别" class="headerlink" title="Set、Map、WeakSet 和 WeakMap 的区别"></a>Set、Map、WeakSet 和 WeakMap 的区别</h4><blockquote>
<p><strong>Set</strong></p>
<ol>
<li>成员不能重复；</li>
<li>只有键值，没有键名，有点类似数组；</li>
<li>可以遍历，方法有 add、delete、has</li>
</ol>
<p><strong>WeakSet</strong></p>
<ol>
<li>成员都是对象（引用）；</li>
<li>成员都是弱引用，随时可以消失（不计入垃圾回收机制）。可以用来保存 DOM 节点，不容易造成内存泄露；</li>
<li>不能遍历，方法有 add、delete、has；</li>
</ol>
<p><strong>Map</strong></p>
<ol>
<li>本质上是键值对的集合，类似集合；</li>
<li>可以遍历，方法很多，可以跟各种数据格式转换；</li>
</ol>
<p><strong>WeakMap</strong></p>
<ol>
<li>只接收对象为键名（null 除外），不接受其他类型的值作为键名；</li>
<li>键名指向的对象，不计入垃圾回收机制；</li>
<li>不能遍历，方法同 get、set、has、delete；</li>
</ol>
</blockquote>
<p>造成内存泄漏的情况</p>
<blockquote>
<ol>
<li>意外的全局变量；</li>
<li>闭包；</li>
<li>未被清空的定时器；</li>
<li>未被销毁的事件监听；</li>
<li>DOM 引用；</li>
</ol>
</blockquote>
<p>数据类型的判断方法：</p>
<blockquote>
<ol>
<li> 使用 typeof 检测当需要判断变量是否是 number, string, boolean, function, undefined 等类型时，可以使用 typeof 进行判断。</li>
<li> 使用 instanceof 检测 instanceof 运算符与 typeof 运算符相似，用于识别正在处理的对象的类型。与 typeof 方法不同的是，instanceof 方法要求开发者明确地确认对象为某特定类型。</li>
<li> 使用 constructor 检测 constructor 本来是原型对象上的属性，指向构造函数。但是根据实例对象寻找属性的顺序，若实例对象上没有实例属性或方法时，就去原型链上寻找，因此，实例对象也是能使用 constructor 属性的。</li>
</ol>
</blockquote>
<p>什么是 promise 和 async await 以及它们的区别</p>
<blockquote>
<p><strong>Promise</strong> 是异步编程的一种解决方案，比传统的解决方案——回调函数和事件——更合理和更强大，简单地说，Promise 好比容器，里面存放着一些未来才会执行完毕（异步）的事件的结果，而这些结果一旦生成是无法改变的</p>
<p><strong>async await</strong>也是异步编程的一种解决方案，他遵循的是 Generator 函数的语法糖，他拥有内置执行器，不需要额外的调用直接会自动执行并输出结果，它返回的是一个 Promise 对象。</p>
</blockquote>
<p>区别：</p>
<blockquote>
<ol>
<li>Promise 的出现解决了传统 callback 函数导致的“地域回调”问题，但它的语法导致了它向纵向发展行成了一个回调链，遇到复杂的业务场景，这样的语法显然也是不美观的。而 async await 代码看起来会简洁些，使得异步代码看起来像同步代码，await 的本质是可以提供等同于”同步效果“的等待异步返回能力的语法糖，只有这一句代码执行完，才会执行下一句。</li>
<li>async await 与 Promise 一样，是非阻塞的。</li>
<li>async await 是基于 Promise 实现的，可以说是改良版的 Promise，它不能用于普通的回调函数。</li>
</ol>
</blockquote>
<p>js 实现 sleep</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sleep</span>(<span class="hljs-params">time</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, time));<br>&#125;<br><br><span class="hljs-keyword">const</span> t1 = +<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();<br>sleep(<span class="hljs-number">3000</span>).then(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> t2 = +<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();<br>  <span class="hljs-built_in">console</span>.log(t2 - t1);<br>&#125;);<br></code></pre></td></tr></table></figure>

<blockquote>
<p>优点：这种方式实际上是用了 setTimeout，没有形成进程阻塞，不会造成性能和负载问题。</p>
<p>缺点：虽然不像 callback 套那么多层，但仍不怎么美观，而且当我们需要在某过程中需要停止执行（或者在中途返回了错误的值），还必须得层层判断后跳出，非常麻烦，而且这种异步并不是那么彻底，还是看起来别扭</p>
</blockquote>
<p><strong>Event Loop</strong>执行顺序</p>
<blockquote>
<ol>
<li>所有任务都在主线程上执行，形成一个执行栈(Execution Context Stack)</li>
<li>在主线程之外还存在一个任务队列(Task Queen),系统把异步任务放到任务队列中，然后主线程继续执行后续的任务</li>
<li>一旦执行栈中所有的任务执行完毕，系统就会读取任务队列。如果这时异步任务已结束等待状态，就会从任务队列进入执行栈，恢复执行</li>
<li>主线程不断重复上面的第三步</li>
</ol>
</blockquote>
<p>宏任务 Macrotask 宏任务是指 Event Loop 在<strong>每个阶段</strong>执行的任务</p>
<p>微任务 Microtask 微任务是指 Event Loop 在<strong>每个阶段之间</strong>执行的任务</p>
<p>宏任务队列包含任务: A1, A2 , A3</p>
<p>微任务队列包含任务: B1, B2 , B3</p>
<p>执行顺序为，首先执行宏任务队列开头的任务，也就是 A1 任务，执行完毕后，在执行微任务队列里的所有任务，也就是依次执行 B1, B2 , B3，执行完后清空微任务队中的任务，接着执行宏任务中的第二个任务 A2，依次循环。</p>
<p>宏任务 Macrotask 队列真实包含任务：</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">script(主程序代码),setTimeout, setInterval, setImmediate, I/O, UI rendering<br></code></pre></td></tr></table></figure>
</blockquote>
<p>微任务 Microtask 队列真实包含任务:</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">process.nextTick, Promises, Object.observe, MutationObserver<br></code></pre></td></tr></table></figure>
</blockquote>
<p>执行顺序：</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">script(主程序代码)—&gt;process.nextTick—&gt;Promises...——&gt;setTimeout——&gt;setInterval——&gt;setImmediate——&gt; I/O——&gt;UI rendering<br></code></pre></td></tr></table></figure>
</blockquote>
<p>示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">console</span>.time(<span class="hljs-string">&quot;start&quot;</span>);<br><br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>);<br>&#125;, <span class="hljs-number">10</span>);<br><br>setImmediate(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>);<br>&#125;);<br><br><span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>);<br>  resolve();<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">4</span>);<br>&#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">5</span>);<br>  <span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">&quot;start&quot;</span>);<br>&#125;);<br><br><span class="hljs-built_in">console</span>.log(<span class="hljs-number">6</span>);<br><br>process.nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">7</span>);<br>&#125;);<br><br><span class="hljs-built_in">console</span>.log(<span class="hljs-number">8</span>);<br></code></pre></td></tr></table></figure>

<p>结果：3——&gt;4——&gt;6——&gt;8——&gt;7——&gt;5——&gt;start: XXXXms——&gt;1——&gt;2</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/js/" rel="tag"># js</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/03/23/31-back/" rel="prev" title="31、解决点击手机虚拟返回键退出应用">
                  <i class="fa fa-chevron-left"></i> 31、解决点击手机虚拟返回键退出应用
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/04/28/33-time/" rel="next" title="33、时间格式化">
                  33、时间格式化 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>





<script src="/js/comments.js"></script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
