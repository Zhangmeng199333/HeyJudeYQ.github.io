<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>94、使用vue3+element-plus写后台管理系统：（四）</title><meta name="description" content="呦呦鹿鸣，食野之苹"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="包括后台项目 layout 基础架构、用户主动和被动退出、动态 menu 菜单、结构路由表、侧边菜单栏的收缩、组件状态驱动的动态 CSS 值


layout 基础架构布局
layout 基本布局结构包括：Menu 菜单栏、NavBar 顶部导航栏（包含个人信息）、Main（页面主要展示区域）
1、登录成功进入首页之后，整个首页也就是上面说的分为三个部分创建三个对应的组件

layout/components/Sidebar/index.vuelayout/components/Navbar.vuelayout/components/AppMain.vue

2、在layout/index引入创建的三个组件123import Navbar from &amp;quot;./components/Navbar.vue.."><meta name="generator" content="Hexo 5.4.1"></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Jude's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">94、使用vue3+element-plus写后台管理系统：（四）</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F%E8%BF%9B%E5%85%A5%E9%A6%96%E9%A1%B5%E4%B9%8B%E5%90%8E%EF%BC%8C%E6%95%B4%E4%B8%AA%E9%A6%96%E9%A1%B5%E4%B9%9F%E5%B0%B1%E6%98%AF%E4%B8%8A%E9%9D%A2%E8%AF%B4%E7%9A%84%E5%88%86%E4%B8%BA%E4%B8%89%E4%B8%AA%E9%83%A8%E5%88%86"><span class="toc-text">1、登录成功进入首页之后，整个首页也就是上面说的分为三个部分</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%9C%A8layout-index%E5%BC%95%E5%85%A5%E5%88%9B%E5%BB%BA%E7%9A%84%E4%B8%89%E4%B8%AA%E7%BB%84%E4%BB%B6"><span class="toc-text">2、在layout&#x2F;index引入创建的三个组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81layout-index%E5%AF%B9%E5%BA%94%E7%9A%84%E5%B8%83%E5%B1%80"><span class="toc-text">3、layout&#x2F;index对应的布局</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%9C%A8-styles-%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E5%AE%9A%E4%B9%89-3-%E4%B8%AA-scss-%E6%96%87%E4%BB%B6"><span class="toc-text">4、在 styles 文件夹下定义 3 个 scss 文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E5%88%9B%E5%BB%BA%E7%9A%84%E4%B8%89%E4%B8%AA-scss-%E6%96%87%E4%BB%B6%E5%AF%BC%E5%85%A5%E5%88%B0-styles-index-scss"><span class="toc-text">5、创建的三个 scss 文件导入到 styles&#x2F;index.scss</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81%E4%BE%A7%E8%BE%B9%E6%A0%8F%E8%A6%81%E5%AE%9E%E7%8E%B0%E4%B8%BB%E9%A2%98%E6%9B%B4%E6%8D%A2%E5%8A%9F%E8%83%BD%EF%BC%8Csidebar-%E8%B5%8B%E5%80%BC%E5%8A%A8%E6%80%81%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2"><span class="toc-text">6、侧边栏要实现主题更换功能，sidebar 赋值动态背景颜色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%E3%80%81Navbar%E3%80%81Sidebar%E3%80%81AppMain-%E7%BB%84%E4%BB%B6%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BB%A3%E7%A0%81%E5%8D%A0%E4%BD%8D%E5%8F%8A%E6%A0%B7%E5%BC%8F%E4%BF%AE%E6%94%B9"><span class="toc-text">7、Navbar、Sidebar、AppMain 组件初始化代码占位及样式修改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%E3%80%81%E7%94%A8%E6%88%B7%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF"><span class="toc-text">8、用户个人信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9%E3%80%81element-plus-%E7%9A%84-dropdown-avatar-%E7%BB%84%E4%BB%B6%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E5%A4%B4%E5%83%8F%E4%BF%A1%E6%81%AF%E5%8F%8A%E7%94%A8%E6%88%B7%E4%B8%BB%E5%8A%A8%E9%80%80%E5%87%BA%E5%8A%9F%E8%83%BD"><span class="toc-text">9、element-plus 的 dropdown avatar 组件实现用户头像信息及用户主动退出功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10%E3%80%81%E4%B8%BB%E5%8A%A8%E9%80%80%E5%87%BA%E5%8A%9F%E8%83%BD-%E5%9C%A8-store-moduels-user-js-%E4%B8%AD%EF%BC%8C%E6%B8%85%E9%99%A4%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E3%80%81%E6%B8%85%E9%99%A4%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%E3%80%81%E8%BF%94%E5%9B%9E%E5%88%B0%E7%99%BB%E5%BD%95%E9%A1%B5"><span class="toc-text">10、主动退出功能:在 store&#x2F;moduels&#x2F;user.js 中，清除当前用户缓存数据、清除用户权限相关配置、返回到登录页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11%E3%80%81%E8%A2%AB%E5%8A%A8%E9%80%80%E5%87%BA%E5%8A%9F%E8%83%BD%EF%BC%9Atoken-%E8%BF%87%E6%9C%9F%E3%80%81%E5%8D%95%E4%B8%80%E8%B4%A6%E6%88%B7%E5%90%8C%E6%97%B6%E7%99%BB%E5%BD%95"><span class="toc-text">11、被动退出功能：token 过期、单一账户同时登录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12%E3%80%81%E4%B8%B4%E6%97%B6menu%E8%8F%9C%E5%8D%95"><span class="toc-text">12、临时menu菜单</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13%E3%80%81%E5%8A%A8%E6%80%81-menu-%E8%8F%9C%E5%8D%95%E5%A4%84%E7%90%86"><span class="toc-text">13、动态 menu 菜单处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14%E3%80%81%E5%88%9B%E5%BB%BA%E9%A1%B5%E9%9D%A2%E7%BB%84%E4%BB%B6"><span class="toc-text">14、创建页面组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15%E3%80%81%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E5%A4%84%E7%90%86"><span class="toc-text">15、用户权限处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16%E3%80%81%E8%A7%A3%E6%9E%90%E8%B7%AF%E7%94%B1%E8%A1%A8%EF%BC%8C%E8%8E%B7%E5%8F%96%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E6%8D%AE"><span class="toc-text">16、解析路由表，获取结构化数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17%E3%80%81%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E9%97%AE%E9%A2%98"><span class="toc-text">17、处理数据结构问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18%E3%80%81SidebarMenu-%E8%B0%83%E7%94%A8-filterRouters%E3%80%81generateMenus-%E6%96%B9%E6%B3%95"><span class="toc-text">18、SidebarMenu 调用 filterRouters、generateMenus 方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#19%E3%80%81%E7%94%9F%E6%88%90%E5%8A%A8%E6%80%81-menu-%E8%8F%9C%E5%8D%95"><span class="toc-text">19、生成动态 menu 菜单</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#20%E3%80%81%E8%8F%9C%E5%8D%95%E7%9A%84%E4%BC%B8%E7%BC%A9%E5%8A%9F%E8%83%BD"><span class="toc-text">20、菜单的伸缩功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21%E3%80%81%E5%88%9B%E5%BB%BA%E6%94%B6%E7%BC%A9-icon-%E7%BB%84%E4%BB%B6-hamburger"><span class="toc-text">21、创建收缩 icon 组件 hamburger</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#22%E3%80%81SidebarHeader-%E5%A4%84%E7%90%86"><span class="toc-text">22、SidebarHeader 处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#23%E3%80%81%E7%BB%84%E4%BB%B6%E7%8A%B6%E6%80%81%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%8A%A8%E6%80%81-CSS-%E5%80%BC"><span class="toc-text">23、组件状态驱动的动态 CSS 值</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/vue3"><i class="tag post-item-tag">vue3</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">94、使用vue3+element-plus写后台管理系统：（四）</h1><time class="has-text-grey" datetime="2022-11-19T12:00:00.000Z">2022-11-19</time><article class="mt-2 post-content"><p>包括后台项目 layout 基础架构、用户主动和被动退出、动态 menu 菜单、结构路由表、侧边菜单栏的收缩、组件状态驱动的动态 CSS 值</p>
<span id="more"></span>

<p>layout 基础架构布局</p>
<p>layout 基本布局结构包括：Menu 菜单栏、NavBar 顶部导航栏（包含个人信息）、Main（页面主要展示区域）</p>
<h4 id="1、登录成功进入首页之后，整个首页也就是上面说的分为三个部分"><a href="#1、登录成功进入首页之后，整个首页也就是上面说的分为三个部分" class="headerlink" title="1、登录成功进入首页之后，整个首页也就是上面说的分为三个部分"></a>1、登录成功进入首页之后，整个首页也就是上面说的分为三个部分</h4><p>创建三个对应的组件</p>
<blockquote>
<p>layout/components/Sidebar/index.vue<br>layout/components/Navbar.vue<br>layout/components/AppMain.vue</p>
</blockquote>
<h4 id="2、在layout-index引入创建的三个组件"><a href="#2、在layout-index引入创建的三个组件" class="headerlink" title="2、在layout/index引入创建的三个组件"></a>2、在<code>layout/index</code>引入创建的三个组件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> Navbar <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Navbar.vue&quot;</span>;<br><span class="hljs-keyword">import</span> Sidebar <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Sidebar/index.vue&quot;</span>;<br><span class="hljs-keyword">import</span> AppMain <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/AppMain&quot;</span>;<br></code></pre></td></tr></table></figure>

<h4 id="3、layout-index对应的布局"><a href="#3、layout-index对应的布局" class="headerlink" title="3、layout/index对应的布局"></a>3、<code>layout/index</code>对应的布局</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app-wrapper&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 左侧 menu --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">sidebar</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;sidebar-container&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;main-container&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;fixed-header&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 顶部的 navbar --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">navbar</span> /&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- 内容区 --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">app-main</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="4、在-styles-文件夹下定义-3-个-scss-文件"><a href="#4、在-styles-文件夹下定义-3-个-scss-文件" class="headerlink" title="4、在 styles 文件夹下定义 3 个 scss 文件"></a>4、在 styles 文件夹下定义 3 个 scss 文件</h4><blockquote>
<p>variables.scss 定义常量<br>mixin.scss 定义通用的 css<br>sidebar.scss 处理 menu 菜单的样式</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs css">// variables<span class="hljs-selector-class">.scss</span><br>// sidebar的样式  定义如下常量将其导出<br>$menuText: <span class="hljs-number">#bfcbd9</span>;<br>$menuActiveText: <span class="hljs-number">#ffffff</span>;<br>$subMenuActiveText: <span class="hljs-number">#f4f4f5</span>;<br><br>$menuBg: <span class="hljs-number">#304156</span>;<br>$menuHover: <span class="hljs-number">#263445</span>;<br><br>$subMenuBg: <span class="hljs-number">#1f2d3d</span>;<br>$subMenuHover: <span class="hljs-number">#001528</span>;<br><br>$sideBarWidth: <span class="hljs-number">210px</span>;<br><br>// JS 与 scss 共享变量，在 scss 中通过 :export 进行导出，在 js 中可通过 ESM 进行导入<br>:export &#123;<br>  menuText: $menuText;<br>  menuActiveText: $menuActiveText;<br>  subMenuActiveText: $subMenuActiveText;<br>  menuBg: $menuBg;<br>  menuHover: $menuHover;<br>  subMenuBg: $subMenuBg;<br>  subMenuHover: $subMenuHover;<br>  sideBarWidth: $sideBarWidth;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><code>注意</code>:这里是使用 :export{ } 方法将 css 常量导出</p>
</blockquote>
<p><code>mixin.scss</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs css">// mixin<span class="hljs-selector-class">.scss</span><br><span class="hljs-keyword">@mixin</span> clearfix &#123;<br>  &amp;:after &#123;<br>    content: <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-attribute">display</span>: table;<br>    <span class="hljs-attribute">clear</span>: both;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">@mixin</span> scrollBar &#123;<br>  &amp;::-webkit-scrollbar-track-piece &#123;<br>    background: <span class="hljs-number">#d3dce6</span>;<br>  &#125;<br><br>  &amp;::-webkit-scrollbar &#123;<br>    width: <span class="hljs-number">6px</span>;<br>  &#125;<br><br>  &amp;::-webkit-scrollbar-thumb &#123;<br>    background: <span class="hljs-number">#99a9bf</span>;<br>    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">20px</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">@mixin</span> relative &#123;<br>  <span class="hljs-attribute">position</span>: relative;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>sidebar.scss</code></p>
<details>
<summary>点我展示代码</summary>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><code class="hljs css">// sidebar<span class="hljs-selector-class">.scss</span><br><span class="hljs-selector-id">#app</span> &#123;<br>  <span class="hljs-selector-class">.main-container</span> &#123;<br>    <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100%</span>;<br>    <span class="hljs-attribute">transition</span>: margin-left <span class="hljs-number">0.28s</span>;<br>    <span class="hljs-attribute">margin-left</span>: $sideBarWidth;<br>    <span class="hljs-attribute">position</span>: relative;<br>  &#125;<br><br>  <span class="hljs-selector-class">.sidebar-container</span> &#123;<br>    <span class="hljs-attribute">transition</span>: width <span class="hljs-number">0.28s</span>;<br>    <span class="hljs-attribute">width</span>: $sideBarWidth <span class="hljs-meta">!important</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>    <span class="hljs-attribute">position</span>: fixed;<br>    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1001</span>;<br>    <span class="hljs-attribute">overflow</span>: hidden;<br><br>    // 重置 element-plus 的css<br>    <span class="hljs-selector-class">.horizontal-collapse-transition</span> &#123;<br>      <span class="hljs-attribute">transition</span>: <span class="hljs-number">0s</span> width ease-in-out, <span class="hljs-number">0s</span> padding-left ease-in-out,<br>        <span class="hljs-number">0s</span> padding-right ease-in-out;<br>    &#125;<br><br>    <span class="hljs-selector-class">.scrollbar-wrapper</span> &#123;<br>      <span class="hljs-attribute">overflow-x</span>: hidden <span class="hljs-meta">!important</span>;<br>    &#125;<br><br>    <span class="hljs-selector-class">.el-scrollbar__bar</span><span class="hljs-selector-class">.is-vertical</span> &#123;<br>      <span class="hljs-attribute">right</span>: <span class="hljs-number">0px</span>;<br>    &#125;<br><br>    <span class="hljs-selector-class">.el-scrollbar</span> &#123;<br>      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>    &#125;<br><br>    &amp;<span class="hljs-selector-class">.has-logo</span> &#123;<br>      <span class="hljs-selector-class">.el-scrollbar</span> &#123;<br>        <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-number">50px</span>);<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-selector-class">.is-horizontal</span> &#123;<br>      <span class="hljs-attribute">display</span>: none;<br>    &#125;<br><br>    <span class="hljs-selector-tag">a</span> &#123;<br>      <span class="hljs-attribute">display</span>: inline-block;<br>      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>      <span class="hljs-attribute">overflow</span>: hidden;<br>    &#125;<br><br>    <span class="hljs-selector-class">.svg-icon</span> &#123;<br>      <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">16px</span>;<br>    &#125;<br><br>    <span class="hljs-selector-class">.sub-el-icon</span> &#123;<br>      <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">12px</span>;<br>      <span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">2px</span>;<br>    &#125;<br><br>    <span class="hljs-selector-class">.el-menu</span> &#123;<br>      <span class="hljs-attribute">border</span>: none;<br>      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span> <span class="hljs-meta">!important</span>;<br>    &#125;<br><br>    <span class="hljs-selector-class">.is-active</span> &gt; <span class="hljs-selector-class">.el-submenu__title</span> &#123;<br>      <span class="hljs-attribute">color</span>: $subMenuActiveText <span class="hljs-meta">!important</span>;<br>    &#125;<br><br>    &amp; <span class="hljs-selector-class">.nest-menu</span> <span class="hljs-selector-class">.el-submenu</span> &gt; <span class="hljs-selector-class">.el-submenu__title</span>,<br>    &amp; <span class="hljs-selector-class">.el-submenu</span> <span class="hljs-selector-class">.el-menu-item</span> &#123;<br>      <span class="hljs-attribute">min-width</span>: $sideBarWidth <span class="hljs-meta">!important</span>;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-selector-class">.hideSidebar</span> &#123;<br>    <span class="hljs-selector-class">.sidebar-container</span> &#123;<br>      <span class="hljs-attribute">width</span>: <span class="hljs-number">54px</span> <span class="hljs-meta">!important</span>;<br>    &#125;<br><br>    <span class="hljs-selector-class">.main-container</span> &#123;<br>      <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">54px</span>;<br>    &#125;<br><br>    <span class="hljs-selector-class">.submenu-title-noDropdown</span> &#123;<br>      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;<br>      <span class="hljs-attribute">position</span>: relative;<br><br>      <span class="hljs-selector-class">.el-tooltip</span> &#123;<br>        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;<br><br>        <span class="hljs-selector-class">.svg-icon</span> &#123;<br>          <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">20px</span>;<br>        &#125;<br><br>        <span class="hljs-selector-class">.sub-el-icon</span> &#123;<br>          <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">19px</span>;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-selector-class">.el-submenu</span> &#123;<br>      <span class="hljs-attribute">overflow</span>: hidden;<br><br>      &amp; &gt; <span class="hljs-selector-class">.el-submenu__title</span> &#123;<br>        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;<br><br>        <span class="hljs-selector-class">.svg-icon</span> &#123;<br>          <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">20px</span>;<br>        &#125;<br><br>        <span class="hljs-selector-class">.sub-el-icon</span> &#123;<br>          <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">19px</span>;<br>        &#125;<br><br>        <span class="hljs-selector-class">.el-submenu__icon-arrow</span> &#123;<br>          <span class="hljs-attribute">display</span>: none;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-selector-class">.el-menu--collapse</span> &#123;<br>      <span class="hljs-selector-class">.el-submenu</span> &#123;<br>        &amp; &gt; <span class="hljs-selector-class">.el-submenu__title</span> &#123;<br>          &amp; &gt; <span class="hljs-selector-tag">span</span> &#123;<br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;<br>            <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;<br>            <span class="hljs-attribute">overflow</span>: hidden;<br>            <span class="hljs-attribute">visibility</span>: hidden;<br>            <span class="hljs-attribute">display</span>: inline-block;<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-selector-class">.el-menu--collapse</span> <span class="hljs-selector-class">.el-menu</span> <span class="hljs-selector-class">.el-submenu</span> &#123;<br>    <span class="hljs-attribute">min-width</span>: $sideBarWidth <span class="hljs-meta">!important</span>;<br>  &#125;<br><br>  <span class="hljs-selector-class">.withoutAnimation</span> &#123;<br>    <span class="hljs-selector-class">.main-container</span>,<br>    <span class="hljs-selector-class">.sidebar-container</span> &#123;<br>      <span class="hljs-attribute">transition</span>: none;<br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-selector-class">.el-menu--vertical</span> &#123;<br>  &amp; &gt; <span class="hljs-selector-class">.el-menu</span> &#123;<br>    <span class="hljs-selector-class">.svg-icon</span> &#123;<br>      <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">16px</span>;<br>    &#125;<br>    <span class="hljs-selector-class">.sub-el-icon</span> &#123;<br>      <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">12px</span>;<br>      <span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">2px</span>;<br>    &#125;<br>  &#125;<br><br>  // 菜单项过长时<br><br>  &gt; <span class="hljs-selector-class">.el-menu--popup</span> &#123;<br>    <span class="hljs-attribute">max-height</span>: <span class="hljs-number">100vh</span>;<br>    <span class="hljs-attribute">overflow-y</span>: auto;<br><br>    &amp;::-webkit-scrollbar-track-piece &#123;<br>      background: <span class="hljs-number">#d3dce6</span>;<br>    &#125;<br><br>    &amp;::-webkit-scrollbar &#123;<br>      width: <span class="hljs-number">6px</span>;<br>    &#125;<br><br>    &amp;::-webkit-scrollbar-thumb &#123;<br>      background: <span class="hljs-number">#99a9bf</span>;<br>      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">20px</span>;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

</details>

<h4 id="5、创建的三个-scss-文件导入到-styles-index-scss"><a href="#5、创建的三个-scss-文件导入到-styles-index-scss" class="headerlink" title="5、创建的三个 scss 文件导入到 styles/index.scss"></a>5、创建的三个 scss 文件导入到 styles/index.scss</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">// index<span class="hljs-selector-class">.scss</span><br><span class="hljs-keyword">@import</span> <span class="hljs-string">&quot;./variables.scss&quot;</span>;<br><span class="hljs-keyword">@import</span> <span class="hljs-string">&quot;./mixin.scss&quot;</span>;<br><span class="hljs-keyword">@import</span> <span class="hljs-string">&quot;./sidebar.scss&quot;</span>;<br></code></pre></td></tr></table></figure>

<p><code>layout/index.vue</code>写入样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;style lang=&quot;scss&quot; scoped&gt;<br><span class="hljs-keyword">@import</span> <span class="hljs-string">&#x27;@/styles/mixin.scss&#x27;</span>;<br><span class="hljs-keyword">@import</span> <span class="hljs-string">&#x27;@/styles/variables.scss&#x27;</span>;<br><br><span class="hljs-selector-class">.app-wrapper</span> &#123;<br>  <span class="hljs-keyword">@include</span> clearfix;<br>  <span class="hljs-attribute">position</span>: relative;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>&#125;<br><br><span class="hljs-selector-class">.fixed-header</span> &#123;<br>  <span class="hljs-attribute">position</span>: fixed;<br>  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">9</span>;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - #&#123;$sideBarWidth&#125;);<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<h4 id="6、侧边栏要实现主题更换功能，sidebar-赋值动态背景颜色"><a href="#6、侧边栏要实现主题更换功能，sidebar-赋值动态背景颜色" class="headerlink" title="6、侧边栏要实现主题更换功能，sidebar 赋值动态背景颜色"></a>6、<code>侧边栏</code>要实现<code>主题更换</code>功能，sidebar 赋值动态背景颜色</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  ...<br>  <span class="hljs-comment">&lt;!-- 左侧 menu --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">sidebar</span></span><br><span class="hljs-tag">    <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;sidebar-container&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123; backgroundColor: variables.menuBg &#125;&quot;</span></span><br><span class="hljs-tag">  /&gt;</span><br>  ...<br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span><br><span class="javascript">  <span class="hljs-keyword">import</span> variables <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/styles/variables.scss&quot;</span>;</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="7、Navbar、Sidebar、AppMain-组件初始化代码占位及样式修改"><a href="#7、Navbar、Sidebar、AppMain-组件初始化代码占位及样式修改" class="headerlink" title="7、Navbar、Sidebar、AppMain 组件初始化代码占位及样式修改"></a>7、Navbar、Sidebar、AppMain 组件初始化代码占位及样式修改</h4><p>需要处理 AppMain 组件和 Navbar 组件重叠问题</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app-main&quot;</span>&gt;</span>AppMain<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css"></span><br><span class="css">  <span class="hljs-selector-class">.app-main</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">min-height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vh</span> - <span class="hljs-number">50px</span>);</span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="css">    <span class="hljs-attribute">position</span>: relative;</span><br><span class="css">    <span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">61px</span> <span class="hljs-number">20px</span> <span class="hljs-number">20px</span> <span class="hljs-number">20px</span>;</span><br><span class="css">    <span class="hljs-attribute">box-sizing</span>: border-box;</span><br><span class="css">  &#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="8、用户个人信息"><a href="#8、用户个人信息" class="headerlink" title="8、用户个人信息"></a>8、用户个人信息</h4><p>这里需要处理一下用户个人信息展示</p>
<p><code>api/sys.js</code>文件定义方法、axios 请求拦截器对 token 进行 header 注入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 获取用户信息</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> getUserInfo = <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> request(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;/sys/profile&quot;</span>,<br>  &#125;);<br>&#125;;<br><br><span class="hljs-comment">// utils/request.js</span><br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/store&quot;</span>;<br><span class="hljs-comment">// 请求拦截器</span><br>service.interceptors.request.use(<br>  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// 在这个位置需要统一的去注入token</span><br>    <span class="hljs-keyword">if</span> (store.getters.token) &#123;<br>      <span class="hljs-comment">// 如果token存在 注入token</span><br>      config.headers.Authorization = <span class="hljs-string">`Bearer <span class="hljs-subst">$&#123;store.getters.token&#125;</span>`</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> config; <span class="hljs-comment">// 必须返回配置</span><br>  &#125;,<br>  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error);<br>  &#125;<br>);<br></code></pre></td></tr></table></figure>

<p>定义调用接口的动作<code>store/modules/user.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; login, getUserInfo &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/api/sys&#x27;</span><br>...<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">namespaced</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> (&#123;<br>    ...<br>    <span class="hljs-attr">userInfo</span>: &#123;&#125;<br>  &#125;),<br>  <span class="hljs-attr">mutations</span>: &#123;<br>    ...<br>    <span class="hljs-function"><span class="hljs-title">setUserInfo</span>(<span class="hljs-params">state, userInfo</span>)</span> &#123;<br>      state.userInfo = userInfo<br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">actions</span>: &#123;<br>    ...<br>    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">getUserInfo</span>(<span class="hljs-params">context</span>)</span> &#123;<br>      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> getUserInfo()<br>      <span class="hljs-built_in">this</span>.commit(<span class="hljs-string">&#x27;user/setUserInfo&#x27;</span>, res)<br>      <span class="hljs-keyword">return</span> res<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>在权限拦截时触发的动作<code>permission.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js">  <span class="hljs-keyword">if</span> (to.path === <span class="hljs-string">&#x27;/login&#x27;</span>) &#123;<br>    ...<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// 判断用户资料是否获取</span><br>    <span class="hljs-comment">// 若不存在用户信息，则需要获取用户信息</span><br>    <span class="hljs-keyword">if</span> (!store.getters.hasUserInfo) &#123;<br>      <span class="hljs-comment">// 触发获取用户信息的 action</span><br>      <span class="hljs-keyword">await</span> store.dispatch(<span class="hljs-string">&#x27;user/getUserInfo&#x27;</span>)<br>    &#125;<br>    next()<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>写入判断用户信息<code>store/getters.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> getters = &#123;<br>  ...<br>  <span class="hljs-attr">userInfo</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.user.userInfo,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@returns </span>true 表示已存在用户信息</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-attr">hasUserInfo</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.stringify(state.user.userInfo) !== <span class="hljs-string">&#x27;&#123;&#125;&#x27;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="9、element-plus-的-dropdown-avatar-组件实现用户头像信息及用户主动退出功能"><a href="#9、element-plus-的-dropdown-avatar-组件实现用户头像信息及用户主动退出功能" class="headerlink" title="9、element-plus 的 dropdown avatar 组件实现用户头像信息及用户主动退出功能"></a>9、element-plus 的 dropdown avatar 组件实现用户头像信息及用户主动退出功能</h4><p><code>用户头像功能及下拉菜单栏</code></p>
<details>
<summary>点我展示代码</summary>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs html">// layout/components/navbar.vue<br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;navbar&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;right-menu&quot;</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- 头像 --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">el-dropdown</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;avatar-container&quot;</span> <span class="hljs-attr">trigger</span>=<span class="hljs-string">&quot;click&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;avatar-wrapper&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-avatar</span></span><br><span class="hljs-tag">            <span class="hljs-attr">shape</span>=<span class="hljs-string">&quot;square&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">:size</span>=<span class="hljs-string">&quot;40&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;$store.getters.userInfo.avatar&quot;</span></span><br><span class="hljs-tag">          &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-avatar</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">dropdown</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-dropdown-menu</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-dropdown&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-dropdown-item</span>&gt;</span> 首页 <span class="hljs-tag">&lt;/<span class="hljs-name">el-dropdown-item</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-dropdown-item</span> <span class="hljs-attr">divided</span>&gt;</span> 退出登录 <span class="hljs-tag">&lt;/<span class="hljs-name">el-dropdown-item</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-dropdown-menu</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">el-dropdown</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span><br><span class="javascript">  <span class="hljs-keyword">import</span> &#123;&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css"></span><br><span class="css">  <span class="hljs-selector-class">.navbar</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;</span><br><span class="css">    <span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="css">    <span class="hljs-attribute">position</span>: relative;</span><br><span class="css">    <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="css">    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">21</span>, <span class="hljs-number">41</span>, <span class="hljs-number">0.08</span>);</span><br><span class="css"></span><br><span class="css">    <span class="hljs-selector-class">.right-menu</span> &#123;</span><br><span class="css">      <span class="hljs-attribute">display</span>: flex;</span><br><span class="css">      <span class="hljs-attribute">align-items</span>: center;</span><br><span class="css">      <span class="hljs-attribute">float</span>: right;</span><br><span class="css">      <span class="hljs-attribute">padding-right</span>: <span class="hljs-number">16px</span>;</span><br><span class="css"></span><br><span class="css">      ::v-deep .avatar-container &#123;</span><br><span class="css">        cursor: pointer;</span><br><span class="css">        <span class="hljs-selector-class">.avatar-wrapper</span> &#123;</span><br><span class="css">          <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">5px</span>;</span><br><span class="css">          <span class="hljs-attribute">position</span>: relative;</span><br><span class="css">          n <span class="hljs-selector-class">.el-avatar</span> &#123;</span><br><span class="css">            --el-avatar-<span class="hljs-attribute">background-color</span>: none;</span><br><span class="css">            <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">12px</span>;</span><br><span class="css">          &#125;</span><br><span class="css">        &#125;</span><br><span class="css">      &#125;</span><br><span class="css">    &#125;</span><br><span class="css">  &#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>

</details>

<h4 id="10、主动退出功能-在-store-moduels-user-js-中，清除当前用户缓存数据、清除用户权限相关配置、返回到登录页"><a href="#10、主动退出功能-在-store-moduels-user-js-中，清除当前用户缓存数据、清除用户权限相关配置、返回到登录页" class="headerlink" title="10、主动退出功能:在 store/moduels/user.js 中，清除当前用户缓存数据、清除用户权限相关配置、返回到登录页"></a>10、<code>主动退出功能</code>:在 store/moduels/user.js 中，清除当前用户缓存数据、清除用户权限相关配置、返回到登录页</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/router&#x27;</span><br><br><span class="hljs-function"><span class="hljs-title">logout</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.commit(<span class="hljs-string">&#x27;user/setToken&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)<br>    <span class="hljs-built_in">this</span>.commit(<span class="hljs-string">&#x27;user/setUserInfo&#x27;</span>, &#123;&#125;)<br>    removeAllItem()<br>    router.push(<span class="hljs-string">&#x27;/login&#x27;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<p>退出按钮点击事件，触发 logout 的 action</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; useStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vuex&quot;</span>;<br><br><span class="hljs-keyword">const</span> store = useStore();<br><span class="hljs-keyword">const</span> logout = <span class="hljs-function">() =&gt;</span> &#123;<br>  store.dispatch(<span class="hljs-string">&quot;user/logout&quot;</span>);<br>&#125;;<br></code></pre></td></tr></table></figure>

<h4 id="11、被动退出功能：token-过期、单一账户同时登录"><a href="#11、被动退出功能：token-过期、单一账户同时登录" class="headerlink" title="11、被动退出功能：token 过期、单一账户同时登录"></a>11、<code>被动退出功能</code>：token 过期、单一账户同时登录</h4><p>token 表示一个用户的身份令牌，对服务端而言，只认令牌不认人，所以说一旦其他人获取了你的 token，那么可以伪装成你，来获取对应的敏感数据。</p>
<p>为了保证用户的信息安全，那么对于 token 而言就被制定了很多安全策略。<br>token 的安全策略：动态 token、刷新 token、失效 token</p>
<p>选择时效 token：服务端处理 token 时效的同时，在前端主动介入 token 时效的处理中，从而保证用户信息的安全性。</p>
<p>实现方案：</p>
<blockquote>
<p>1、在用户登录时，记录当前登录时间<br>2、制定失效时长<br>3、接口调用时，根据当前时间对比登录时间，看是否超过了时效时长。如果未超过，则正常进行后续操作；如果超过，则进行退出登录操作</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// utils/auth.js</span><br><span class="hljs-keyword">import</span> &#123; TIME_STAMP, TOKEN_TIMEOUT_VALUE &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/constant&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; setItem, getItem &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/utils/storage&quot;</span>;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 获取时间戳</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTimeStamp</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> getItem(TIME_STAMP);<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 设置时间戳</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setTimeStamp</span>(<span class="hljs-params"></span>) </span>&#123;<br>  setItem(TIME_STAMP, <span class="hljs-built_in">Date</span>.now());<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 是否超时</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isCheckTimeout</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-comment">// 当前时间戳</span><br>  <span class="hljs-keyword">var</span> currentTime = <span class="hljs-built_in">Date</span>.now();<br>  <span class="hljs-comment">// 缓存时间戳</span><br>  <span class="hljs-keyword">var</span> timeStamp = getTimeStamp();<br>  <span class="hljs-keyword">return</span> currentTime - timeStamp &gt; TOKEN_TIMEOUT_VALUE;<br>&#125;<br><br><span class="hljs-comment">// token时间戳</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> TIME_STAMP = <span class="hljs-string">&quot;timeStamp&quot;</span>;<br><span class="hljs-comment">// 超时时长(毫秒) 两小时</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> TOKEN_TIMEOUT_VALUE = <span class="hljs-number">2</span> * <span class="hljs-number">3600</span> * <span class="hljs-number">1000</span>;<br></code></pre></td></tr></table></figure>

<p>用户登录成功之后设置时间，到 store/user.js 的 login 中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; setTimeStamp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/auth&#x27;</span><br><br><span class="hljs-function"><span class="hljs-title">login</span>(<span class="hljs-params">context, userInfo</span>)</span> &#123;<br>      ...<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>        ...<br>          .then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> &#123;<br>            ...<br>            <span class="hljs-comment">// 保存登录时间</span><br>            setTimeStamp()<br>            resolve()<br>          &#125;)<br>      &#125;)<br>    &#125;,<br></code></pre></td></tr></table></figure>

<p>在<code>utils/request</code>对应的请求拦截器中进行主动介入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; isCheckTimeout &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/auth&#x27;</span><br><br><span class="hljs-keyword">if</span> (store.getters.token) &#123;<br>      <span class="hljs-keyword">if</span> (isCheckTimeout()) &#123;<br>        <span class="hljs-comment">// 登出操作</span><br>        store.dispatch(<span class="hljs-string">&#x27;user/logout&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;token 失效&#x27;</span>))<br>      &#125;<br>      ...<br>    &#125;<br><br><span class="hljs-comment">// 响应拦截器</span><br>service.interceptors.response.use(<br>  <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>    ...<br>  &#125;,<br>  <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>    <span class="hljs-comment">// 处理 token 超时问题</span><br>    <span class="hljs-keyword">if</span> (<br>      error.response &amp;&amp;<br>      error.response.data &amp;&amp;<br>      error.response.data.code === <span class="hljs-number">401</span><br>    ) &#123;<br>      <span class="hljs-comment">// token超时</span><br>      store.dispatch(<span class="hljs-string">&#x27;user/logout&#x27;</span>)<br>    &#125;<br>    ElMessage.error(error.message) <span class="hljs-comment">// 提示错误信息</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error)<br>  &#125;<br>)<br></code></pre></td></tr></table></figure>

<h4 id="12、临时menu菜单"><a href="#12、临时menu菜单" class="headerlink" title="12、临时menu菜单"></a>12、<code>临时menu菜单</code></h4><p>layout/Sidebar/SidebarMenu.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 一级 menu 菜单 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">el-menu</span></span><br><span class="hljs-tag">    <span class="hljs-attr">:uniqueOpened</span>=<span class="hljs-string">&quot;true&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">default-active</span>=<span class="hljs-string">&quot;2&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">background-color</span>=<span class="hljs-string">&quot;#545c64&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">text-color</span>=<span class="hljs-string">&quot;#fff&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">active-text-color</span>=<span class="hljs-string">&quot;#ffd04b&quot;</span></span><br><span class="hljs-tag">  &gt;</span><br>    <span class="hljs-comment">&lt;!-- 子集 menu 菜单 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-submenu</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-location&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>导航一<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;1-1&quot;</span>&gt;</span>选项1<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;1-2&quot;</span>&gt;</span>选项2<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">el-submenu</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 具体菜单项 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;4&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-setting&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">title</span>&gt;</span>导航四<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>layout/Sidebar/index 导入该组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;template&gt;<br>  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Admin<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">el-scrollbar</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">sidebar-menu</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">sidebar-menu</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">el-scrollbar</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span></span><br><span class="javascript"><span class="xml"><span class="hljs-keyword">import</span> SidebarMenu <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./SidebarMenu&#x27;</span></span></span><br><span class="javascript"><span class="xml"><span class="hljs-keyword">import</span> &#123;&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span></span><br><span class="javascript"><span class="xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>生成一个临时的 menu 菜单，从这个临时的 menu 菜单可以看出，el-menu 分为三部分：</p>
<blockquote>
<p><code>el-menu</code>：整个 menu 菜单<br><code>el-sub-menu</code>:子集 menu 菜单<br><code>el-menu-item</code>:具体菜单项</p>
</blockquote>
<h4 id="13、动态-menu-菜单处理"><a href="#13、动态-menu-菜单处理" class="headerlink" title="13、动态 menu 菜单处理"></a>13、动态 menu 菜单处理</h4><blockquote>
<p>动态 menu 菜单主要和动态路由表配合来实现用户权限的（后续需要完成用户权限）。动态 menu 菜单指的是：根据路由表的配置，自动生成对应的 menu 菜单，当路由表发生变化时，menu 菜单自动发生变化。</p>
</blockquote>
<p>实现步骤：</p>
<blockquote>
<p>1、定义路由表对应的 menu 菜单规则（核心步骤）<br>2、根据规则制定路由表<br>3、根据规则，一路路由表生成 menu 菜单</p>
</blockquote>
<p>上面步骤 1 的菜单规则制定：</p>
<blockquote>
<p>1、如果<code>meta &amp;&amp; meta.title &amp;&amp; meta.icon</code> ：则显示在 <code>menu</code> 菜单中，其中 <code>title</code> 为显示的内容，<code>icon</code> 为显示的图标。如果存在 children：则展示子菜单 el-sub-menu；否则展示 el-menu-item。<br>2、不显示在 menu 中</p>
</blockquote>
<h4 id="14、创建页面组件"><a href="#14、创建页面组件" class="headerlink" title="14、创建页面组件"></a>14、<code>创建页面组件</code></h4><p>views 文件夹下创建页面：<br>（1）、创建文章:article-create<br>（2）、文章详情:article-detail<br>（3）、文章列表:article-ranking<br>（4）、401 和 404 页面:error-page/401.vue 404.vue<br>（5）、导入:import<br>（6）、权限列表:permission-list<br>（7）、个人中心:profile<br>（8）、角色列表:role-list<br>（9）、用户信息:user-info<br>（10）、用户管理:user-manage</p>
<h4 id="15、用户权限处理"><a href="#15、用户权限处理" class="headerlink" title="15、用户权限处理"></a>15、用户权限处理</h4><p>需要先对路由表进行划分：私有路由表 privateRoutes(权限路由)、公有路由表 publicRoutes(非权限路由)</p>
<p><code>router/index.js</code></p>
<details>
<summary>显示详细代码</summary>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 私有路由表</span><br><span class="hljs-keyword">const</span> privateRoutes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user&quot;</span>,<br>    <span class="hljs-attr">component</span>: layout,<br>    <span class="hljs-attr">redirect</span>: <span class="hljs-string">&quot;/user/manage&quot;</span>,<br>    <span class="hljs-attr">meta</span>: &#123;<br>      <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;user&quot;</span>,<br>      <span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;personnel&quot;</span>,<br>    &#125;,<br>    <span class="hljs-attr">children</span>: [<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user/manage&quot;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;@/views/user-manage/index&quot;</span>),<br>        <span class="hljs-attr">meta</span>: &#123;<br>          <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;userManage&quot;</span>,<br>          <span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;personnel-manage&quot;</span>,<br>        &#125;,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user/role&quot;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;@/views/role-list/index&quot;</span>),<br>        <span class="hljs-attr">meta</span>: &#123;<br>          <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;roleList&quot;</span>,<br>          <span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;role&quot;</span>,<br>        &#125;,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user/permission&quot;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;@/views/permission-list/index&quot;</span>),<br>        <span class="hljs-attr">meta</span>: &#123;<br>          <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;permissionList&quot;</span>,<br>          <span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;permission&quot;</span>,<br>        &#125;,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user/info/:id&quot;</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;userInfo&quot;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;@/views/user-info/index&quot;</span>),<br>        <span class="hljs-attr">meta</span>: &#123;<br>          <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;userInfo&quot;</span>,<br>        &#125;,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user/import&quot;</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;import&quot;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;@/views/import/index&quot;</span>),<br>        <span class="hljs-attr">meta</span>: &#123;<br>          <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;excelImport&quot;</span>,<br>        &#125;,<br>      &#125;,<br>    ],<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/article&quot;</span>,<br>    <span class="hljs-attr">component</span>: layout,<br>    <span class="hljs-attr">redirect</span>: <span class="hljs-string">&quot;/article/ranking&quot;</span>,<br>    <span class="hljs-attr">meta</span>: &#123;<br>      <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;article&quot;</span>,<br>      <span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;article&quot;</span>,<br>    &#125;,<br>    <span class="hljs-attr">children</span>: [<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/article/ranking&quot;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;@/views/article-ranking/index&quot;</span>),<br>        <span class="hljs-attr">meta</span>: &#123;<br>          <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;articleRanking&quot;</span>,<br>          <span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;article-ranking&quot;</span>,<br>        &#125;,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/article/:id&quot;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;@/views/article-detail/index&quot;</span>),<br>        <span class="hljs-attr">meta</span>: &#123;<br>          <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;articleDetail&quot;</span>,<br>        &#125;,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/article/create&quot;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;@/views/article-create/index&quot;</span>),<br>        <span class="hljs-attr">meta</span>: &#123;<br>          <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;articleCreate&quot;</span>,<br>          <span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;article-create&quot;</span>,<br>        &#125;,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/article/editor/:id&quot;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;@/views/article-create/index&quot;</span>),<br>        <span class="hljs-attr">meta</span>: &#123;<br>          <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;articleEditor&quot;</span>,<br>        &#125;,<br>      &#125;,<br>    ],<br>  &#125;,<br>];<br><span class="hljs-comment">// 公开路由表</span><br><span class="hljs-keyword">const</span> publicRoutes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/login&quot;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;@/views/login/index&quot;</span>),<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/&quot;</span>,<br>    <span class="hljs-comment">// 注意：带有路径“/”的记录中的组件“默认”是一个不返回 Promise 的函数</span><br>    <span class="hljs-attr">component</span>: layout,<br>    <span class="hljs-attr">redirect</span>: <span class="hljs-string">&quot;/profile&quot;</span>,<br>    <span class="hljs-attr">children</span>: [<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/profile&quot;</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;profile&quot;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;@/views/profile/index&quot;</span>),<br>        <span class="hljs-attr">meta</span>: &#123;<br>          <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;profile&quot;</span>,<br>          <span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;el-icon-user&quot;</span>,<br>        &#125;,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/404&quot;</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;404&quot;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;@/views/error-page/404&quot;</span>),<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/401&quot;</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;401&quot;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;@/views/error-page/401&quot;</span>),<br>      &#125;,<br>    ],<br>  &#125;,<br>];<br><br><span class="hljs-keyword">const</span> router = createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHashHistory(),<br>  <span class="hljs-attr">routes</span>: [...publicRoutes, ...privateRoutes],<br>&#125;);<br></code></pre></td></tr></table></figure>

</details>

<blockquote>
<p>注意：要在 <code>layout/AppMain.vue 中设置路由出口</code></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app-main&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="16、解析路由表，获取结构化数据"><a href="#16、解析路由表，获取结构化数据" class="headerlink" title="16、解析路由表，获取结构化数据"></a>16、解析路由表，获取结构化数据</h4><p>数据结构为</p>
<details>
<summary>显示详细代码</summary>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs json">[<br>  &#123;<br>    <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;个人中心&quot;</span>,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;&quot;</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;用户&quot;</span>,<br>    <span class="hljs-attr">&quot;children&quot;</span>: [<br>      &#123;<br>        <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;员工管理&quot;</span>,<br>        <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;&quot;</span><br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;角色列表&quot;</span>,<br>        <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;&quot;</span><br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;权限列表&quot;</span>,<br>        <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;&quot;</span><br>      &#125;<br>    ]<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;文章&quot;</span>,<br>    <span class="hljs-attr">&quot;children&quot;</span>: [<br>      &#123;<br>        <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;文章排名&quot;</span>,<br>        <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;&quot;</span><br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;创建文章&quot;</span>,<br>        <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;&quot;</span><br>      &#125;<br>    ]<br>  &#125;<br>]<br></code></pre></td></tr></table></figure>

</details>

<p>获取路由表数据的 2 中方式：</p>
<blockquote>
<p>1、router.options.routes:初始路由列表<br>2、router.getRoutes()：获取所有路由记录的完整列表（选择此种方法）</p>
</blockquote>
<p>在 layout/components/Sidebar/SidebarMenu 中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script setup&gt;<br>  <span class="hljs-keyword">import</span> &#123;useRouter&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span> <span class="hljs-keyword">const</span> router = useRouter()<br>  <span class="hljs-built_in">console</span>.log(router.getRoutes()) <span class="hljs-comment">// 这里返回的是一个完整的路由表</span><br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<p>打印的结果是一个完整的路由表，里面存在一些问题：</p>
<blockquote>
<p>存在重复的路由数据<br>不满足该条件 meta &amp;&amp; meta.title &amp;&amp; meta.icon 的数据不应该存在</p>
</blockquote>
<h4 id="17、处理数据结构问题"><a href="#17、处理数据结构问题" class="headerlink" title="17、处理数据结构问题"></a>17、处理数据结构问题</h4><p>创建<code>utils/route.js</code>，里面 2 个函数方法：filterRouters()/generateMenus()很重要</p>
<details>
<summary>显示完整代码</summary>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;path&quot;</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 返回所有子路由</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">const</span> getChildrenRoutes = <span class="hljs-function">(<span class="hljs-params">routes</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> result = [];<br>  routes.forEach(<span class="hljs-function">(<span class="hljs-params">route</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (route.children &amp;&amp; route.children.length &gt; <span class="hljs-number">0</span>) &#123;<br>      result.push(...route.children);<br>    &#125;<br>  &#125;);<br>  <span class="hljs-keyword">return</span> result;<br>&#125;;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 处理脱离层级的路由：某个一级路由为其他子路由，则剔除该一级路由，保留路由层级</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;*&#125;</span> </span>routes router.getRoutes()</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> filterRouters = <span class="hljs-function">(<span class="hljs-params">routes</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> childrenRoutes = getChildrenRoutes(routes);<br>  <span class="hljs-keyword">return</span> routes.filter(<span class="hljs-function">(<span class="hljs-params">route</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> !childrenRoutes.find(<span class="hljs-function">(<span class="hljs-params">childrenRoute</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> childrenRoute.path === route.path;<br>    &#125;);<br>  &#125;);<br>&#125;;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 判断数据是否为空值</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNull</span>(<span class="hljs-params">data</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (!data) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">JSON</span>.stringify(data) === <span class="hljs-string">&quot;&#123;&#125;&quot;</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">JSON</span>.stringify(data) === <span class="hljs-string">&quot;[]&quot;</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 根据 routes 数据，返回对应 menu 规则数组</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateMenus</span>(<span class="hljs-params">routes, basePath = <span class="hljs-string">&quot;&quot;</span></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> result = [];<br>  <span class="hljs-comment">// 遍历路由表</span><br>  routes.forEach(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// 不存在 children &amp;&amp; 不存在 meta 直接 return</span><br>    <span class="hljs-keyword">if</span> (isNull(item.meta) &amp;&amp; isNull(item.children)) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-comment">// 存在 children 不存在 meta，进入迭代</span><br>    <span class="hljs-keyword">if</span> (isNull(item.meta) &amp;&amp; !isNull(item.children)) &#123;<br>      result.push(...generateMenus(item.children));<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">// 合并 path 作为跳转路径</span><br>    <span class="hljs-keyword">const</span> routePath = path.resolve(basePath, item.path);<br>    <span class="hljs-comment">// 路由分离之后，存在同名父路由的情况，需要单独处理</span><br>    <span class="hljs-keyword">let</span> route = result.find(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.path === routePath);<br>    <span class="hljs-keyword">if</span> (!route) &#123;<br>      route = &#123;<br>        ...item,<br>        <span class="hljs-attr">path</span>: routePath,<br>        <span class="hljs-attr">children</span>: [],<br>      &#125;;<br><br>      <span class="hljs-comment">// icon 与 title 必须全部存在</span><br>      <span class="hljs-keyword">if</span> (route.meta.icon &amp;&amp; route.meta.title) &#123;<br>        <span class="hljs-comment">// meta 存在生成 route 对象，放入 arr</span><br>        result.push(route);<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// 存在 children 进入迭代到children</span><br>    <span class="hljs-keyword">if</span> (item.children) &#123;<br>      route.children.push(...generateMenus(item.children, route.path));<br>    &#125;<br>  &#125;);<br>  <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure>

</details>

<h4 id="18、SidebarMenu-调用-filterRouters、generateMenus-方法"><a href="#18、SidebarMenu-调用-filterRouters、generateMenus-方法" class="headerlink" title="18、SidebarMenu 调用 filterRouters、generateMenus 方法"></a>18、SidebarMenu 调用 filterRouters、generateMenus 方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script setup&gt;<br><span class="hljs-keyword">import</span> &#123; computed &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> &#123; useRouter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">import</span> &#123; filterRouters, generateMenus &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/route&#x27;</span><br><br><span class="hljs-keyword">const</span> router = useRouter()<br><span class="hljs-keyword">const</span> routes = computed(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> filterRoutes = filterRouters(router.getRoutes())<br>  <span class="hljs-keyword">return</span> generateMenus(filterRoutes)<br>&#125;)<br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">JSON</span>.stringify(routes.value))<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="19、生成动态-menu-菜单"><a href="#19、生成动态-menu-菜单" class="headerlink" title="19、生成动态 menu 菜单"></a>19、生成动态 menu 菜单</h4><p>整个 menu 菜单，分为 3 个组件来进行处理</p>
<blockquote>
<p>1、SidebarMenu:处理数据，作为最顶层 menu 载体</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 一级 menu 菜单 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">el-menu</span> <span class="hljs-attr">...</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">sidebar-item</span></span><br><span class="hljs-tag">      <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in routes&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.path&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">:route</span>=<span class="hljs-string">&quot;item&quot;</span></span><br><span class="hljs-tag">    &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">sidebar-item</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>2、SidebarItem：根据数据处理当前项为 el-sub-menu || el-menu-item</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 支持渲染多级 menu 菜单 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">el-submenu</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;route.children.length &gt; 0&quot;</span> <span class="hljs-attr">:index</span>=<span class="hljs-string">&quot;route.path&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">title</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">menu-item</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;route.meta.title&quot;</span> <span class="hljs-attr">:icon</span>=<span class="hljs-string">&quot;route.meta.icon&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">menu-item</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 循环渲染 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">sidebar-item</span></span><br><span class="hljs-tag">      <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in route.children&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.path&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">:route</span>=<span class="hljs-string">&quot;item&quot;</span></span><br><span class="hljs-tag">    &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">sidebar-item</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">el-submenu</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 渲染 item 项 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">v-else</span> <span class="hljs-attr">:index</span>=<span class="hljs-string">&quot;route.path&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">menu-item</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;route.meta.title&quot;</span> <span class="hljs-attr">:icon</span>=<span class="hljs-string">&quot;route.meta.icon&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">menu-item</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span><br><span class="javascript">  <span class="hljs-keyword">import</span> MenuItem <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./MenuItem&quot;</span>;</span><br><span class="javascript">  <span class="hljs-keyword">import</span> &#123; defineProps &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="javascript">  <span class="hljs-comment">// 定义 props</span></span><br><span class="javascript">  defineProps(&#123;</span><br><span class="javascript">    <span class="hljs-attr">route</span>: &#123;</span><br><span class="javascript">      <span class="hljs-attr">type</span>: <span class="hljs-built_in">Object</span>,</span><br><span class="javascript">      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,</span><br><span class="javascript">    &#125;,</span><br><span class="javascript">  &#125;);</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>3、MenuItem:处理 el-menu-item 样式</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;icon.includes(&#x27;el-icon&#x27;)&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;sub-el-icon&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;icon&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">svg-icon</span> <span class="hljs-attr">v-else</span> <span class="hljs-attr">:icon</span>=<span class="hljs-string">&quot;icon&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">svg-icon</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span><br><span class="javascript">  <span class="hljs-keyword">import</span> &#123; defineProps &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="javascript">  defineProps(&#123;</span><br><span class="javascript">    <span class="hljs-attr">title</span>: &#123;</span><br><span class="javascript">      <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,</span><br><span class="javascript">      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,</span><br><span class="javascript">    &#125;,</span><br><span class="javascript">    <span class="hljs-attr">icon</span>: &#123;</span><br><span class="javascript">      <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,</span><br><span class="javascript">      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,</span><br><span class="javascript">    &#125;,</span><br><span class="javascript">  &#125;);</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>menu 菜单完成，还需解决样式问题、菜单路由跳转问题、默认激活项</p>
<p><code>样式修改</code>：store/getters 创建快捷访问（后续加入主题更换功能，样式不能写死）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> variables <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/styles/variables.scss&#x27;</span><br><span class="hljs-keyword">const</span> getters = &#123;<br>  ...<br>  <span class="hljs-attr">cssVar</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> variables<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> getters<br></code></pre></td></tr></table></figure>

<p><code>SidebarMenu</code>写入样式（el-menu 里的 router 是指定路由跳转， activeMenu 为默认激活项）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html">// template<br><span class="hljs-tag">&lt;<span class="hljs-name">el-menu</span></span><br><span class="hljs-tag">  <span class="hljs-attr">:background-color</span>=<span class="hljs-string">&quot;$store.getters.cssVar.menuBg&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">:text-color</span>=<span class="hljs-string">&quot;$store.getters.cssVar.menuText&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">:active-text-color</span>=<span class="hljs-string">&quot;$store.getters.cssVar.menuActiveText&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">:default-active</span>=<span class="hljs-string">&quot;activeMenu&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">:unique-opened</span>=<span class="hljs-string">&quot;true&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">router</span></span><br><span class="hljs-tag">&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-menu</span>&gt;</span><br><br>// js<br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span><br><span class="javascript">  ...</span><br><span class="javascript"></span><br><span class="javascript">  <span class="hljs-comment">// 计算高亮 menu 的方法</span></span><br><span class="javascript">  <span class="hljs-keyword">const</span> route = useRoute()</span><br><span class="javascript">  <span class="hljs-keyword">const</span> activeMenu = computed(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">    <span class="hljs-keyword">const</span> &#123; path &#125; = route</span><br><span class="javascript">    <span class="hljs-keyword">return</span> path</span><br><span class="javascript">  &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="20、菜单的伸缩功能"><a href="#20、菜单的伸缩功能" class="headerlink" title="20、菜单的伸缩功能"></a>20、菜单的伸缩功能</h4><p>创建<code>store/modules/app.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">namespaced</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> (&#123;<br>    <span class="hljs-attr">sidebarOpened</span>: <span class="hljs-literal">true</span>,<br>  &#125;),<br>  <span class="hljs-attr">mutations</span>: &#123;<br>    <span class="hljs-function"><span class="hljs-title">triggerSidebarOpened</span>(<span class="hljs-params">state</span>)</span> &#123;<br>      state.sidebarOpened = !state.sidebarOpened;<br>    &#125;,<br>  &#125;,<br>  <span class="hljs-attr">actions</span>: &#123;&#125;,<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>在<code>store/index.js</code>中引入上面的 app.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> app <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./modules/app&quot;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> createStore(&#123;<br>  getters,<br>  <span class="hljs-attr">modules</span>: &#123;<br>    user,<br>    app,<br>  &#125;,<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>在 <code>store/getters</code> 中创建快捷访问</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">sidebarOpened: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.app.sidebarOpened;<br></code></pre></td></tr></table></figure>

<h4 id="21、创建收缩-icon-组件-hamburger"><a href="#21、创建收缩-icon-组件-hamburger" class="headerlink" title="21、创建收缩 icon 组件 hamburger"></a>21、创建收缩 icon 组件 hamburger</h4><p>创建<code>src/components/Hamburger/index.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;hamburger-container&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;toggleClick&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">svg-icon</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;hamburger&quot;</span> <span class="hljs-attr">:icon</span>=<span class="hljs-string">&quot;icon&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">svg-icon</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span><br><span class="javascript">  <span class="hljs-keyword">import</span> &#123; computed &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="javascript">  <span class="hljs-keyword">import</span> &#123; useStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vuex&quot;</span>;</span><br><span class="javascript"></span><br><span class="javascript">  <span class="hljs-keyword">const</span> store = useStore();</span><br><span class="javascript">  <span class="hljs-keyword">const</span> toggleClick = <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">    store.commit(<span class="hljs-string">&quot;app/triggerSidebarOpened&quot;</span>);</span><br><span class="javascript">  &#125;;</span><br><span class="javascript"></span><br><span class="javascript">  <span class="hljs-keyword">const</span> icon = computed(<span class="hljs-function">() =&gt;</span></span><br><span class="javascript">    store.getters.sidebarOpened ? <span class="hljs-string">&quot;hamburger-opened&quot;</span> : <span class="hljs-string">&quot;hamburger-closed&quot;</span></span><br><span class="javascript">  );</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css"></span><br><span class="css">  <span class="hljs-selector-class">.hamburger-container</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">16px</span>;</span><br><span class="css">    <span class="hljs-selector-class">.hamburger</span> &#123;</span><br><span class="css">      <span class="hljs-attribute">display</span>: inline-block;</span><br><span class="css">      <span class="hljs-attribute">vertical-align</span>: middle;</span><br><span class="css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;</span><br><span class="css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">20px</span>;</span><br><span class="css">    &#125;</span><br><span class="css">  &#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>在<code>layout/components/Navbar.vue</code>中使用 Hamburger 组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;navbar&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">hamburger</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;hamburger-container&quot;</span> /&gt;</span><br>    ...<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span><br><span class="javascript">  <span class="hljs-keyword">import</span> Hamburger <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components/Hamburger&#x27;</span></span><br><span class="javascript">  ...</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css"></span><br><span class="css">  <span class="hljs-selector-class">.navbar</span> &#123;</span><br><span class="css">    ...</span><br><span class="css"></span><br><span class="css">    <span class="hljs-selector-class">.hamburger-container</span> &#123;</span><br><span class="css">      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">46px</span>;</span><br><span class="css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="css">      <span class="hljs-attribute">float</span>: left;</span><br><span class="css">      <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="css">      // hover 动画</span><br><span class="css">      <span class="hljs-attribute">transition</span>: background <span class="hljs-number">0.5s</span>;</span><br><span class="css"></span><br><span class="css">      &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="css">        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);</span><br><span class="css">      &#125;</span><br><span class="css">    &#125;</span><br><span class="css"></span><br><span class="css">   ...</span><br><span class="css">  &#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>在<code>layout/components/Sidebar/SidebarMenu.vue</code>中添加控制 el-menu 的<code>collapse</code>属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">el-menu</span></span><br><span class="hljs-tag">    <span class="hljs-attr">:collapse</span>=<span class="hljs-string">&quot;!$store.getters.sidebarOpened&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">...</span></span><br></code></pre></td></tr></table></figure>

<p>在<code>layout/index.vue</code>中指定侧边栏的宽度和缩放动画</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span></span><br><span class="hljs-tag">  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app-wrapper&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;[$store.getters.sidebarOpened ? &#x27;openSidebar&#x27; : &#x27;hideSidebar&#x27;]&quot;</span></span><br><span class="hljs-tag">&gt;</span><br>  ...<br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css"></span><br><span class="css">  ... <span class="hljs-selector-class">.fixed-header</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">position</span>: fixed;</span><br><span class="css">    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="css">    <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span><br><span class="css">    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">9</span>;</span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - #&#123;$sideBarWidth&#125;);</span><br><span class="css">    <span class="hljs-attribute">transition</span>: width <span class="hljs-number">0.28s</span>;</span><br><span class="css">  &#125;</span><br><span class="css"></span><br><span class="css">  <span class="hljs-selector-class">.hideSidebar</span> <span class="hljs-selector-class">.fixed-header</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - #&#123;$hideSideBarWidth&#125;);</span><br><span class="css">  &#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br>  // 在 `styles/variables.scss` 中指定 `hideSideBarWidth`<br>  $hideSideBarWidth: 54px;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="22、SidebarHeader-处理"><a href="#22、SidebarHeader-处理" class="headerlink" title="22、SidebarHeader 处理"></a>22、SidebarHeader 处理</h4><details>
<summary>显示详细代码</summary>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;logo-container&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">el-avatar</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;44&quot;</span> <span class="hljs-attr">shape</span>=<span class="hljs-string">&quot;square&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;http://xxxxx.com&quot;</span> /&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;logo-title&quot;</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;$store.getters.sidebarOpened&quot;</span>&gt;</span>Admin<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    ...<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css"></span><br><span class="css">  <span class="hljs-selector-class">.logo-container</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">44px</span>;</span><br><span class="css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">0</span> <span class="hljs-number">22px</span> <span class="hljs-number">0</span>;</span><br><span class="css">    <span class="hljs-attribute">display</span>: flex;</span><br><span class="css">    <span class="hljs-attribute">align-items</span>: center;</span><br><span class="css">    <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="css">    <span class="hljs-selector-class">.logo-title</span> &#123;</span><br><span class="css">      <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">10px</span>;</span><br><span class="css">      <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="css">      <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;</span><br><span class="css">      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">50px</span>;</span><br><span class="css">      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="css">      <span class="hljs-attribute">white-space</span>: nowrap;</span><br><span class="css">    &#125;</span><br><span class="css">  &#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>

</details>

<blockquote>
<p>处理 el-avatar 的图片背景问题</p>
</blockquote>
<p>创建 <code>styles/element.scss</code>,然后将其导入到<code>style/index.scss</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.el-avatar</span> &#123;<br>  --el-avatar-<span class="hljs-attribute">background-color</span>: none;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>处理动画问题</p>
</blockquote>
<p>在 <code>styles/variables.scss</code> 中，加入以下变量</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">$sideBarDuration: <span class="hljs-number">0.28s</span>;<br></code></pre></td></tr></table></figure>

<p><code>styles/sidebar.scss</code> 修改时长</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.main-container</span> &#123;<br>  <span class="hljs-attribute">transition</span>: margin-left #&#123;$sideBarDuration&#125;;<br> ...<br>&#125;<br><br><span class="hljs-selector-class">.sidebar-container</span> &#123;<br>  <span class="hljs-attribute">transition</span>: width #&#123;$sideBarDuration&#125;;<br>	...<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>layout/index</code> 修改样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.fixed-header</span> &#123;<br>  ...<br>  <span class="hljs-attribute">transition</span>: width #&#123;$sideBarDuration&#125;;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="23、组件状态驱动的动态-CSS-值"><a href="#23、组件状态驱动的动态-CSS-值" class="headerlink" title="23、组件状态驱动的动态 CSS 值"></a>23、组件状态驱动的动态 CSS 值</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span> ... <span class="hljs-tag">&lt;<span class="hljs-name">el-avatar</span> <span class="hljs-attr">:size</span>=<span class="hljs-string">&quot;logoHeight&quot;</span> <span class="hljs-attr">...</span> &lt;/<span class="hljs-attr">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span><br><span class="javascript">  ...</span><br><span class="javascript">  <span class="hljs-keyword">const</span> logoHeight = <span class="hljs-number">44</span></span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css"></span><br><span class="css">  <span class="hljs-selector-class">.logo-container</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">v-bind</span>(logoHeight) + <span class="hljs-string">&#x27;px&#x27;</span>;</span><br><span class="css">  ...</span><br><span class="css">  &#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2022/11/21/95-v-deep/" title="95、vue3.0使用sass预处理器使用::v-deep深度选择器抛出警告"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一页: 95、vue3.0使用sass预处理器使用::v-deep深度选择器抛出警告</span></a><a class="button is-default" href="/2022/11/10/93-vue3-ele-plus-admin/" title="93、使用vue3+element-plus写后台管理系统：（三）"><span class="has-text-weight-semibold">下一页: 93、使用vue3+element-plus写后台管理系统：（三）</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/HeyJudeYQ"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><a title="zhihu" target="_blank" rel="noopener nofollow" href="//zhihu.com/https://www.zhihu.com/hot"><i class="iconfont icon-zhihu"></i></a><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> Jude 2023</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span>记住昨日的美好，过好今日的生活，憧憬明天的到来</span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>